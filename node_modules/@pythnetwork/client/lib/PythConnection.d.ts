import { Connection, PublicKey, Commitment } from '@solana/web3.js';
import { PriceData, Product } from './index';
/**
 * Type of callback invoked whenever a pyth price account changes. The callback additionally
 * gets access product, which contains the metadata for this price account (e.g., that the symbol is "BTC/USD")
 */
export declare type PythPriceCallback = (product: Product, price: PriceData) => void;
/**
 * Reads Pyth price data from a solana web3 connection. This class uses a callback-driven model,
 * similar to the solana web3 methods for tracking updates to accounts.
 */
export declare class PythConnection {
    connection: Connection;
    pythProgramKey: PublicKey;
    commitment: Commitment;
    productAccountKeyToProduct: Record<string, Product>;
    priceAccountKeyToProductAccountKey: Record<string, string>;
    callbacks: PythPriceCallback[];
    private handleProductAccount;
    private handlePriceAccount;
    private handleAccount;
    /** Create a PythConnection that reads its data from an underlying solana web3 connection.
     *  pythProgramKey is the public key of the Pyth program running on the chosen solana cluster.
     */
    constructor(connection: Connection, pythProgramKey: PublicKey, commitment?: Commitment);
    /** Start receiving price updates. Once this method is called, any registered callbacks will be invoked
     *  each time a Pyth price account is updated.
     */
    start(): Promise<void>;
    /** Register callback to receive price updates. */
    onPriceChange(callback: PythPriceCallback): void;
    /** Stop receiving price updates. Note that this also currently deletes all registered callbacks. */
    stop(): Promise<void>;
}
