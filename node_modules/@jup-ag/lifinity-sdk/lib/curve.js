'use strict';(function(_0x27370e,_0x206825){const _0x39535b=a0_0x38e6,_0x33d732=_0x27370e();while(!![]){try{const _0x317431=-parseInt(_0x39535b(0x8f))/0x1+parseInt(_0x39535b(0x8e))/0x2+-parseInt(_0x39535b(0x8d))/0x3*(parseInt(_0x39535b(0x92))/0x4)+-parseInt(_0x39535b(0x90))/0x5*(parseInt(_0x39535b(0x8c))/0x6)+-parseInt(_0x39535b(0x8b))/0x7+-parseInt(_0x39535b(0x91))/0x8+parseInt(_0x39535b(0x93))/0x9;if(_0x317431===_0x206825)break;else _0x33d732['push'](_0x33d732['shift']());}catch(_0x44ee4a){_0x33d732['push'](_0x33d732['shift']());}}}(a0_0x2278,0xd9170));var __importDefault=this&&this['__importDefault']||function(_0x45ab92){return _0x45ab92&&_0x45ab92['__esModule']?_0x45ab92:{'default':_0x45ab92};};Object['defineProperty'](exports,'__esModule',{'value':!![]}),exports['getCurveAmount']=exports['TradeDirection']=void 0x0;function a0_0x38e6(_0x43ae55,_0x5132e8){const _0x227846=a0_0x2278();return a0_0x38e6=function(_0x38e6f6,_0x9b35d0){_0x38e6f6=_0x38e6f6-0x8b;let _0xf09269=_0x227846[_0x38e6f6];return _0xf09269;},a0_0x38e6(_0x43ae55,_0x5132e8);}const decimal_js_1=__importDefault(require('decimal.js'));exports['TradeDirection']={'AtoB':'AtoB','BtoA':'BtoA'};function getCurveAmount(_0x214f10,_0x280fd5,_0x89288b,_0x49a249,_0x3fdb6f,_0x16cc2c,_0x27d867,_0x38269b,_0x114089,_0x327dbb){let _0x30db68=new decimal_js_1['default'](0x0),_0x1d0de3=new decimal_js_1['default'](0x0);const _0x3edc8e=_0x214f10['times'](_0x49a249['tradeFeeNumerator'])['div'](_0x49a249['tradeFeeDenominator']),_0x5536b4=_0x214f10['times'](_0x49a249['ownerTradeFeeNumerator'])['div'](_0x49a249['ownerTradeFeeDenominator']),_0x1defa9=_0x3edc8e['plus'](_0x5536b4),_0x398702=_0x49a249['tradeFeeNumerator']['div'](_0x49a249['tradeFeeDenominator'])['plus'](_0x49a249['ownerTradeFeeNumerator']['div'](_0x49a249['ownerTradeFeeDenominator'])),_0x10970e=_0x214f10['minus'](_0x1defa9),_0x567b8b=new decimal_js_1['default'](0xa),_0x260450=_0x567b8b['pow'](_0x89288b['baseDecimals']);if(_0x89288b['freezeTrade']===0x1)throw new Error('ProgramIsFrozen');if(!_0x38269b['status']['eq'](0x1))throw new Error('InvalidPythStatus');if(_0x280fd5-_0x38269b['publishSlot']['toNumber']()>_0x27d867['pythSlotLimit']['toNumber']())throw new Error('InvalidPythSlot');let _0x20f3d6=_0x38269b['confidence']['div'](_0x38269b['price']);if(_0x20f3d6['gt'](_0x27d867['pythConfidenceLimit']['div'](_0x27d867['configDenominator'])))throw new Error('InvalidPythConfidence');let _0x57bf94=_0x38269b['price'];if(_0x114089){if(!_0x114089['status']['eq'](0x1))throw new Error('InvalidPythPcStatus');if(_0x280fd5-_0x114089['publishSlot']['toNumber']()>_0x27d867['pythSlotLimit']['toNumber']())throw new Error('InvalidPythPcSlot');let _0x33c22c=_0x114089['confidence']['div'](_0x114089['price']);if(_0x33c22c['gt'](_0x27d867['pythConfidenceLimit']['div'](_0x27d867['configDenominator'])))throw new Error('InvalidPythPcConfidence');_0x57bf94=_0x57bf94['times'](_0x567b8b['pow'](Math['abs'](_0x114089['exponent'])))['div'](_0x114089['price']);}let _0x5aed11=new decimal_js_1['default'](0x0);getAbs(_0x57bf94['div'](_0x27d867['lastPrice'])['minus'](0x1))['gt'](_0x27d867['adjustRatio']['div'](_0x27d867['configDenominator']))?_0x5aed11=_0x57bf94:_0x5aed11=_0x27d867['lastPrice'];;if(_0x27d867['oracleStatus']['eq'](0x1)&&_0x327dbb===exports['TradeDirection']['AtoB'])throw new Error('OracleConfidence');else{if(_0x27d867['oracleStatus']['eq'](0x2)&&_0x327dbb===exports['TradeDirection']['BtoA'])throw new Error('OracleConfidence');}const _0x157d3f=_0x27d867['lastBalancedPrice'],_0x5baec7=_0x27d867['coefficientUp'],_0x5be0b6=_0x27d867['coefficientDown'];if(_0x89288b['curveType']===0x0){const {destinationAmountSwapped:_0x1997b7,poolPriceImpact:_0xebd29a}=constantCurve(_0x10970e,_0x5aed11,_0x157d3f,_0x260450,_0x5baec7,_0x5be0b6,_0x3fdb6f,_0x16cc2c,_0x27d867,_0x327dbb);_0x30db68=_0x1997b7,_0x1d0de3=_0xebd29a;}else{if(_0x89288b['curveType']===0x1){const {destinationAmountSwapped:_0x2601aa,poolPriceImpact:_0x13d5f0}=stableCurve(_0x10970e,_0x5aed11,_0x157d3f,_0x260450,_0x5baec7,_0x5be0b6,_0x3fdb6f,_0x16cc2c,_0x27d867,_0x327dbb);_0x30db68=_0x2601aa,_0x1d0de3=_0x13d5f0;}}if(_0x327dbb===exports['TradeDirection']['AtoB']&&_0x30db68['gte'](_0x16cc2c))throw new Error('ExceedPoolBalance');else{if(_0x327dbb===exports['TradeDirection']['BtoA']&&_0x30db68['gte'](_0x3fdb6f))throw new Error('ExceedPoolBalance');}return{'amountSwapped':_0x30db68,'priceImpact':_0x1d0de3,'fee':_0x1defa9,'feePercent':_0x398702};}exports['getCurveAmount']=getCurveAmount;function constantCurve(_0x124010,_0x120cbf,_0xefba84,_0x595569,_0x6860ee,_0x2d88c9,_0x421445,_0xa60477,_0x4a21d3,_0x15a059){let _0x1c9b05=new decimal_js_1['default'](0x0),_0x2a571a=new decimal_js_1['default'](0x0),_0x508f45=_0x421445['times'](_0x4a21d3['concentrationRatio']),_0x5f28f9=_0xa60477['times'](_0x4a21d3['concentrationRatio']),_0x597485=_0x508f45['times'](_0x120cbf)['div'](_0x595569);switch(_0x15a059){case exports['TradeDirection']['AtoB']:{if(_0x120cbf['gt'](_0xefba84)&&_0x597485['gt'](_0x5f28f9)){let _0x546663=_0x5f28f9['div'](_0x597485),_0x4c4b53=_0x546663['pow'](_0x2d88c9);_0x508f45=_0x508f45['times'](_0x4c4b53),_0x5f28f9=_0x5f28f9['times'](_0x4c4b53);}else{if(_0xefba84['gt'](_0x120cbf)&&_0x5f28f9['gt'](_0x597485)){let _0x5318c7=_0x5f28f9['div'](_0x597485),_0x4db0cd=_0x5318c7['pow'](_0x6860ee);_0x508f45=_0x508f45['times'](_0x4db0cd),_0x5f28f9=_0x5f28f9['times'](_0x4db0cd);}else{if(_0x597485['gt'](_0x5f28f9)){let _0xb53ccf=_0x5f28f9['div'](_0x597485),_0x250c1f=_0xb53ccf['pow'](_0x2d88c9);_0x508f45=_0x508f45['times'](_0x250c1f),_0x5f28f9=_0x5f28f9['times'](_0x250c1f);}else;}}let _0xf5fe64=new decimal_js_1['default'](Math['sqrt'](_0x508f45['toNumber']())),_0x579b50=new decimal_js_1['default'](Math['sqrt'](_0x5f28f9['toNumber']())),_0x3eb02a=new decimal_js_1['default'](Math['sqrt'](_0x120cbf['toNumber']()))['div'](new decimal_js_1['default'](Math['sqrt'](_0x595569['toNumber']()))),_0x2857a6=_0xf5fe64['times'](_0x579b50);_0x508f45=_0x2857a6['div'](_0x3eb02a),_0x5f28f9=_0x2857a6['times'](_0x3eb02a);let _0x42e7cf=_0x508f45['times'](_0x5f28f9),_0x4a01d9=_0x508f45['plus'](_0x124010),{q:_0xe37b64,r:_0x47931f}=checkedCeilDiv(_0x42e7cf,_0x4a01d9),_0x289136=_0xe37b64;_0x4a01d9=_0x47931f,_0x1c9b05=_0x5f28f9['minus'](_0x289136);const _0x577691=_0x5f28f9['div'](_0x508f45),_0x2a4670=_0x5f28f9['minus'](_0x1c9b05)['div'](_0x508f45['plus'](_0x124010));_0x2a571a=_0x577691['minus'](_0x2a4670)['div'](_0x2a4670);break;}case exports['TradeDirection']['BtoA']:{if(_0x120cbf['gt'](_0xefba84)&&_0x597485['gt'](_0x5f28f9)){let _0x1940bb=_0x597485['div'](_0x5f28f9),_0x4f02ed=_0x1940bb['pow'](_0x6860ee);_0x508f45=_0x508f45['times'](_0x4f02ed),_0x5f28f9=_0x5f28f9['times'](_0x4f02ed);}else{if(_0xefba84['gt'](_0x120cbf)&&_0x5f28f9['gt'](_0x597485)){let _0x4642c7=_0x597485['div'](_0x5f28f9),_0x460125=_0x4642c7['pow'](_0x2d88c9);_0x508f45=_0x508f45['times'](_0x460125),_0x5f28f9=_0x5f28f9['times'](_0x460125);}else{if(_0x597485['gt'](_0x5f28f9));else{let _0x26f908=_0x597485['div'](_0x5f28f9),_0x27b9a3=_0x26f908['pow'](_0x2d88c9);_0x508f45=_0x508f45['times'](_0x27b9a3),_0x5f28f9=_0x5f28f9['times'](_0x27b9a3);}}}let _0x5f41ed=new decimal_js_1['default'](Math['sqrt'](_0x508f45['toNumber']())),_0x4854e8=new decimal_js_1['default'](Math['sqrt'](_0x5f28f9['toNumber']())),_0x332035=new decimal_js_1['default'](Math['sqrt'](_0x120cbf['toNumber']()))['div'](new decimal_js_1['default'](Math['sqrt'](_0x595569['toNumber']()))),_0x2cd9dd=_0x5f41ed['times'](_0x4854e8);_0x508f45=_0x2cd9dd['div'](_0x332035),_0x5f28f9=_0x2cd9dd['times'](_0x332035);let _0x454d2b=_0x508f45['times'](_0x5f28f9),_0x3d1aca=_0x5f28f9['plus'](_0x124010),{q:_0x58faf6,r:_0x3f8c1c}=checkedCeilDiv(_0x454d2b,_0x3d1aca),_0x46851f=_0x58faf6;_0x3d1aca=_0x3f8c1c,_0x1c9b05=_0x508f45['minus'](_0x46851f);const _0x4c63a6=_0x5f28f9['div'](_0x508f45),_0x2e91cb=_0x5f28f9['plus'](_0x124010)['div'](_0x508f45['minus'](_0x1c9b05));_0x2a571a=_0x2e91cb['minus'](_0x4c63a6)['div'](_0x4c63a6);break;}}return _0x1c9b05=new decimal_js_1['default'](Math['floor'](_0x1c9b05['toNumber']())),{'destinationAmountSwapped':_0x1c9b05,'poolPriceImpact':_0x2a571a};}function a0_0x2278(){const _0x5a6764=['1500215BfGbIl','67890cScNiO','7110688zAPmdr','4816884znPdbN','39328371jHljnR','423220USzEiJ','480GStSiJ','3FyXvcu','2518706qKThCw'];a0_0x2278=function(){return _0x5a6764;};return a0_0x2278();};function stableCurve(_0x4a9754,_0x7fc9c0,_0x151986,_0xedc28e,_0xdead13,_0x9f465e,_0x534e54,_0x3bd679,_0x3d6aa4,_0x44a0ea){let _0x4dde59=new decimal_js_1['default'](0x0),_0x4dd696=new decimal_js_1['default'](0x0),_0x3348f7=_0x534e54,_0x1fd9c8=_0x3bd679,_0x2ddecd=_0x3348f7['times'](_0x7fc9c0)['div'](_0xedc28e);switch(_0x44a0ea){case exports['TradeDirection']['AtoB']:{if(_0x7fc9c0['gt'](_0x151986)&&_0x2ddecd['gt'](_0x1fd9c8)){let _0x254e27=_0x1fd9c8['div'](_0x2ddecd),_0x56f870=_0x254e27['pow'](_0x9f465e);_0x3348f7=_0x3348f7['times'](_0x56f870),_0x1fd9c8=_0x1fd9c8['times'](_0x56f870);}else{if(_0x151986['gt'](_0x7fc9c0)&&_0x1fd9c8['gt'](_0x2ddecd)){let _0xa6b17b=_0x1fd9c8['div'](_0x2ddecd),_0x17cbbe=_0xa6b17b['pow'](_0xdead13);_0x3348f7=_0x3348f7['times'](_0x17cbbe),_0x1fd9c8=_0x1fd9c8['times'](_0x17cbbe);}else{if(_0x2ddecd['gt'](_0x1fd9c8)){let _0x4ebb30=_0x1fd9c8['div'](_0x2ddecd),_0x2d537b=_0x4ebb30['pow'](_0x9f465e);_0x3348f7=_0x3348f7['times'](_0x2d537b),_0x1fd9c8=_0x1fd9c8['times'](_0x2d537b);}else;}}_0x3348f7=_0x3348f7['times'](_0x3d6aa4['concentrationRatio']),_0x1fd9c8=_0x1fd9c8['times'](_0x3d6aa4['concentrationRatio']);let _0x34a3bc=new decimal_js_1['default'](Math['sqrt'](_0x3348f7['toNumber']())),_0x5099b2=new decimal_js_1['default'](Math['sqrt'](_0x1fd9c8['toNumber']())),_0x367571=new decimal_js_1['default'](Math['sqrt'](_0x7fc9c0['toNumber']()))['div'](new decimal_js_1['default'](Math['sqrt'](_0xedc28e['toNumber']()))),_0x3e13db=_0x34a3bc['times'](_0x5099b2);_0x3348f7=_0x3e13db['div'](_0x367571),_0x1fd9c8=_0x3e13db['times'](_0x367571);let _0x1b6f3a=_0x3348f7['times'](_0x1fd9c8),_0x22f5c5=_0x3348f7['plus'](_0x4a9754),{q:_0x37f55a,r:_0x31ed5c}=checkedCeilDiv(_0x1b6f3a,_0x22f5c5),_0x494bc9=_0x37f55a;_0x22f5c5=_0x31ed5c,_0x4dde59=_0x1fd9c8['minus'](_0x494bc9);const _0x5b55b1=_0x1fd9c8['div'](_0x3348f7),_0x3b7052=_0x1fd9c8['minus'](_0x4dde59)['div'](_0x3348f7['plus'](_0x4a9754));_0x4dd696=_0x5b55b1['minus'](_0x3b7052)['div'](_0x3b7052);break;}case exports['TradeDirection']['BtoA']:{if(_0x7fc9c0['gt'](_0x151986)&&_0x2ddecd['gt'](_0x1fd9c8)){let _0xd34c48=_0x2ddecd['div'](_0x1fd9c8),_0xca6ee7=_0xd34c48['pow'](_0xdead13);_0x3348f7=_0x3348f7['times'](_0xca6ee7),_0x1fd9c8=_0x1fd9c8['times'](_0xca6ee7);}else{if(_0x151986['gt'](_0x7fc9c0)&&_0x1fd9c8['gt'](_0x2ddecd)){let _0x10c38a=_0x2ddecd['div'](_0x1fd9c8),_0x5d1989=_0x10c38a['pow'](_0x9f465e);_0x3348f7=_0x3348f7['times'](_0x5d1989),_0x1fd9c8=_0x1fd9c8['times'](_0x5d1989);}else{if(_0x2ddecd['gt'](_0x1fd9c8));else{let _0x909175=_0x2ddecd['div'](_0x1fd9c8),_0x1e10cd=_0x909175['pow'](_0x9f465e);_0x3348f7=_0x3348f7['times'](_0x1e10cd),_0x1fd9c8=_0x1fd9c8['times'](_0x1e10cd);}}}_0x3348f7=_0x3348f7['times'](_0x3d6aa4['concentrationRatio']),_0x1fd9c8=_0x1fd9c8['times'](_0x3d6aa4['concentrationRatio']);let _0x1ad1b9=new decimal_js_1['default'](Math['sqrt'](_0x3348f7['toNumber']())),_0x330098=new decimal_js_1['default'](Math['sqrt'](_0x1fd9c8['toNumber']())),_0x1a1244=new decimal_js_1['default'](Math['sqrt'](_0x7fc9c0['toNumber']()))['div'](new decimal_js_1['default'](Math['sqrt'](_0xedc28e['toNumber']()))),_0x346214=_0x1ad1b9['times'](_0x330098);_0x3348f7=_0x346214['div'](_0x1a1244),_0x1fd9c8=_0x346214['times'](_0x1a1244);let _0x32ea77=_0x3348f7['times'](_0x1fd9c8),_0x3d522b=_0x1fd9c8['plus'](_0x4a9754),{q:_0x528f9c,r:_0x291d2c}=checkedCeilDiv(_0x32ea77,_0x3d522b),_0x229605=_0x528f9c;_0x3d522b=_0x291d2c,_0x4dde59=_0x3348f7['minus'](_0x229605);const _0x191f51=_0x1fd9c8['div'](_0x3348f7),_0x54dc48=_0x1fd9c8['plus'](_0x4a9754)['div'](_0x3348f7['minus'](_0x4dde59));_0x4dd696=_0x54dc48['minus'](_0x191f51)['div'](_0x191f51);break;}}return _0x4dde59=new decimal_js_1['default'](Math['floor'](_0x4dde59['toNumber']())),{'destinationAmountSwapped':_0x4dde59,'poolPriceImpact':_0x4dd696};}function getAbs(_0x118959){return _0x118959['toNumber']()<0x0?_0x118959['times'](-0x1):_0x118959;};function checkedCeilDiv(_0x33902e,_0x316c07){let _0x52d488=_0x316c07,_0x304775=_0x33902e['div'](_0x52d488);if(_0x304775['eq'](0x0))return{'q':new decimal_js_1['default'](0x0),'r':new decimal_js_1['default'](0x0)};let _0x35d240=_0x33902e['mod'](_0x316c07);if(_0x35d240['gt'](0x0)){_0x304775=_0x304775['plus'](0x1),_0x52d488=_0x33902e['div'](_0x304775);let _0x4ab086=_0x33902e['mod'](_0x304775);_0x4ab086['gt'](0x0)&&(_0x52d488=_0x52d488['plus'](0x1));}return{'q':_0x304775,'r':_0x52d488};}