"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("@solana/web3.js"),t=require("@solana/spl-token");class r extends Error{constructor(e,t,r){super(e),this.txid=void 0,this.code=void 0,this.txid=t,this.code=r,Object.setPrototypeOf(this,Error.prototype)}}async function n(e){const t=e[1].Custom;let r="";switch(t){case 0:r="An account with the same address already exists";case 1:r="The account does not have enough SOL to perform the operation";default:r="Unknown error, visit the explorer"}return{code:t,message:r}}exports.TransactionError=r,exports.deserializeAccount=r=>{if(null==r||0==r.length)return;const n=t.AccountLayout.decode(r);return n.mint=new e.PublicKey(n.mint),n.owner=new e.PublicKey(n.owner),n.amount=t.u64.fromBuffer(n.amount),0===n.delegateOption?(n.delegate=null,n.delegatedAmount=new t.u64(0)):(n.delegate=new e.PublicKey(n.delegate),n.delegatedAmount=t.u64.fromBuffer(n.delegatedAmount)),n.isInitialized=0!==n.state,n.isFrozen=2===n.state,1===n.isNativeOption?(n.rentExemptReserve=t.u64.fromBuffer(n.isNative),n.isNative=!0):(n.rentExemptReserve=null,n.isNative=!1),n.closeAuthority=0===n.closeAuthorityOption?null:new e.PublicKey(n.closeAuthority),n},exports.parseErrorForTransaction=async function(t){var r;const o=[];if(null!=t&&t.meta&&t.meta.logMessages&&t.meta.logMessages.forEach((e=>{const t=/Error: (.*)/gm;let r;for(;null!==(r=t.exec(e));)r.index===t.lastIndex&&t.lastIndex++,r.length>1&&o.push(r[1])})),o.length>0)return{message:o.join(",")};const s=null==t||null===(r=t.meta)||void 0===r?void 0:r.err,i=JSON.stringify(s);let a;if(s&&"string"!=typeof s){var u;const r=s.InstructionError,[o,{Custom:c}]=r;a=c;const d=null==t||null===(u=t.meta)||void 0===u?void 0:u.innerInstructions;var l;if(!d||o>=d.length)return null!=t&&t.meta&&t.meta.logMessages&&async function(e){return e.forEach((e=>{if(e.includes("Program 11111111111111111111111111111111 invoke"))return!0})),!1}(null===(l=t.meta)||void 0===l?void 0:l.logMessages)?n(r):{message:i,code:a};const m=d.find((e=>e.index===o));if(!m)return{message:i,code:a};if(t.transaction.message.accountKeys[m.instructions[m.instructions.length-1].programIdIndex].equals(e.SystemProgram.programId))return n(r)}return{message:"string"==typeof s?s:"Unknown error, visit the explorer",code:a}};
//# sourceMappingURL=optimist.cjs.production.min.js.map
