{"version":3,"file":"fees.js","sourceRoot":"","sources":["../../../src/state/fees.ts"],"names":[],"mappings":"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","sourcesContent":["import { Percent, u64 } from \"@saberhq/token-utils\";\n\nimport type { RawFees } from \"./layout\";\n\nexport type Fees = {\n  trade: Percent;\n  withdraw: Percent;\n  adminTrade: Percent;\n  adminWithdraw: Percent;\n};\n\nexport const DEFAULT_FEE = new Percent(0, 10000);\n\nexport const ZERO_FEES: Fees = {\n  /**\n   * Fee per trade\n   */\n  trade: DEFAULT_FEE,\n  withdraw: DEFAULT_FEE,\n  adminTrade: DEFAULT_FEE,\n  adminWithdraw: DEFAULT_FEE,\n};\n\nconst recommendedFeesRaw = {\n  adminTradeFeeNumerator: 50,\n  adminTradeFeeDenominator: 100,\n  adminWithdrawFeeNumerator: 50,\n  adminWithdrawFeeDenominator: 100,\n  tradeFeeNumerator: 20,\n  tradeFeeDenominator: 10000,\n  withdrawFeeNumerator: 50,\n  withdrawFeeDenominator: 10000,\n};\n\nexport const RECOMMENDED_FEES: Fees = {\n  trade: new Percent(\n    recommendedFeesRaw.tradeFeeNumerator,\n    recommendedFeesRaw.tradeFeeDenominator\n  ),\n  withdraw: new Percent(\n    recommendedFeesRaw.withdrawFeeNumerator,\n    recommendedFeesRaw.withdrawFeeDenominator\n  ),\n  adminTrade: new Percent(\n    recommendedFeesRaw.adminTradeFeeNumerator,\n    recommendedFeesRaw.adminTradeFeeDenominator\n  ),\n  adminWithdraw: new Percent(\n    recommendedFeesRaw.adminWithdrawFeeNumerator,\n    recommendedFeesRaw.adminWithdrawFeeDenominator\n  ),\n};\n\nexport const encodeFees = (fees: Fees): RawFees => ({\n  adminTradeFeeNumerator: new u64(\n    fees.adminTrade.numerator.toString()\n  ).toBuffer(),\n  adminTradeFeeDenominator: new u64(\n    fees.adminTrade.denominator.toString()\n  ).toBuffer(),\n  adminWithdrawFeeNumerator: new u64(\n    fees.adminWithdraw.numerator.toString()\n  ).toBuffer(),\n  adminWithdrawFeeDenominator: new u64(\n    fees.adminWithdraw.denominator.toString()\n  ).toBuffer(),\n  tradeFeeNumerator: new u64(fees.trade.numerator.toString()).toBuffer(),\n  tradeFeeDenominator: new u64(fees.trade.denominator.toString()).toBuffer(),\n  withdrawFeeNumerator: new u64(fees.withdraw.numerator.toString()).toBuffer(),\n  withdrawFeeDenominator: new u64(\n    fees.withdraw.denominator.toString()\n  ).toBuffer(),\n});\n\nexport const decodeFees = (raw: RawFees): Fees => ({\n  adminTrade: new Percent(\n    u64.fromBuffer(Buffer.from(raw.adminTradeFeeNumerator)).toString(),\n    u64.fromBuffer(Buffer.from(raw.adminTradeFeeDenominator)).toString()\n  ),\n  adminWithdraw: new Percent(\n    u64.fromBuffer(Buffer.from(raw.adminWithdrawFeeNumerator)).toString(),\n    u64.fromBuffer(Buffer.from(raw.adminWithdrawFeeDenominator)).toString()\n  ),\n  trade: new Percent(\n    u64.fromBuffer(Buffer.from(raw.tradeFeeNumerator)).toString(),\n    u64.fromBuffer(Buffer.from(raw.tradeFeeDenominator)).toString()\n  ),\n  withdraw: new Percent(\n    u64.fromBuffer(Buffer.from(raw.withdrawFeeNumerator)).toString(),\n    u64.fromBuffer(Buffer.from(raw.withdrawFeeDenominator)).toString()\n  ),\n});\n"]}