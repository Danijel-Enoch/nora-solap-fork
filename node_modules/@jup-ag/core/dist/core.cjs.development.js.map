{"version":3,"file":"core.cjs.development.js","sources":["../src/lib/idl/jupiter.ts","../src/constants.ts","../src/utils/layout.ts","../src/lib/cropper/swapLayout.ts","../src/lib/jupiterInstruction.ts","../src/lib/saber/saberAddDecimalsAmm.ts","../src/utils/getTwoPermutations.ts","../src/utils/chunks.ts","../src/utils/chunkedGetMultipleAccountInfos.ts","../src/lib/amm.ts","../src/lib/raydium/pools.ts","../src/lib/raydium/raydiumAmm.ts","../src/lib/serum/market.ts","../src/lib/serum/serumAmm.ts","../src/lib/split-trade/splitTradeAmm.ts","../src/lib/market.ts","../src/lib/saber/saberAmm.ts","../src/lib/aldrin/percentage.ts","../src/lib/aldrin/poolState.ts","../src/lib/aldrin/aldrinAmm.ts","../src/lib/spl-token-swap/splTokenSwapPools.ts","../src/lib/spl-token-swap/tokenSwapLayout.ts","../src/lib/spl-token-swap/splTokenSwapAmm.ts","../src/lib/mercurial/swapLayout.ts","../src/lib/mercurial/mercurialAmm.ts","../src/lib/cropper/cropperAmm.ts","../src/lib/crema/swapLayout.ts","../src/lib/crema/cremaAmm.ts","../src/lib/sencha/swapLayout.ts","../src/lib/sencha/senchaAmm.ts","../src/lib/lifinity/swapLayout.ts","../src/lib/lifinity/lifinityAmm.ts","../src/lib/whirlpool/whirlpoolAmm.ts","../src/lib/cykura/solanaTickDataProvider.ts","../src/lib/cykura/cykuraAmm.ts","../src/lib/ammFactory.ts","../src/lib/routes.ts","../src/lib/cache.ts","../src/utils/instruction.ts","../src/utils/token.ts","../src/lib/routeToInstructions.ts","../src/lib/serum/openOrders.ts","../src/lib/fee.ts","../src/utils/TransactionBuilder.ts","../src/utils/Owner.ts","../src/utils/wait.ts","../src/utils/transactionHelpers.ts","../src/utils/cartesian.ts","../src/lib/computeRouteInfos.ts","../src/utils/tx/errors.ts","../src/lib/getTopTokens.ts","../src/lib/jupiter.ts"],"sourcesContent":["export type Jupiter = {\n  version: '0.1.0';\n  name: 'jupiter';\n  instructions: [\n    {\n      name: 'mercurialExchange';\n      accounts: [\n        {\n          name: 'swapProgram';\n          isMut: false;\n          isSigner: false;\n        },\n        {\n          name: 'swapState';\n          isMut: false;\n          isSigner: false;\n        },\n        {\n          name: 'tokenProgram';\n          isMut: false;\n          isSigner: false;\n        },\n        {\n          name: 'poolAuthority';\n          isMut: false;\n          isSigner: false;\n        },\n        {\n          name: 'userTransferAuthority';\n          isMut: false;\n          isSigner: true;\n        },\n        {\n          name: 'sourceTokenAccount';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'destinationTokenAccount';\n          isMut: true;\n          isSigner: false;\n        },\n      ];\n      args: [\n        {\n          name: 'inAmount';\n          type: {\n            option: 'u64';\n          };\n        },\n        {\n          name: 'minimumOutAmount';\n          type: 'u64';\n        },\n        {\n          name: 'platformFeeBps';\n          type: 'u8';\n        },\n      ];\n    },\n    {\n      name: 'saberExchange';\n      accounts: [\n        {\n          name: 'swapProgram';\n          isMut: false;\n          isSigner: false;\n        },\n        {\n          name: 'tokenProgram';\n          isMut: false;\n          isSigner: false;\n        },\n        {\n          name: 'swap';\n          isMut: false;\n          isSigner: false;\n        },\n        {\n          name: 'swapAuthority';\n          isMut: false;\n          isSigner: false;\n        },\n        {\n          name: 'userAuthority';\n          isMut: false;\n          isSigner: false;\n        },\n        {\n          name: 'clock';\n          isMut: false;\n          isSigner: false;\n        },\n        {\n          name: 'inputUserAccount';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'inputTokenAccount';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'outputUserAccount';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'outputTokenAccount';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'feesTokenAccount';\n          isMut: true;\n          isSigner: false;\n        },\n      ];\n      args: [\n        {\n          name: 'inAmount';\n          type: {\n            option: 'u64';\n          };\n        },\n        {\n          name: 'minimumOutAmount';\n          type: 'u64';\n        },\n        {\n          name: 'platformFeeBps';\n          type: 'u8';\n        },\n      ];\n    },\n    {\n      name: 'saberSwap';\n      accounts: [\n        {\n          name: 'swapProgram';\n          isMut: false;\n          isSigner: false;\n        },\n        {\n          name: 'tokenProgram';\n          isMut: false;\n          isSigner: false;\n        },\n        {\n          name: 'swap';\n          isMut: false;\n          isSigner: false;\n        },\n        {\n          name: 'swapAuthority';\n          isMut: false;\n          isSigner: false;\n        },\n        {\n          name: 'userAuthority';\n          isMut: false;\n          isSigner: false;\n        },\n        {\n          name: 'inputUserAccount';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'inputTokenAccount';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'outputUserAccount';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'outputTokenAccount';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'feesTokenAccount';\n          isMut: true;\n          isSigner: false;\n        },\n      ];\n      args: [\n        {\n          name: 'inAmount';\n          type: {\n            option: 'u64';\n          };\n        },\n        {\n          name: 'minimumOutAmount';\n          type: 'u64';\n        },\n        {\n          name: 'platformFeeBps';\n          type: 'u8';\n        },\n      ];\n    },\n    {\n      name: 'saberAddDecimalsDeposit';\n      accounts: [\n        {\n          name: 'addDecimalsProgram';\n          isMut: false;\n          isSigner: false;\n        },\n        {\n          name: 'wrapper';\n          isMut: false;\n          isSigner: false;\n        },\n        {\n          name: 'wrapperMint';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'wrapperUnderlyingTokens';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'owner';\n          isMut: false;\n          isSigner: true;\n        },\n        {\n          name: 'userUnderlyingTokens';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'userWrappedTokens';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'tokenProgram';\n          isMut: false;\n          isSigner: false;\n        },\n      ];\n      args: [\n        {\n          name: 'inAmount';\n          type: {\n            option: 'u64';\n          };\n        },\n        {\n          name: 'minimumOutAmount';\n          type: 'u64';\n        },\n        {\n          name: 'platformFeeBps';\n          type: 'u8';\n        },\n      ];\n    },\n    {\n      name: 'saberAddDecimalsWithdraw';\n      accounts: [\n        {\n          name: 'addDecimalsProgram';\n          isMut: false;\n          isSigner: false;\n        },\n        {\n          name: 'wrapper';\n          isMut: false;\n          isSigner: false;\n        },\n        {\n          name: 'wrapperMint';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'wrapperUnderlyingTokens';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'owner';\n          isMut: false;\n          isSigner: true;\n        },\n        {\n          name: 'userUnderlyingTokens';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'userWrappedTokens';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'tokenProgram';\n          isMut: false;\n          isSigner: false;\n        },\n      ];\n      args: [\n        {\n          name: 'inAmount';\n          type: {\n            option: 'u64';\n          };\n        },\n        {\n          name: 'minimumOutAmount';\n          type: 'u64';\n        },\n        {\n          name: 'platformFeeBps';\n          type: 'u8';\n        },\n      ];\n    },\n    {\n      name: 'senchaExchange';\n      accounts: [\n        {\n          name: 'swapProgram';\n          isMut: false;\n          isSigner: false;\n        },\n        {\n          name: 'tokenProgram';\n          isMut: false;\n          isSigner: false;\n        },\n        {\n          name: 'swap';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'userAuthority';\n          isMut: false;\n          isSigner: false;\n        },\n        {\n          name: 'inputUserAccount';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'inputTokenAccount';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'inputFeesAccount';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'outputUserAccount';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'outputTokenAccount';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'outputFeesAccount';\n          isMut: true;\n          isSigner: false;\n        },\n      ];\n      args: [\n        {\n          name: 'inAmount';\n          type: {\n            option: 'u64';\n          };\n        },\n        {\n          name: 'minimumOutAmount';\n          type: 'u64';\n        },\n        {\n          name: 'platformFeeBps';\n          type: 'u8';\n        },\n      ];\n    },\n    {\n      name: 'serumSwap';\n      accounts: [\n        {\n          name: 'market';\n          accounts: [\n            {\n              name: 'market';\n              isMut: true;\n              isSigner: false;\n            },\n            {\n              name: 'openOrders';\n              isMut: true;\n              isSigner: false;\n            },\n            {\n              name: 'requestQueue';\n              isMut: true;\n              isSigner: false;\n            },\n            {\n              name: 'eventQueue';\n              isMut: true;\n              isSigner: false;\n            },\n            {\n              name: 'bids';\n              isMut: true;\n              isSigner: false;\n            },\n            {\n              name: 'asks';\n              isMut: true;\n              isSigner: false;\n            },\n            {\n              name: 'coinVault';\n              isMut: true;\n              isSigner: false;\n            },\n            {\n              name: 'pcVault';\n              isMut: true;\n              isSigner: false;\n            },\n            {\n              name: 'vaultSigner';\n              isMut: false;\n              isSigner: false;\n            },\n          ];\n        },\n        {\n          name: 'authority';\n          isMut: false;\n          isSigner: true;\n        },\n        {\n          name: 'orderPayerTokenAccount';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'coinWallet';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'pcWallet';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'dexProgram';\n          isMut: false;\n          isSigner: false;\n        },\n        {\n          name: 'tokenProgram';\n          isMut: false;\n          isSigner: false;\n        },\n        {\n          name: 'rent';\n          isMut: false;\n          isSigner: false;\n        },\n      ];\n      args: [\n        {\n          name: 'side';\n          type: {\n            defined: 'Side';\n          };\n        },\n        {\n          name: 'inAmount';\n          type: {\n            option: 'u64';\n          };\n        },\n        {\n          name: 'minimumOutAmount';\n          type: 'u64';\n        },\n        {\n          name: 'platformFeeBps';\n          type: 'u8';\n        },\n      ];\n    },\n    {\n      name: 'tokenSwap';\n      accounts: [\n        {\n          name: 'tokenSwapProgram';\n          isMut: false;\n          isSigner: false;\n        },\n        {\n          name: 'tokenProgram';\n          isMut: false;\n          isSigner: false;\n        },\n        {\n          name: 'swap';\n          isMut: false;\n          isSigner: false;\n        },\n        {\n          name: 'authority';\n          isMut: false;\n          isSigner: false;\n        },\n        {\n          name: 'userTransferAuthority';\n          isMut: false;\n          isSigner: true;\n        },\n        {\n          name: 'source';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'swapSource';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'swapDestination';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'destination';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'poolMint';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'poolFee';\n          isMut: true;\n          isSigner: false;\n        },\n      ];\n      args: [\n        {\n          name: 'inAmount';\n          type: {\n            option: 'u64';\n          };\n        },\n        {\n          name: 'minimumOutAmount';\n          type: 'u64';\n        },\n        {\n          name: 'platformFeeBps';\n          type: 'u8';\n        },\n      ];\n    },\n    {\n      name: 'stepTokenSwap';\n      accounts: [\n        {\n          name: 'tokenSwapProgram';\n          isMut: false;\n          isSigner: false;\n        },\n        {\n          name: 'tokenProgram';\n          isMut: false;\n          isSigner: false;\n        },\n        {\n          name: 'swap';\n          isMut: false;\n          isSigner: false;\n        },\n        {\n          name: 'authority';\n          isMut: false;\n          isSigner: false;\n        },\n        {\n          name: 'userTransferAuthority';\n          isMut: false;\n          isSigner: true;\n        },\n        {\n          name: 'source';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'swapSource';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'swapDestination';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'destination';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'poolMint';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'poolFee';\n          isMut: true;\n          isSigner: false;\n        },\n      ];\n      args: [\n        {\n          name: 'inAmount';\n          type: {\n            option: 'u64';\n          };\n        },\n        {\n          name: 'minimumOutAmount';\n          type: 'u64';\n        },\n        {\n          name: 'platformFeeBps';\n          type: 'u8';\n        },\n      ];\n    },\n    {\n      name: 'cropperTokenSwap';\n      accounts: [\n        {\n          name: 'tokenSwapProgram';\n          isMut: false;\n          isSigner: false;\n        },\n        {\n          name: 'tokenProgram';\n          isMut: false;\n          isSigner: false;\n        },\n        {\n          name: 'swap';\n          isMut: false;\n          isSigner: false;\n        },\n        {\n          name: 'swapState';\n          isMut: false;\n          isSigner: false;\n        },\n        {\n          name: 'authority';\n          isMut: false;\n          isSigner: false;\n        },\n        {\n          name: 'userTransferAuthority';\n          isMut: false;\n          isSigner: true;\n        },\n        {\n          name: 'source';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'swapSource';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'swapDestination';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'destination';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'poolMint';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'poolFee';\n          isMut: true;\n          isSigner: false;\n        },\n      ];\n      args: [\n        {\n          name: 'inAmount';\n          type: {\n            option: 'u64';\n          };\n        },\n        {\n          name: 'minimumOutAmount';\n          type: 'u64';\n        },\n        {\n          name: 'platformFeeBps';\n          type: 'u8';\n        },\n      ];\n    },\n    {\n      name: 'raydiumSwap';\n      accounts: [\n        {\n          name: 'swapProgram';\n          isMut: false;\n          isSigner: false;\n        },\n        {\n          name: 'tokenProgram';\n          isMut: false;\n          isSigner: false;\n        },\n        {\n          name: 'ammId';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'ammAuthority';\n          isMut: false;\n          isSigner: false;\n        },\n        {\n          name: 'ammOpenOrders';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'ammTargetOrders';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'poolCoinTokenAccount';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'poolPcTokenAccount';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'serumProgramId';\n          isMut: false;\n          isSigner: false;\n        },\n        {\n          name: 'serumMarket';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'serumBids';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'serumAsks';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'serumEventQueue';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'serumCoinVaultAccount';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'serumPcVaultAccount';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'serumVaultSigner';\n          isMut: false;\n          isSigner: false;\n        },\n        {\n          name: 'userSourceTokenAccount';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'userDestinationTokenAccount';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'userSourceOwner';\n          isMut: false;\n          isSigner: true;\n        },\n      ];\n      args: [\n        {\n          name: 'inAmount';\n          type: {\n            option: 'u64';\n          };\n        },\n        {\n          name: 'minimumOutAmount';\n          type: 'u64';\n        },\n        {\n          name: 'platformFeeBps';\n          type: 'u8';\n        },\n      ];\n    },\n    {\n      name: 'raydiumSwapV2';\n      accounts: [\n        {\n          name: 'swapProgram';\n          isMut: false;\n          isSigner: false;\n        },\n        {\n          name: 'tokenProgram';\n          isMut: false;\n          isSigner: false;\n        },\n        {\n          name: 'ammId';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'ammAuthority';\n          isMut: false;\n          isSigner: false;\n        },\n        {\n          name: 'ammOpenOrders';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'poolCoinTokenAccount';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'poolPcTokenAccount';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'serumProgramId';\n          isMut: false;\n          isSigner: false;\n        },\n        {\n          name: 'serumMarket';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'serumBids';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'serumAsks';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'serumEventQueue';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'serumCoinVaultAccount';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'serumPcVaultAccount';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'serumVaultSigner';\n          isMut: false;\n          isSigner: false;\n        },\n        {\n          name: 'userSourceTokenAccount';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'userDestinationTokenAccount';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'userSourceOwner';\n          isMut: false;\n          isSigner: true;\n        },\n      ];\n      args: [\n        {\n          name: 'inAmount';\n          type: {\n            option: 'u64';\n          };\n        },\n        {\n          name: 'minimumOutAmount';\n          type: 'u64';\n        },\n        {\n          name: 'platformFeeBps';\n          type: 'u8';\n        },\n      ];\n    },\n    {\n      name: 'aldrinSwap';\n      accounts: [\n        {\n          name: 'swapProgram';\n          isMut: false;\n          isSigner: false;\n        },\n        {\n          name: 'pool';\n          isMut: false;\n          isSigner: false;\n        },\n        {\n          name: 'poolSigner';\n          isMut: false;\n          isSigner: false;\n        },\n        {\n          name: 'poolMint';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'baseTokenVault';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'quoteTokenVault';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'feePoolTokenAccount';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'walletAuthority';\n          isMut: false;\n          isSigner: true;\n        },\n        {\n          name: 'userBaseTokenAccount';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'userQuoteTokenAccount';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'tokenProgram';\n          isMut: false;\n          isSigner: false;\n        },\n      ];\n      args: [\n        {\n          name: 'inAmount';\n          type: {\n            option: 'u64';\n          };\n        },\n        {\n          name: 'minimumOutAmount';\n          type: 'u64';\n        },\n        {\n          name: 'side';\n          type: {\n            defined: 'Side';\n          };\n        },\n        {\n          name: 'platformFeeBps';\n          type: 'u8';\n        },\n      ];\n    },\n    {\n      name: 'aldrinV2Swap';\n      accounts: [\n        {\n          name: 'swapProgram';\n          isMut: false;\n          isSigner: false;\n        },\n        {\n          name: 'pool';\n          isMut: false;\n          isSigner: false;\n        },\n        {\n          name: 'poolSigner';\n          isMut: false;\n          isSigner: false;\n        },\n        {\n          name: 'poolMint';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'baseTokenVault';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'quoteTokenVault';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'feePoolTokenAccount';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'walletAuthority';\n          isMut: false;\n          isSigner: true;\n        },\n        {\n          name: 'userBaseTokenAccount';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'userQuoteTokenAccount';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'curve';\n          isMut: false;\n          isSigner: false;\n        },\n        {\n          name: 'tokenProgram';\n          isMut: false;\n          isSigner: false;\n        },\n      ];\n      args: [\n        {\n          name: 'inAmount';\n          type: {\n            option: 'u64';\n          };\n        },\n        {\n          name: 'minimumOutAmount';\n          type: 'u64';\n        },\n        {\n          name: 'side';\n          type: {\n            defined: 'Side';\n          };\n        },\n        {\n          name: 'platformFeeBps';\n          type: 'u8';\n        },\n      ];\n    },\n    {\n      name: 'cremaTokenSwap';\n      accounts: [\n        {\n          name: 'swapProgram';\n          isMut: false;\n          isSigner: false;\n        },\n        {\n          name: 'pool';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'poolSigner';\n          isMut: false;\n          isSigner: false;\n        },\n        {\n          name: 'userSourceTokenAccount';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'userDestinationTokenAccount';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'poolSourceTokenAccount';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'poolDestinationTokenAccount';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'poolTicksAccount';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'walletAuthority';\n          isMut: false;\n          isSigner: true;\n        },\n        {\n          name: 'tokenProgram';\n          isMut: false;\n          isSigner: false;\n        },\n      ];\n      args: [\n        {\n          name: 'inAmount';\n          type: {\n            option: 'u64';\n          };\n        },\n        {\n          name: 'minimumOutAmount';\n          type: 'u64';\n        },\n        {\n          name: 'platformFeeBps';\n          type: 'u8';\n        },\n      ];\n    },\n    {\n      name: 'lifinityTokenSwap';\n      accounts: [\n        {\n          name: 'swapProgram';\n          isMut: false;\n          isSigner: false;\n        },\n        {\n          name: 'authority';\n          isMut: false;\n          isSigner: false;\n        },\n        {\n          name: 'amm';\n          isMut: false;\n          isSigner: false;\n        },\n        {\n          name: 'userTransferAuthority';\n          isMut: false;\n          isSigner: true;\n        },\n        {\n          name: 'sourceInfo';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'destinationInfo';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'swapSource';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'swapDestination';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'poolMint';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'feeAccount';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'tokenProgram';\n          isMut: false;\n          isSigner: false;\n        },\n        {\n          name: 'pythAccount';\n          isMut: false;\n          isSigner: false;\n        },\n        {\n          name: 'pythPcAccount';\n          isMut: false;\n          isSigner: false;\n        },\n        {\n          name: 'configAccount';\n          isMut: true;\n          isSigner: false;\n        },\n      ];\n      args: [\n        {\n          name: 'inAmount';\n          type: {\n            option: 'u64';\n          };\n        },\n        {\n          name: 'minimumOutAmount';\n          type: 'u64';\n        },\n        {\n          name: 'platformFeeBps';\n          type: 'u8';\n        },\n      ];\n    },\n    {\n      name: 'cykuraSwap';\n      accounts: [\n        {\n          name: 'swapProgram';\n          isMut: false;\n          isSigner: false;\n        },\n        {\n          name: 'signer';\n          isMut: false;\n          isSigner: true;\n        },\n        {\n          name: 'factoryState';\n          isMut: false;\n          isSigner: false;\n        },\n        {\n          name: 'poolState';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'inputTokenAccount';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'outputTokenAccount';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'inputVault';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'outputVault';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'lastObservationState';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'coreProgram';\n          isMut: false;\n          isSigner: false;\n        },\n        {\n          name: 'tokenProgram';\n          isMut: false;\n          isSigner: false;\n        },\n      ];\n      args: [\n        {\n          name: 'inAmount';\n          type: {\n            option: 'u64';\n          };\n        },\n        {\n          name: 'minimumOutAmount';\n          type: 'u64';\n        },\n        {\n          name: 'platformFeeBps';\n          type: 'u8';\n        },\n      ];\n    },\n    {\n      name: 'whirlpoolSwap';\n      accounts: [\n        {\n          name: 'swapProgram';\n          isMut: false;\n          isSigner: false;\n        },\n        {\n          name: 'tokenProgram';\n          isMut: false;\n          isSigner: false;\n        },\n        {\n          name: 'tokenAuthority';\n          isMut: false;\n          isSigner: true;\n        },\n        {\n          name: 'whirlpool';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'tokenOwnerAccountA';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'tokenVaultA';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'tokenOwnerAccountB';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'tokenVaultB';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'tickArray0';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'tickArray1';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'tickArray2';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'oracle';\n          isMut: false;\n          isSigner: false;\n        },\n      ];\n      args: [\n        {\n          name: 'inAmount';\n          type: {\n            option: 'u64';\n          };\n        },\n        {\n          name: 'minimumOutAmount';\n          type: 'u64';\n        },\n        {\n          name: 'aToB';\n          type: 'bool';\n        },\n        {\n          name: 'platformFeeBps';\n          type: 'u8';\n        },\n      ];\n    },\n    {\n      name: 'riskCheckAndFee';\n      accounts: [\n        {\n          name: 'tokenLedger';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'userDestinationTokenAccount';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'userTransferAuthority';\n          isMut: false;\n          isSigner: true;\n        },\n        {\n          name: 'tokenProgram';\n          isMut: false;\n          isSigner: false;\n        },\n      ];\n      args: [\n        {\n          name: 'minimumOutAmount';\n          type: 'u64';\n        },\n        {\n          name: 'platformFeeBps';\n          type: 'u8';\n        },\n      ];\n    },\n    {\n      name: 'initializeTokenLedger';\n      accounts: [\n        {\n          name: 'tokenLedger';\n          isMut: true;\n          isSigner: true;\n        },\n        {\n          name: 'payer';\n          isMut: true;\n          isSigner: true;\n        },\n        {\n          name: 'systemProgram';\n          isMut: false;\n          isSigner: false;\n        },\n      ];\n      args: [];\n    },\n    {\n      name: 'setTokenLedger';\n      accounts: [\n        {\n          name: 'tokenLedger';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'tokenAccount';\n          isMut: false;\n          isSigner: false;\n        },\n      ];\n      args: [];\n    },\n    {\n      name: 'createOpenOrders';\n      accounts: [\n        {\n          name: 'openOrders';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'payer';\n          isMut: true;\n          isSigner: true;\n        },\n        {\n          name: 'dexProgram';\n          isMut: false;\n          isSigner: false;\n        },\n        {\n          name: 'systemProgram';\n          isMut: false;\n          isSigner: false;\n        },\n        {\n          name: 'rent';\n          isMut: false;\n          isSigner: false;\n        },\n        {\n          name: 'market';\n          isMut: false;\n          isSigner: false;\n        },\n      ];\n      args: [];\n    },\n  ];\n  accounts: [\n    {\n      name: 'tokenLedger';\n      type: {\n        kind: 'struct';\n        fields: [\n          {\n            name: 'tokenAccount';\n            type: 'publicKey';\n          },\n          {\n            name: 'amount';\n            type: 'u64';\n          },\n        ];\n      };\n    },\n  ];\n  types: [\n    {\n      name: 'Swap';\n      type: {\n        kind: 'struct';\n        fields: [\n          {\n            name: 'tokens';\n            type: 'u64';\n          },\n          {\n            name: 'minTokens';\n            type: 'u64';\n          },\n          {\n            name: 'side';\n            type: {\n              defined: 'Side';\n            };\n          },\n        ];\n      };\n    },\n    {\n      name: 'Swap';\n      type: {\n        kind: 'struct';\n        fields: [\n          {\n            name: 'tokens';\n            type: 'u64';\n          },\n          {\n            name: 'minTokens';\n            type: 'u64';\n          },\n          {\n            name: 'side';\n            type: {\n              defined: 'Side';\n            };\n          },\n        ];\n      };\n    },\n    {\n      name: 'Swap';\n      type: {\n        kind: 'struct';\n        fields: [\n          {\n            name: 'amountIn';\n            type: 'u64';\n          },\n          {\n            name: 'minimumAmountOut';\n            type: 'u64';\n          },\n        ];\n      };\n    },\n    {\n      name: 'Swap';\n      type: {\n        kind: 'struct';\n        fields: [\n          {\n            name: 'amount';\n            type: 'u64';\n          },\n          {\n            name: 'otherAmountThreshold';\n            type: 'u64';\n          },\n          {\n            name: 'sqrtPriceLimit';\n            type: 'u128';\n          },\n          {\n            name: 'amountSpecifiedIsInput';\n            type: 'bool';\n          },\n          {\n            name: 'aToB';\n            type: 'bool';\n          },\n        ];\n      };\n    },\n    {\n      name: 'SwapInstrution';\n      type: {\n        kind: 'enum';\n        variants: [\n          {\n            name: 'Swap';\n            fields: [\n              {\n                defined: 'Swap';\n              },\n            ];\n          },\n        ];\n      };\n    },\n    {\n      name: 'Side';\n      type: {\n        kind: 'enum';\n        variants: [\n          {\n            name: 'Bid';\n          },\n          {\n            name: 'Ask';\n          },\n        ];\n      };\n    },\n    {\n      name: 'Direction';\n      type: {\n        kind: 'enum';\n        variants: [\n          {\n            name: 'LeftToRight';\n          },\n          {\n            name: 'RightToLeft';\n          },\n        ];\n      };\n    },\n  ];\n  errors: [\n    {\n      code: 6000;\n      name: 'SlippageToleranceExceeded';\n      msg: 'Slippage tolerance exceeded';\n    },\n    {\n      code: 6001;\n      name: 'InvalidTokenLedger';\n      msg: 'Invalid token ledger';\n    },\n    {\n      code: 6002;\n      name: 'MissingTokenLedger';\n      msg: 'Missing token ledger';\n    },\n    {\n      code: 6003;\n      name: 'MissingMercurialExchangeTokenAccount';\n      msg: 'Missing mercurial exchange token account';\n    },\n    {\n      code: 6004;\n      name: 'LedgerTokenAccountDoesNotMatch';\n      msg: 'Ledger token account does not match';\n    },\n    {\n      code: 6005;\n      name: 'MissingPlatformFeeAccount';\n      msg: 'Missing platform fee account';\n    },\n    {\n      code: 6006;\n      name: 'InvalidCalculation';\n      msg: 'Invalid calculation';\n    },\n  ];\n};\n\nexport const IDL: Jupiter = {\n  version: '0.1.0',\n  name: 'jupiter',\n  instructions: [\n    {\n      name: 'mercurialExchange',\n      accounts: [\n        {\n          name: 'swapProgram',\n          isMut: false,\n          isSigner: false,\n        },\n        {\n          name: 'swapState',\n          isMut: false,\n          isSigner: false,\n        },\n        {\n          name: 'tokenProgram',\n          isMut: false,\n          isSigner: false,\n        },\n        {\n          name: 'poolAuthority',\n          isMut: false,\n          isSigner: false,\n        },\n        {\n          name: 'userTransferAuthority',\n          isMut: false,\n          isSigner: true,\n        },\n        {\n          name: 'sourceTokenAccount',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'destinationTokenAccount',\n          isMut: true,\n          isSigner: false,\n        },\n      ],\n      args: [\n        {\n          name: 'inAmount',\n          type: {\n            option: 'u64',\n          },\n        },\n        {\n          name: 'minimumOutAmount',\n          type: 'u64',\n        },\n        {\n          name: 'platformFeeBps',\n          type: 'u8',\n        },\n      ],\n    },\n    {\n      name: 'saberExchange',\n      accounts: [\n        {\n          name: 'swapProgram',\n          isMut: false,\n          isSigner: false,\n        },\n        {\n          name: 'tokenProgram',\n          isMut: false,\n          isSigner: false,\n        },\n        {\n          name: 'swap',\n          isMut: false,\n          isSigner: false,\n        },\n        {\n          name: 'swapAuthority',\n          isMut: false,\n          isSigner: false,\n        },\n        {\n          name: 'userAuthority',\n          isMut: false,\n          isSigner: false,\n        },\n        {\n          name: 'clock',\n          isMut: false,\n          isSigner: false,\n        },\n        {\n          name: 'inputUserAccount',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'inputTokenAccount',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'outputUserAccount',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'outputTokenAccount',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'feesTokenAccount',\n          isMut: true,\n          isSigner: false,\n        },\n      ],\n      args: [\n        {\n          name: 'inAmount',\n          type: {\n            option: 'u64',\n          },\n        },\n        {\n          name: 'minimumOutAmount',\n          type: 'u64',\n        },\n        {\n          name: 'platformFeeBps',\n          type: 'u8',\n        },\n      ],\n    },\n    {\n      name: 'saberSwap',\n      accounts: [\n        {\n          name: 'swapProgram',\n          isMut: false,\n          isSigner: false,\n        },\n        {\n          name: 'tokenProgram',\n          isMut: false,\n          isSigner: false,\n        },\n        {\n          name: 'swap',\n          isMut: false,\n          isSigner: false,\n        },\n        {\n          name: 'swapAuthority',\n          isMut: false,\n          isSigner: false,\n        },\n        {\n          name: 'userAuthority',\n          isMut: false,\n          isSigner: false,\n        },\n        {\n          name: 'inputUserAccount',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'inputTokenAccount',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'outputUserAccount',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'outputTokenAccount',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'feesTokenAccount',\n          isMut: true,\n          isSigner: false,\n        },\n      ],\n      args: [\n        {\n          name: 'inAmount',\n          type: {\n            option: 'u64',\n          },\n        },\n        {\n          name: 'minimumOutAmount',\n          type: 'u64',\n        },\n        {\n          name: 'platformFeeBps',\n          type: 'u8',\n        },\n      ],\n    },\n    {\n      name: 'saberAddDecimalsDeposit',\n      accounts: [\n        {\n          name: 'addDecimalsProgram',\n          isMut: false,\n          isSigner: false,\n        },\n        {\n          name: 'wrapper',\n          isMut: false,\n          isSigner: false,\n        },\n        {\n          name: 'wrapperMint',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'wrapperUnderlyingTokens',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'owner',\n          isMut: false,\n          isSigner: true,\n        },\n        {\n          name: 'userUnderlyingTokens',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'userWrappedTokens',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'tokenProgram',\n          isMut: false,\n          isSigner: false,\n        },\n      ],\n      args: [\n        {\n          name: 'inAmount',\n          type: {\n            option: 'u64',\n          },\n        },\n        {\n          name: 'minimumOutAmount',\n          type: 'u64',\n        },\n        {\n          name: 'platformFeeBps',\n          type: 'u8',\n        },\n      ],\n    },\n    {\n      name: 'saberAddDecimalsWithdraw',\n      accounts: [\n        {\n          name: 'addDecimalsProgram',\n          isMut: false,\n          isSigner: false,\n        },\n        {\n          name: 'wrapper',\n          isMut: false,\n          isSigner: false,\n        },\n        {\n          name: 'wrapperMint',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'wrapperUnderlyingTokens',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'owner',\n          isMut: false,\n          isSigner: true,\n        },\n        {\n          name: 'userUnderlyingTokens',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'userWrappedTokens',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'tokenProgram',\n          isMut: false,\n          isSigner: false,\n        },\n      ],\n      args: [\n        {\n          name: 'inAmount',\n          type: {\n            option: 'u64',\n          },\n        },\n        {\n          name: 'minimumOutAmount',\n          type: 'u64',\n        },\n        {\n          name: 'platformFeeBps',\n          type: 'u8',\n        },\n      ],\n    },\n    {\n      name: 'senchaExchange',\n      accounts: [\n        {\n          name: 'swapProgram',\n          isMut: false,\n          isSigner: false,\n        },\n        {\n          name: 'tokenProgram',\n          isMut: false,\n          isSigner: false,\n        },\n        {\n          name: 'swap',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'userAuthority',\n          isMut: false,\n          isSigner: false,\n        },\n        {\n          name: 'inputUserAccount',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'inputTokenAccount',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'inputFeesAccount',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'outputUserAccount',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'outputTokenAccount',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'outputFeesAccount',\n          isMut: true,\n          isSigner: false,\n        },\n      ],\n      args: [\n        {\n          name: 'inAmount',\n          type: {\n            option: 'u64',\n          },\n        },\n        {\n          name: 'minimumOutAmount',\n          type: 'u64',\n        },\n        {\n          name: 'platformFeeBps',\n          type: 'u8',\n        },\n      ],\n    },\n    {\n      name: 'serumSwap',\n      accounts: [\n        {\n          name: 'market',\n          accounts: [\n            {\n              name: 'market',\n              isMut: true,\n              isSigner: false,\n            },\n            {\n              name: 'openOrders',\n              isMut: true,\n              isSigner: false,\n            },\n            {\n              name: 'requestQueue',\n              isMut: true,\n              isSigner: false,\n            },\n            {\n              name: 'eventQueue',\n              isMut: true,\n              isSigner: false,\n            },\n            {\n              name: 'bids',\n              isMut: true,\n              isSigner: false,\n            },\n            {\n              name: 'asks',\n              isMut: true,\n              isSigner: false,\n            },\n            {\n              name: 'coinVault',\n              isMut: true,\n              isSigner: false,\n            },\n            {\n              name: 'pcVault',\n              isMut: true,\n              isSigner: false,\n            },\n            {\n              name: 'vaultSigner',\n              isMut: false,\n              isSigner: false,\n            },\n          ],\n        },\n        {\n          name: 'authority',\n          isMut: false,\n          isSigner: true,\n        },\n        {\n          name: 'orderPayerTokenAccount',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'coinWallet',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'pcWallet',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'dexProgram',\n          isMut: false,\n          isSigner: false,\n        },\n        {\n          name: 'tokenProgram',\n          isMut: false,\n          isSigner: false,\n        },\n        {\n          name: 'rent',\n          isMut: false,\n          isSigner: false,\n        },\n      ],\n      args: [\n        {\n          name: 'side',\n          type: {\n            defined: 'Side',\n          },\n        },\n        {\n          name: 'inAmount',\n          type: {\n            option: 'u64',\n          },\n        },\n        {\n          name: 'minimumOutAmount',\n          type: 'u64',\n        },\n        {\n          name: 'platformFeeBps',\n          type: 'u8',\n        },\n      ],\n    },\n    {\n      name: 'tokenSwap',\n      accounts: [\n        {\n          name: 'tokenSwapProgram',\n          isMut: false,\n          isSigner: false,\n        },\n        {\n          name: 'tokenProgram',\n          isMut: false,\n          isSigner: false,\n        },\n        {\n          name: 'swap',\n          isMut: false,\n          isSigner: false,\n        },\n        {\n          name: 'authority',\n          isMut: false,\n          isSigner: false,\n        },\n        {\n          name: 'userTransferAuthority',\n          isMut: false,\n          isSigner: true,\n        },\n        {\n          name: 'source',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'swapSource',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'swapDestination',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'destination',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'poolMint',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'poolFee',\n          isMut: true,\n          isSigner: false,\n        },\n      ],\n      args: [\n        {\n          name: 'inAmount',\n          type: {\n            option: 'u64',\n          },\n        },\n        {\n          name: 'minimumOutAmount',\n          type: 'u64',\n        },\n        {\n          name: 'platformFeeBps',\n          type: 'u8',\n        },\n      ],\n    },\n    {\n      name: 'stepTokenSwap',\n      accounts: [\n        {\n          name: 'tokenSwapProgram',\n          isMut: false,\n          isSigner: false,\n        },\n        {\n          name: 'tokenProgram',\n          isMut: false,\n          isSigner: false,\n        },\n        {\n          name: 'swap',\n          isMut: false,\n          isSigner: false,\n        },\n        {\n          name: 'authority',\n          isMut: false,\n          isSigner: false,\n        },\n        {\n          name: 'userTransferAuthority',\n          isMut: false,\n          isSigner: true,\n        },\n        {\n          name: 'source',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'swapSource',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'swapDestination',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'destination',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'poolMint',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'poolFee',\n          isMut: true,\n          isSigner: false,\n        },\n      ],\n      args: [\n        {\n          name: 'inAmount',\n          type: {\n            option: 'u64',\n          },\n        },\n        {\n          name: 'minimumOutAmount',\n          type: 'u64',\n        },\n        {\n          name: 'platformFeeBps',\n          type: 'u8',\n        },\n      ],\n    },\n    {\n      name: 'cropperTokenSwap',\n      accounts: [\n        {\n          name: 'tokenSwapProgram',\n          isMut: false,\n          isSigner: false,\n        },\n        {\n          name: 'tokenProgram',\n          isMut: false,\n          isSigner: false,\n        },\n        {\n          name: 'swap',\n          isMut: false,\n          isSigner: false,\n        },\n        {\n          name: 'swapState',\n          isMut: false,\n          isSigner: false,\n        },\n        {\n          name: 'authority',\n          isMut: false,\n          isSigner: false,\n        },\n        {\n          name: 'userTransferAuthority',\n          isMut: false,\n          isSigner: true,\n        },\n        {\n          name: 'source',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'swapSource',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'swapDestination',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'destination',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'poolMint',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'poolFee',\n          isMut: true,\n          isSigner: false,\n        },\n      ],\n      args: [\n        {\n          name: 'inAmount',\n          type: {\n            option: 'u64',\n          },\n        },\n        {\n          name: 'minimumOutAmount',\n          type: 'u64',\n        },\n        {\n          name: 'platformFeeBps',\n          type: 'u8',\n        },\n      ],\n    },\n    {\n      name: 'raydiumSwap',\n      accounts: [\n        {\n          name: 'swapProgram',\n          isMut: false,\n          isSigner: false,\n        },\n        {\n          name: 'tokenProgram',\n          isMut: false,\n          isSigner: false,\n        },\n        {\n          name: 'ammId',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'ammAuthority',\n          isMut: false,\n          isSigner: false,\n        },\n        {\n          name: 'ammOpenOrders',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'ammTargetOrders',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'poolCoinTokenAccount',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'poolPcTokenAccount',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'serumProgramId',\n          isMut: false,\n          isSigner: false,\n        },\n        {\n          name: 'serumMarket',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'serumBids',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'serumAsks',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'serumEventQueue',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'serumCoinVaultAccount',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'serumPcVaultAccount',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'serumVaultSigner',\n          isMut: false,\n          isSigner: false,\n        },\n        {\n          name: 'userSourceTokenAccount',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'userDestinationTokenAccount',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'userSourceOwner',\n          isMut: false,\n          isSigner: true,\n        },\n      ],\n      args: [\n        {\n          name: 'inAmount',\n          type: {\n            option: 'u64',\n          },\n        },\n        {\n          name: 'minimumOutAmount',\n          type: 'u64',\n        },\n        {\n          name: 'platformFeeBps',\n          type: 'u8',\n        },\n      ],\n    },\n    {\n      name: 'raydiumSwapV2',\n      accounts: [\n        {\n          name: 'swapProgram',\n          isMut: false,\n          isSigner: false,\n        },\n        {\n          name: 'tokenProgram',\n          isMut: false,\n          isSigner: false,\n        },\n        {\n          name: 'ammId',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'ammAuthority',\n          isMut: false,\n          isSigner: false,\n        },\n        {\n          name: 'ammOpenOrders',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'poolCoinTokenAccount',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'poolPcTokenAccount',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'serumProgramId',\n          isMut: false,\n          isSigner: false,\n        },\n        {\n          name: 'serumMarket',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'serumBids',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'serumAsks',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'serumEventQueue',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'serumCoinVaultAccount',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'serumPcVaultAccount',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'serumVaultSigner',\n          isMut: false,\n          isSigner: false,\n        },\n        {\n          name: 'userSourceTokenAccount',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'userDestinationTokenAccount',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'userSourceOwner',\n          isMut: false,\n          isSigner: true,\n        },\n      ],\n      args: [\n        {\n          name: 'inAmount',\n          type: {\n            option: 'u64',\n          },\n        },\n        {\n          name: 'minimumOutAmount',\n          type: 'u64',\n        },\n        {\n          name: 'platformFeeBps',\n          type: 'u8',\n        },\n      ],\n    },\n    {\n      name: 'aldrinSwap',\n      accounts: [\n        {\n          name: 'swapProgram',\n          isMut: false,\n          isSigner: false,\n        },\n        {\n          name: 'pool',\n          isMut: false,\n          isSigner: false,\n        },\n        {\n          name: 'poolSigner',\n          isMut: false,\n          isSigner: false,\n        },\n        {\n          name: 'poolMint',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'baseTokenVault',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'quoteTokenVault',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'feePoolTokenAccount',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'walletAuthority',\n          isMut: false,\n          isSigner: true,\n        },\n        {\n          name: 'userBaseTokenAccount',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'userQuoteTokenAccount',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'tokenProgram',\n          isMut: false,\n          isSigner: false,\n        },\n      ],\n      args: [\n        {\n          name: 'inAmount',\n          type: {\n            option: 'u64',\n          },\n        },\n        {\n          name: 'minimumOutAmount',\n          type: 'u64',\n        },\n        {\n          name: 'side',\n          type: {\n            defined: 'Side',\n          },\n        },\n        {\n          name: 'platformFeeBps',\n          type: 'u8',\n        },\n      ],\n    },\n    {\n      name: 'aldrinV2Swap',\n      accounts: [\n        {\n          name: 'swapProgram',\n          isMut: false,\n          isSigner: false,\n        },\n        {\n          name: 'pool',\n          isMut: false,\n          isSigner: false,\n        },\n        {\n          name: 'poolSigner',\n          isMut: false,\n          isSigner: false,\n        },\n        {\n          name: 'poolMint',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'baseTokenVault',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'quoteTokenVault',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'feePoolTokenAccount',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'walletAuthority',\n          isMut: false,\n          isSigner: true,\n        },\n        {\n          name: 'userBaseTokenAccount',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'userQuoteTokenAccount',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'curve',\n          isMut: false,\n          isSigner: false,\n        },\n        {\n          name: 'tokenProgram',\n          isMut: false,\n          isSigner: false,\n        },\n      ],\n      args: [\n        {\n          name: 'inAmount',\n          type: {\n            option: 'u64',\n          },\n        },\n        {\n          name: 'minimumOutAmount',\n          type: 'u64',\n        },\n        {\n          name: 'side',\n          type: {\n            defined: 'Side',\n          },\n        },\n        {\n          name: 'platformFeeBps',\n          type: 'u8',\n        },\n      ],\n    },\n    {\n      name: 'cremaTokenSwap',\n      accounts: [\n        {\n          name: 'swapProgram',\n          isMut: false,\n          isSigner: false,\n        },\n        {\n          name: 'pool',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'poolSigner',\n          isMut: false,\n          isSigner: false,\n        },\n        {\n          name: 'userSourceTokenAccount',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'userDestinationTokenAccount',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'poolSourceTokenAccount',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'poolDestinationTokenAccount',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'poolTicksAccount',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'walletAuthority',\n          isMut: false,\n          isSigner: true,\n        },\n        {\n          name: 'tokenProgram',\n          isMut: false,\n          isSigner: false,\n        },\n      ],\n      args: [\n        {\n          name: 'inAmount',\n          type: {\n            option: 'u64',\n          },\n        },\n        {\n          name: 'minimumOutAmount',\n          type: 'u64',\n        },\n        {\n          name: 'platformFeeBps',\n          type: 'u8',\n        },\n      ],\n    },\n    {\n      name: 'lifinityTokenSwap',\n      accounts: [\n        {\n          name: 'swapProgram',\n          isMut: false,\n          isSigner: false,\n        },\n        {\n          name: 'authority',\n          isMut: false,\n          isSigner: false,\n        },\n        {\n          name: 'amm',\n          isMut: false,\n          isSigner: false,\n        },\n        {\n          name: 'userTransferAuthority',\n          isMut: false,\n          isSigner: true,\n        },\n        {\n          name: 'sourceInfo',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'destinationInfo',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'swapSource',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'swapDestination',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'poolMint',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'feeAccount',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'tokenProgram',\n          isMut: false,\n          isSigner: false,\n        },\n        {\n          name: 'pythAccount',\n          isMut: false,\n          isSigner: false,\n        },\n        {\n          name: 'pythPcAccount',\n          isMut: false,\n          isSigner: false,\n        },\n        {\n          name: 'configAccount',\n          isMut: true,\n          isSigner: false,\n        },\n      ],\n      args: [\n        {\n          name: 'inAmount',\n          type: {\n            option: 'u64',\n          },\n        },\n        {\n          name: 'minimumOutAmount',\n          type: 'u64',\n        },\n        {\n          name: 'platformFeeBps',\n          type: 'u8',\n        },\n      ],\n    },\n    {\n      name: 'cykuraSwap',\n      accounts: [\n        {\n          name: 'swapProgram',\n          isMut: false,\n          isSigner: false,\n        },\n        {\n          name: 'signer',\n          isMut: false,\n          isSigner: true,\n        },\n        {\n          name: 'factoryState',\n          isMut: false,\n          isSigner: false,\n        },\n        {\n          name: 'poolState',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'inputTokenAccount',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'outputTokenAccount',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'inputVault',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'outputVault',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'lastObservationState',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'coreProgram',\n          isMut: false,\n          isSigner: false,\n        },\n        {\n          name: 'tokenProgram',\n          isMut: false,\n          isSigner: false,\n        },\n      ],\n      args: [\n        {\n          name: 'inAmount',\n          type: {\n            option: 'u64',\n          },\n        },\n        {\n          name: 'minimumOutAmount',\n          type: 'u64',\n        },\n        {\n          name: 'platformFeeBps',\n          type: 'u8',\n        },\n      ],\n    },\n    {\n      name: 'whirlpoolSwap',\n      accounts: [\n        {\n          name: 'swapProgram',\n          isMut: false,\n          isSigner: false,\n        },\n        {\n          name: 'tokenProgram',\n          isMut: false,\n          isSigner: false,\n        },\n        {\n          name: 'tokenAuthority',\n          isMut: false,\n          isSigner: true,\n        },\n        {\n          name: 'whirlpool',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'tokenOwnerAccountA',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'tokenVaultA',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'tokenOwnerAccountB',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'tokenVaultB',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'tickArray0',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'tickArray1',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'tickArray2',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'oracle',\n          isMut: false,\n          isSigner: false,\n        },\n      ],\n      args: [\n        {\n          name: 'inAmount',\n          type: {\n            option: 'u64',\n          },\n        },\n        {\n          name: 'minimumOutAmount',\n          type: 'u64',\n        },\n        {\n          name: 'aToB',\n          type: 'bool',\n        },\n        {\n          name: 'platformFeeBps',\n          type: 'u8',\n        },\n      ],\n    },\n    {\n      name: 'riskCheckAndFee',\n      accounts: [\n        {\n          name: 'tokenLedger',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'userDestinationTokenAccount',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'userTransferAuthority',\n          isMut: false,\n          isSigner: true,\n        },\n        {\n          name: 'tokenProgram',\n          isMut: false,\n          isSigner: false,\n        },\n      ],\n      args: [\n        {\n          name: 'minimumOutAmount',\n          type: 'u64',\n        },\n        {\n          name: 'platformFeeBps',\n          type: 'u8',\n        },\n      ],\n    },\n    {\n      name: 'initializeTokenLedger',\n      accounts: [\n        {\n          name: 'tokenLedger',\n          isMut: true,\n          isSigner: true,\n        },\n        {\n          name: 'payer',\n          isMut: true,\n          isSigner: true,\n        },\n        {\n          name: 'systemProgram',\n          isMut: false,\n          isSigner: false,\n        },\n      ],\n      args: [],\n    },\n    {\n      name: 'setTokenLedger',\n      accounts: [\n        {\n          name: 'tokenLedger',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'tokenAccount',\n          isMut: false,\n          isSigner: false,\n        },\n      ],\n      args: [],\n    },\n    {\n      name: 'createOpenOrders',\n      accounts: [\n        {\n          name: 'openOrders',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'payer',\n          isMut: true,\n          isSigner: true,\n        },\n        {\n          name: 'dexProgram',\n          isMut: false,\n          isSigner: false,\n        },\n        {\n          name: 'systemProgram',\n          isMut: false,\n          isSigner: false,\n        },\n        {\n          name: 'rent',\n          isMut: false,\n          isSigner: false,\n        },\n        {\n          name: 'market',\n          isMut: false,\n          isSigner: false,\n        },\n      ],\n      args: [],\n    },\n  ],\n  accounts: [\n    {\n      name: 'tokenLedger',\n      type: {\n        kind: 'struct',\n        fields: [\n          {\n            name: 'tokenAccount',\n            type: 'publicKey',\n          },\n          {\n            name: 'amount',\n            type: 'u64',\n          },\n        ],\n      },\n    },\n  ],\n  types: [\n    {\n      name: 'Swap',\n      type: {\n        kind: 'struct',\n        fields: [\n          {\n            name: 'tokens',\n            type: 'u64',\n          },\n          {\n            name: 'minTokens',\n            type: 'u64',\n          },\n          {\n            name: 'side',\n            type: {\n              defined: 'Side',\n            },\n          },\n        ],\n      },\n    },\n    {\n      name: 'Swap',\n      type: {\n        kind: 'struct',\n        fields: [\n          {\n            name: 'tokens',\n            type: 'u64',\n          },\n          {\n            name: 'minTokens',\n            type: 'u64',\n          },\n          {\n            name: 'side',\n            type: {\n              defined: 'Side',\n            },\n          },\n        ],\n      },\n    },\n    {\n      name: 'Swap',\n      type: {\n        kind: 'struct',\n        fields: [\n          {\n            name: 'amountIn',\n            type: 'u64',\n          },\n          {\n            name: 'minimumAmountOut',\n            type: 'u64',\n          },\n        ],\n      },\n    },\n    {\n      name: 'Swap',\n      type: {\n        kind: 'struct',\n        fields: [\n          {\n            name: 'amount',\n            type: 'u64',\n          },\n          {\n            name: 'otherAmountThreshold',\n            type: 'u64',\n          },\n          {\n            name: 'sqrtPriceLimit',\n            type: 'u128',\n          },\n          {\n            name: 'amountSpecifiedIsInput',\n            type: 'bool',\n          },\n          {\n            name: 'aToB',\n            type: 'bool',\n          },\n        ],\n      },\n    },\n    {\n      name: 'SwapInstrution',\n      type: {\n        kind: 'enum',\n        variants: [\n          {\n            name: 'Swap',\n            fields: [\n              {\n                defined: 'Swap',\n              },\n            ],\n          },\n        ],\n      },\n    },\n    {\n      name: 'Side',\n      type: {\n        kind: 'enum',\n        variants: [\n          {\n            name: 'Bid',\n          },\n          {\n            name: 'Ask',\n          },\n        ],\n      },\n    },\n    {\n      name: 'Direction',\n      type: {\n        kind: 'enum',\n        variants: [\n          {\n            name: 'LeftToRight',\n          },\n          {\n            name: 'RightToLeft',\n          },\n        ],\n      },\n    },\n  ],\n  errors: [\n    {\n      code: 6000,\n      name: 'SlippageToleranceExceeded',\n      msg: 'Slippage tolerance exceeded',\n    },\n    {\n      code: 6001,\n      name: 'InvalidTokenLedger',\n      msg: 'Invalid token ledger',\n    },\n    {\n      code: 6002,\n      name: 'MissingTokenLedger',\n      msg: 'Missing token ledger',\n    },\n    {\n      code: 6003,\n      name: 'MissingMercurialExchangeTokenAccount',\n      msg: 'Missing mercurial exchange token account',\n    },\n    {\n      code: 6004,\n      name: 'LedgerTokenAccountDoesNotMatch',\n      msg: 'Ledger token account does not match',\n    },\n    {\n      code: 6005,\n      name: 'MissingPlatformFeeAccount',\n      msg: 'Missing platform fee account',\n    },\n    {\n      code: 6006,\n      name: 'InvalidCalculation',\n      msg: 'Invalid calculation',\n    },\n  ],\n};\n","import { Cluster, PublicKey } from '@solana/web3.js';\nimport { IDL } from './lib/idl/jupiter';\n\nexport const WRAPPED_SOL_MINT = new PublicKey('So11111111111111111111111111111111111111112');\n\nexport const MAINNET_SERUM_DEX_PROGRAM = new PublicKey('9xQeWvG816bUx9EPjHmaT23yvVM2ZWbrrpZb9PusVFin');\n\nexport const DEVNET_SERUM_DEX_PROGRAM = new PublicKey('DESVgJVGajEgKGXhb6XmqDHGz3VjdgP7rEVESBgxmroY');\n\nexport const MARKETS_URL: Record<Cluster, string> = {\n  devnet: 'https://api.jup.ag/api/markets/cache/devnet',\n  'mainnet-beta': 'https://cache.jup.ag/markets?v=3',\n  testnet: 'https://api.jup.ag/api/markets/cache/devnet',\n};\n\nexport const TOKEN_LIST_URL: Record<Cluster, string> = {\n  devnet: 'https://api.jup.ag/api/tokens/devnet',\n  testnet: 'https://api.jup.ag/api/markets/devnet',\n  'mainnet-beta': 'https://cache.jup.ag/tokens',\n};\n\nexport const LAMPORTS_PER_SIGNATURE = 5000;\n\nexport const RAYDIUM_AMM_V4_PROGRAM_ID = new PublicKey('675kPX9MHTjS2zt1qfr1NYHuzeLXfQM9H24wFSUt1Mp8');\n\nexport const ALDRIN_SWAP_PROGRAM_ID = new PublicKey('AMM55ShdkoGRB5jVYPjWziwk8m5MpwyDgsMWHaMSQWH6');\n\n// https://github.com/aldrin-exchange/aldrin-sdk/blob/f93fe3f2d847d79d8ddff507d8d4f62fd803421b/src/v2.json\nexport const ALDRIN_SWAP_V2_PROGRAM_ID = new PublicKey('CURVGoZn8zycx6FXwwevgBTB2gVvdbGTEpvMJDbgs2t4');\n\nexport const SABER_ADD_DECIMALS_PROGRAM_ID = new PublicKey('DecZY86MU5Gj7kppfUCEmd4LbXXuyZH1yHaP2NTqdiZB');\n\nexport const CROPPER_PROGRAM_ID = new PublicKey('CTMAxxk34HjKWxQ3QLZK1HpaLXmBveao3ESePXbiyfzh');\n\nexport const SENCHA_PROGRAM_ID = new PublicKey('SCHAtsf8mbjyjiv4LkhLKutTf6JnZAbdJKFkXQNMFHZ');\n\nexport const LIFINITY_PROGRAM_ID = new PublicKey('EewxydAPCCVuNEyrVN68PuSYdQ7wKn27V9Gjeoi8dy3S');\n\nexport const CREMA_PROGRAM_ID = new PublicKey('6MLxLqiXaaSUpkgMnWDTuejNZEz3kE7k2woyHGVFw319');\n\nexport const JUPITER_WALLET = new PublicKey('BUX7s2ef2htTGb2KKoPHWkmzxPj4nTWMWRgs5CSbQxf9');\n\nexport const MERCURIAL_SWAP_PROGRAM_ID = new PublicKey('MERLuDFBMmsHnsBPZw2sDQZHvXFMwp8EdjudcU2HKky');\n\nexport const WHIRLPOOL_PROGRAM_ID = new PublicKey('whirLbMiicVdio4qvUfM5KAg6Ct8VwpYzGff3uctyCc');\n\nexport const CYKURA_PROGRAM_ID = new PublicKey('cysPXAjehMpVKUapzbMCCnpFxUFFryEWEaLgnb9NrR8');\n\nexport const CYKURA_FACTORY_STATE_ADDRESS = new PublicKey('DBsMwKfeoUHhxMi9x6wd2AsT12UwUCssjNbUzu1aKgqj');\n\n/** Tokens which are fundamental pivot in certain protocols */\nexport const SWAP_PROTOCOL_TOKENS = [\n  'StepAscQoEioFxxWGnh2sLBDFp9d8rvKz2Yp39iDpyT', // STEP\n  'DubwWZNWiNGMMeeQHPnMATNj77YZPZSAz2WVR5WjLJqz', // CRP\n];\n\ninterface ErrorDetails {\n  code: number;\n  name: string;\n  msg: string;\n}\n\ntype JUPITER_ERROR_TYPES =\n  | 'TransactionNotConfirmed'\n  | 'BalancesNotExtractedProperly'\n  | typeof IDL.errors[number]['name'];\n\nexport const JUPITER_ERRORS: Record<JUPITER_ERROR_TYPES, ErrorDetails> = Object.freeze({\n  TransactionNotConfirmed: {\n    code: 7000, // a code that is not in the list of errors\n    name: 'TransactionNotConfirmed',\n    msg: 'Transaction was not confirmed',\n  },\n  BalancesNotExtractedProperly: {\n    code: 7001, // a code that is not in the list of errors\n    name: 'BalancesNotExtractedProperly',\n    msg: 'Balances cannot be extracted properly',\n  },\n  ...IDL.errors.reduce((accErrors, error) => {\n    return { ...accErrors, [error.name]: error };\n  }, {} as Record<typeof IDL.errors[number]['name'], ErrorDetails>),\n});\n\nexport const IS_DEV = process.env.NODE_ENV === 'development';\n","import { blob, Layout, Structure, u8, union } from '@solana/buffer-layout';\nimport { u64 } from '@solana/spl-token';\nimport { PublicKey } from '@solana/web3.js';\n\nclass PublicKeyLayout extends Layout<PublicKey> {\n  private layout: Layout<any>;\n\n  constructor(property?: string) {\n    const layout = blob(32);\n    super(layout.span, property);\n    this.layout = layout;\n  }\n\n  getSpan(b: Uint8Array, offset?: number) {\n    return this.layout.getSpan(b, offset);\n  }\n\n  decode(b: Uint8Array, offset?: number): PublicKey {\n    return new PublicKey(this.layout.decode(b, offset));\n  }\n\n  encode(src: PublicKey, b: Uint8Array, offset: number): number {\n    return this.layout.encode(src.toBuffer(), b, offset);\n  }\n}\n\n/**\n * Layout for a public key\n */\nexport const publicKey = (property: string) => new PublicKeyLayout(property);\n\nclass U64Layout extends Layout<u64> {\n  private layout: Layout<any>;\n\n  constructor(span = 8, property: string) {\n    const layout = blob(span);\n    super(layout.span, property);\n    this.layout = layout;\n  }\n\n  getSpan(b: Uint8Array, offset?: number) {\n    return this.layout.getSpan(b, offset);\n  }\n\n  decode(b: Uint8Array, offset?: number): u64 {\n    const bn = new u64(this.layout.decode(b, offset), 10, 'le');\n\n    return bn;\n  }\n\n  encode(src: u64, b: Uint8Array, offset: number): number {\n    return this.layout.encode(src.toArrayLike(Buffer, 'le', this.layout.span), b, offset);\n  }\n}\n\n/**\n * Layout for a 64bit unsigned value\n */\nexport const uint64 = (property: string) => new U64Layout(8, property);\n\nexport const uint128 = (property: string) => new U64Layout(16, property);\n\nexport const rustEnum = (variants: Structure<any>[], property: string) => {\n  // @ts-expect-error TODO: fix this\n  const unionLayout = union(u8(), u8(), property);\n  variants.forEach((variant, index) => unionLayout.addVariant(index, variant, variant.property || ''));\n  return unionLayout;\n};\n","import { findProgramAddressSync } from '@project-serum/anchor/dist/cjs/utils/pubkey';\nimport { blob, struct, u8 } from '@solana/buffer-layout';\nimport { u64 } from '@solana/spl-token';\nimport { AccountInfo, PublicKey } from '@solana/web3.js';\nimport { publicKey, uint64 } from '../../utils/layout';\n\ninterface CropperTokenSwapLayout {\n  version: number;\n  isInitialized: number;\n  nonce: number;\n  ammId: PublicKey;\n  serumProgramId: PublicKey;\n  serumMarket: PublicKey;\n  tokenProgramId: PublicKey;\n  tokenAAccount: PublicKey;\n  tokenBAccount: PublicKey;\n  poolMint: PublicKey;\n  mintA: PublicKey;\n  mintB: PublicKey;\n}\n\nexport const CropperTokenSwapLayout = struct<CropperTokenSwapLayout>([\n  u8('version'),\n  u8('isInitialized'),\n  u8('nonce'),\n  publicKey('ammId'),\n  publicKey('serumProgramId'),\n  publicKey('serumMarket'),\n  publicKey('tokenProgramId'),\n  publicKey('tokenAAccount'),\n  publicKey('tokenBAccount'),\n  publicKey('poolMint'),\n  publicKey('mintA'),\n  publicKey('mintB'),\n]);\n\ninterface CropperStateLayout {\n  isInitialized: number;\n  stateOwner: PublicKey;\n  feeOwner: PublicKey;\n  initialSupply: u64;\n  returnFeeNumerator: u64;\n  fixedFeeNumerator: u64;\n  feeDenominator: u64;\n  curveType: number;\n  curveParameters: Uint8Array;\n}\n\nconst CropperStateLayout = struct<CropperStateLayout>([\n  u8('isInitialized'),\n  publicKey('stateOwner'),\n  publicKey('feeOwner'),\n  uint64('initialSupply'),\n  uint64('returnFeeNumerator'),\n  uint64('fixedFeeNumerator'),\n  uint64('feeDenominator'),\n  u8('curveType'),\n  blob(32, 'curveParameters'),\n]);\n\nexport interface CropperState {\n  isInitialized: boolean;\n  stateOwner: PublicKey;\n  feeOwner: PublicKey;\n  initialSupply: u64;\n  returnFeeNumerator: number;\n  fixedFeeNumerator: number;\n  feeDenominator: number;\n  curveType: number;\n  curveParameters: Uint8Array;\n}\n\nexport interface CropperPoolState {\n  programId: PublicKey;\n  authority: PublicKey;\n  version: number;\n  isInitialized: boolean;\n  nonce: number;\n  ammId: PublicKey;\n  serumProgramId: PublicKey;\n  serumMarket: PublicKey;\n  tokenProgramId: PublicKey;\n  tokenAAccount: PublicKey;\n  tokenBAccount: PublicKey;\n  poolMint: PublicKey;\n  mintA: PublicKey;\n  mintB: PublicKey;\n}\n\n// This seems to be hardcoded.\nexport const CROPPER_STATE_ADDRESS = new PublicKey('3hsU1VgsBgBgz5jWiqdw9RfGU6TpWdCmdah1oi4kF3Tq');\n\nexport const accountInfoToCropperPoolState = (\n  address: PublicKey,\n  accountInfo: AccountInfo<Buffer>,\n): CropperPoolState => {\n  const programId = accountInfo.owner;\n\n  const decoded = CropperTokenSwapLayout.decode(accountInfo.data);\n  const [authority] = findProgramAddressSync([address.toBuffer()], programId);\n\n  return {\n    programId,\n    authority,\n    version: decoded.version,\n    isInitialized: Boolean(decoded.isInitialized),\n    nonce: decoded.nonce,\n    ammId: decoded.ammId,\n    serumProgramId: decoded.serumProgramId,\n    tokenProgramId: decoded.tokenProgramId,\n    tokenAAccount: decoded.tokenAAccount,\n    tokenBAccount: decoded.tokenBAccount,\n    serumMarket: decoded.serumMarket,\n    poolMint: decoded.poolMint,\n    mintA: decoded.mintA,\n    mintB: decoded.mintB,\n  };\n};\n\nexport const stateAccountInfoToCropperState = (accountInfo: AccountInfo<Buffer>): CropperState => {\n  const decoded = CropperStateLayout.decode(accountInfo.data);\n\n  return {\n    isInitialized: Boolean(decoded.isInitialized),\n    stateOwner: decoded.stateOwner,\n    feeOwner: decoded.feeOwner,\n    initialSupply: decoded.initialSupply,\n    returnFeeNumerator: decoded.returnFeeNumerator.toNumber(),\n    fixedFeeNumerator: decoded.fixedFeeNumerator.toNumber(),\n    feeDenominator: decoded.feeDenominator.toNumber(),\n    curveType: decoded.curveType,\n    curveParameters: decoded.curveParameters,\n  };\n};\n","import type { Provider } from '@project-serum/anchor';\nimport { Program } from '@project-serum/anchor';\nimport { createProgramAddressSync, findProgramAddressSync } from '@project-serum/anchor/dist/cjs/utils/pubkey';\nimport { Market } from '@project-serum/serum';\nimport { TOKEN_PROGRAM_ID } from '@solana/spl-token';\nimport { AccountMeta, PublicKey, SystemProgram, SYSVAR_RENT_PUBKEY, TransactionInstruction } from '@solana/web3.js';\nimport { BN } from 'bn.js';\nimport { Jupiter as JupiterIDL, IDL } from './idl/jupiter';\nimport type { RaydiumAmm } from './raydium/raydiumAmm';\nimport { StableSwap } from '@saberhq/stableswap-sdk';\nimport {\n  ALDRIN_SWAP_PROGRAM_ID,\n  ALDRIN_SWAP_V2_PROGRAM_ID,\n  RAYDIUM_AMM_V4_PROGRAM_ID,\n  SABER_ADD_DECIMALS_PROGRAM_ID,\n  MERCURIAL_SWAP_PROGRAM_ID,\n  CYKURA_PROGRAM_ID,\n  CYKURA_FACTORY_STATE_ADDRESS,\n  WHIRLPOOL_PROGRAM_ID,\n} from '../constants';\nimport { AldrinPoolState } from './aldrin/poolState';\nimport type { TokenSwapState } from './spl-token-swap/tokenSwapLayout';\nimport { PlatformFee } from './types';\nimport type { AddDecimals } from './saber/saberAddDecimalsAmm';\nimport { CropperPoolState, CROPPER_STATE_ADDRESS } from './cropper/swapLayout';\nimport { SenchaPoolState } from './sencha/swapLayout';\nimport { CremaPoolState } from './crema/swapLayout';\nimport { MercurialSwapLayoutState } from './mercurial/swapLayout';\nimport { LifinitySwapLayoutState } from './lifinity/swapLayout';\n\n// Side rust enum used for the program's RPC API.\nconst Side = {\n  Bid: { bid: {} },\n  Ask: { ask: {} },\n};\n\nexport const JUPITER_PROGRAM_ID_STAGING = new PublicKey('BUG9oTodrkqFqxLhvvaUtwsPLtk1wkcTC544fQn9fWPm');\nexport const JUPITER_PROGRAM_ID_PRODUCTION = new PublicKey('JUP2jxvXaqu7NQY1GmNF4m1vodw12LVXYxbFL2uJvfo');\n\nconst JUPITER_PROGRAM_ID = JUPITER_PROGRAM_ID_PRODUCTION; // JUPITER_PROGRAM_ID_PRODUCTION;\n\nconst JUPITER_PROGRAM = new Program<JupiterIDL>(IDL, JUPITER_PROGRAM_ID, {} as Provider);\n\nexport const STAGING_TOKEN_LEDGER = new PublicKey('FartgFP53i6ejPsr1owuc4ya2vxJGdcy5uEzMLJRcuzn');\nexport const PRODUCTION_TOKEN_LEDGER = new PublicKey('7h51TX1pNvSaNyjg4koKroJqoe7atKB7xWUfir7ZqX81');\n\nexport const PRODUCTION_TOKEN_LEDGERS = [\n  new PublicKey('7h51TX1pNvSaNyjg4koKroJqoe7atKB7xWUfir7ZqX81'),\n  new PublicKey('HgeLVK1nJ1kNdWSUNCKj6DfGqfhwgx67dfGPRcBSdE2d'),\n  new PublicKey('8ME9HwwchNknEVrcCSKYAQCa1YAYi3LZrEXJrY4ZNkkg'),\n  new PublicKey('Edg9J3CMky9AVJq2WrSar2JR38jFkg4S7vAW7Xsix8oV'),\n  new PublicKey('B5mW68TkDewnKvWNc2trkmmdSRxcCjZz3Yd9BWxQTSRU'),\n  new PublicKey('7E3TDrnS2zEp8uVri8EtPU8MyQ3qjLTc6cCGJAnAM48p'),\n];\n\nexport const TOKEN_LEDGER: PublicKey =\n  PRODUCTION_TOKEN_LEDGERS[Math.floor(Math.random() * PRODUCTION_TOKEN_LEDGERS.length)];\n\ntype CreateSwapInstructionParams = {\n  sourceMint: PublicKey;\n  userSourceTokenAccount: PublicKey;\n  userDestinationTokenAccount: PublicKey;\n  userTransferAuthority: PublicKey;\n  inAmount: number | null;\n  minimumOutAmount: number;\n  tokenLedger: PublicKey;\n  platformFee?: PlatformFee;\n};\n\nfunction stableSwapNPoolIntoMercurialExchange(\n  swayLayout: MercurialSwapLayoutState,\n  sourceTokenAccount: PublicKey,\n  destinationTokenAccount: PublicKey,\n  userTransferAuthority: PublicKey,\n) {\n  return {\n    swapProgram: MERCURIAL_SWAP_PROGRAM_ID,\n    swapState: swayLayout.ammId,\n    tokenProgram: TOKEN_PROGRAM_ID,\n    poolAuthority: swayLayout.authority,\n    userTransferAuthority: userTransferAuthority,\n\n    sourceTokenAccount,\n    destinationTokenAccount,\n  };\n}\n\nfunction raydiumAmmToRaydiumSwap(\n  raydiumAmm: RaydiumAmm,\n  userSourceTokenAccount: PublicKey,\n  userDestinationTokenAccount: PublicKey,\n  userTransferAuthority: PublicKey,\n) {\n  const [ammAuthority] = findProgramAddressSync(\n    [new Uint8Array(Buffer.from('amm authority'.replace('\\u00A0', ' '), 'utf-8'))],\n    RAYDIUM_AMM_V4_PROGRAM_ID,\n  );\n\n  if (!raydiumAmm.serumMarketKeys) {\n    throw new Error('RaydiumAmm is missing serumMarketKeys');\n  }\n\n  return {\n    swapProgram: RAYDIUM_AMM_V4_PROGRAM_ID,\n    tokenProgram: TOKEN_PROGRAM_ID,\n    ammId: raydiumAmm.ammId,\n    ammAuthority,\n    ammOpenOrders: raydiumAmm.ammOpenOrders,\n    poolCoinTokenAccount: raydiumAmm.poolCoinTokenAccount,\n    poolPcTokenAccount: raydiumAmm.poolPcTokenAccount,\n    serumProgramId: raydiumAmm.serumProgramId,\n    serumMarket: raydiumAmm.serumMarket,\n    serumBids: raydiumAmm.serumMarketKeys.serumBids,\n    serumAsks: raydiumAmm.serumMarketKeys.serumAsks,\n    serumEventQueue: raydiumAmm.serumMarketKeys.serumEventQueue,\n    serumCoinVaultAccount: raydiumAmm.serumMarketKeys.serumCoinVaultAccount,\n    serumPcVaultAccount: raydiumAmm.serumMarketKeys.serumPcVaultAccount,\n    serumVaultSigner: raydiumAmm.serumMarketKeys.serumVaultSigner,\n    userSourceTokenAccount: userSourceTokenAccount,\n    userDestinationTokenAccount: userDestinationTokenAccount,\n    userSourceOwner: userTransferAuthority,\n  };\n}\n\nfunction marketIntoSerumSwap(\n  market: Market,\n  openOrdersAddress: PublicKey,\n  orderPayerTokenAccountAddress: PublicKey,\n  coinWallet: PublicKey,\n  pcWallet: PublicKey,\n  userTransferAuthority: PublicKey,\n) {\n  const vaultSigner = createProgramAddressSync(\n    [market.address.toBuffer(), market.decoded.vaultSignerNonce.toArrayLike(Buffer, 'le', 8)],\n    market.programId,\n  );\n\n  return {\n    market: {\n      market: market.address,\n      openOrders: openOrdersAddress,\n      requestQueue: market.decoded.requestQueue,\n      eventQueue: market.decoded.eventQueue,\n      bids: market.bidsAddress,\n      asks: market.asksAddress,\n      coinVault: market.decoded.baseVault,\n      pcVault: market.decoded.quoteVault,\n      vaultSigner,\n    },\n    authority: userTransferAuthority,\n    orderPayerTokenAccount: orderPayerTokenAccountAddress,\n    coinWallet,\n    pcWallet,\n    // Programs.\n    dexProgram: market.programId,\n    tokenProgram: TOKEN_PROGRAM_ID,\n    // Sysvars.\n    rent: SYSVAR_RENT_PUBKEY,\n  };\n}\n\nexport function createMercurialExchangeInstruction({\n  swapLayout,\n  userSourceTokenAccount,\n  userDestinationTokenAccount,\n  userTransferAuthority,\n  inAmount,\n  minimumOutAmount,\n  tokenLedger,\n  platformFee,\n}: { swapLayout: MercurialSwapLayoutState } & CreateSwapInstructionParams): TransactionInstruction {\n  const remainingAccounts: AccountMeta[] = [];\n\n  for (const swapTokenAccount of swapLayout.tokenAccounts) {\n    remainingAccounts.push({\n      pubkey: swapTokenAccount,\n      isSigner: false,\n      isWritable: true,\n    });\n  }\n  remainingAccounts.push(...prepareRemainingAccounts(inAmount, tokenLedger, platformFee?.feeAccount));\n\n  return JUPITER_PROGRAM.instruction.mercurialExchange(\n    inAmount ? new BN(inAmount) : inAmount,\n    new BN(minimumOutAmount),\n    platformFee?.feeBps ?? 0,\n    {\n      accounts: stableSwapNPoolIntoMercurialExchange(\n        swapLayout,\n        userSourceTokenAccount,\n        userDestinationTokenAccount,\n        userTransferAuthority,\n      ),\n      remainingAccounts,\n    },\n  );\n}\n\nexport function createSerumSwapInstruction({\n  market,\n  sourceMint,\n  openOrdersAddress,\n  userSourceTokenAccount,\n  userDestinationTokenAccount,\n  userTransferAuthority,\n  inAmount,\n  minimumOutAmount,\n  tokenLedger,\n  platformFee,\n  referrer,\n}: {\n  market: Market;\n  openOrdersAddress: PublicKey;\n  referrer: PublicKey | undefined;\n} & CreateSwapInstructionParams): TransactionInstruction {\n  const { side, coinWallet, pcWallet } = sourceMint.equals(market.baseMintAddress)\n    ? {\n        side: Side.Ask,\n        coinWallet: userSourceTokenAccount,\n        pcWallet: userDestinationTokenAccount,\n      }\n    : {\n        side: Side.Bid,\n        coinWallet: userDestinationTokenAccount,\n        pcWallet: userSourceTokenAccount,\n      };\n\n  let remainingAccounts = prepareRemainingAccounts(inAmount, tokenLedger, platformFee?.feeAccount);\n\n  if (referrer) {\n    remainingAccounts.push({\n      pubkey: referrer,\n      isSigner: false,\n      isWritable: true,\n    });\n  }\n\n  return JUPITER_PROGRAM.instruction.serumSwap(\n    side,\n    inAmount ? new BN(inAmount) : inAmount,\n    new BN(minimumOutAmount),\n    platformFee?.feeBps ?? 0,\n    {\n      accounts: marketIntoSerumSwap(\n        market,\n        openOrdersAddress,\n        userSourceTokenAccount,\n        coinWallet,\n        pcWallet,\n        userTransferAuthority,\n      ),\n      remainingAccounts,\n    },\n  );\n}\n\nexport function createTokenSwapInstruction({\n  tokenSwapState,\n  sourceMint,\n  userSourceTokenAccount,\n  userDestinationTokenAccount,\n  userTransferAuthority,\n  inAmount,\n  minimumOutAmount,\n  tokenLedger,\n  platformFee,\n  isStep,\n}: { tokenSwapState: TokenSwapState; isStep: boolean } & CreateSwapInstructionParams): TransactionInstruction {\n  const [swapSource, swapDestination] = sourceMint.equals(tokenSwapState.mintA)\n    ? [tokenSwapState.tokenAccountA, tokenSwapState.tokenAccountB]\n    : [tokenSwapState.tokenAccountB, tokenSwapState.tokenAccountA];\n\n  return (isStep ? JUPITER_PROGRAM.instruction.stepTokenSwap : JUPITER_PROGRAM.instruction.tokenSwap)(\n    inAmount ? new BN(inAmount) : inAmount,\n    new BN(minimumOutAmount),\n    platformFee?.feeBps ?? 0,\n    {\n      accounts: {\n        tokenSwapProgram: tokenSwapState.programId,\n        tokenProgram: TOKEN_PROGRAM_ID,\n        swap: tokenSwapState.address,\n        authority: tokenSwapState.authority,\n        userTransferAuthority: userTransferAuthority,\n        source: userSourceTokenAccount,\n        swapSource,\n        swapDestination,\n        destination: userDestinationTokenAccount,\n        poolMint: tokenSwapState.poolToken,\n        poolFee: tokenSwapState.feeAccount,\n      },\n      remainingAccounts: prepareRemainingAccounts(inAmount, tokenLedger, platformFee?.feeAccount),\n    },\n  );\n}\n\nexport function createSenchaSwapInstruction({\n  poolState,\n  sourceMint,\n  userSourceTokenAccount,\n  userDestinationTokenAccount,\n  userTransferAuthority,\n  inAmount,\n  minimumOutAmount,\n  tokenLedger,\n  platformFee,\n}: { poolState: SenchaPoolState } & CreateSwapInstructionParams): TransactionInstruction {\n  const [swapSource, swapDestination] = sourceMint.equals(poolState.token0Mint)\n    ? [poolState.token0Reserves, poolState.token1Reserves]\n    : [poolState.token1Reserves, poolState.token0Reserves];\n\n  const [feesSource, feesDestination] = sourceMint.equals(poolState.token0Mint)\n    ? [poolState.token0Fees, poolState.token1Fees]\n    : [poolState.token1Fees, poolState.token0Fees];\n\n  return JUPITER_PROGRAM.instruction.senchaExchange(\n    inAmount ? new BN(inAmount) : inAmount,\n    new BN(minimumOutAmount),\n    platformFee?.feeBps ?? 0,\n    {\n      accounts: {\n        swapProgram: poolState.programId,\n        tokenProgram: TOKEN_PROGRAM_ID,\n        swap: poolState.ammId,\n        userAuthority: userTransferAuthority,\n        inputUserAccount: userSourceTokenAccount,\n        inputTokenAccount: swapSource,\n        inputFeesAccount: feesSource,\n        outputUserAccount: userDestinationTokenAccount,\n        outputTokenAccount: swapDestination,\n        outputFeesAccount: feesDestination,\n      },\n      remainingAccounts: prepareRemainingAccounts(inAmount, tokenLedger, platformFee?.feeAccount),\n    },\n  );\n}\n\nexport function createCropperSwapInstruction({\n  poolState,\n  feeAccount,\n  sourceMint,\n  userSourceTokenAccount,\n  userDestinationTokenAccount,\n  userTransferAuthority,\n  inAmount,\n  minimumOutAmount,\n  tokenLedger,\n  platformFee,\n}: { poolState: CropperPoolState; feeAccount: PublicKey } & CreateSwapInstructionParams): TransactionInstruction {\n  const [swapSource, swapDestination] = sourceMint.equals(poolState.mintA)\n    ? [poolState.tokenAAccount, poolState.tokenBAccount]\n    : [poolState.tokenBAccount, poolState.tokenAAccount];\n\n  return JUPITER_PROGRAM.instruction.cropperTokenSwap(\n    inAmount ? new BN(inAmount) : inAmount,\n    new BN(minimumOutAmount),\n    platformFee?.feeBps ?? 0,\n    {\n      accounts: {\n        tokenSwapProgram: poolState.programId,\n        tokenProgram: TOKEN_PROGRAM_ID,\n        swap: poolState.ammId,\n        swapState: CROPPER_STATE_ADDRESS,\n        authority: poolState.authority,\n        userTransferAuthority: userTransferAuthority,\n        source: userSourceTokenAccount,\n        swapSource,\n        swapDestination,\n        destination: userDestinationTokenAccount,\n        poolMint: poolState.poolMint,\n        poolFee: feeAccount,\n      },\n      remainingAccounts: prepareRemainingAccounts(inAmount, tokenLedger, platformFee?.feeAccount),\n    },\n  );\n}\n\nexport function createRaydiumSwapInstruction({\n  raydiumAmm,\n  userSourceTokenAccount,\n  userDestinationTokenAccount,\n  userTransferAuthority,\n  inAmount,\n  minimumOutAmount,\n  tokenLedger,\n  platformFee,\n}: { raydiumAmm: RaydiumAmm } & CreateSwapInstructionParams): TransactionInstruction {\n  return JUPITER_PROGRAM.instruction.raydiumSwapV2(\n    inAmount ? new BN(inAmount) : inAmount,\n    new BN(minimumOutAmount),\n    platformFee?.feeBps ?? 0,\n    {\n      accounts: raydiumAmmToRaydiumSwap(\n        raydiumAmm,\n        userSourceTokenAccount,\n        userDestinationTokenAccount,\n        userTransferAuthority,\n      ),\n      remainingAccounts: prepareRemainingAccounts(inAmount, tokenLedger, platformFee?.feeAccount),\n    },\n  );\n}\n\nexport function createAldrinSwapInstruction({\n  poolState,\n  sourceMint,\n  userSourceTokenAccount,\n  userDestinationTokenAccount,\n  userTransferAuthority,\n  inAmount,\n  minimumOutAmount,\n  tokenLedger,\n  platformFee,\n}: {\n  poolState: AldrinPoolState;\n} & CreateSwapInstructionParams): TransactionInstruction {\n  const [side, userBaseTokenAccount, userQuoteTokenAccount] = sourceMint.equals(poolState.baseTokenMint)\n    ? [Side.Ask, userSourceTokenAccount, userDestinationTokenAccount]\n    : [Side.Bid, userDestinationTokenAccount, userSourceTokenAccount];\n\n  return JUPITER_PROGRAM.instruction.aldrinSwap(\n    inAmount ? new BN(inAmount) : inAmount,\n    new BN(minimumOutAmount),\n    side,\n    platformFee?.feeBps ?? 0,\n    {\n      accounts: {\n        swapProgram: ALDRIN_SWAP_PROGRAM_ID,\n        pool: poolState.address,\n        poolSigner: poolState.poolSigner,\n        poolMint: poolState.poolMint,\n        baseTokenVault: poolState.baseTokenVault,\n        quoteTokenVault: poolState.quoteTokenVault,\n        feePoolTokenAccount: poolState.feePoolTokenAccount,\n        walletAuthority: userTransferAuthority,\n        userBaseTokenAccount,\n        userQuoteTokenAccount,\n        tokenProgram: TOKEN_PROGRAM_ID,\n      },\n      remainingAccounts: prepareRemainingAccounts(inAmount, tokenLedger, platformFee?.feeAccount),\n    },\n  );\n}\n\nexport function createAldrinV2SwapInstruction({\n  poolState,\n  sourceMint,\n  userSourceTokenAccount,\n  userDestinationTokenAccount,\n  curve,\n  userTransferAuthority,\n  inAmount,\n  minimumOutAmount,\n  tokenLedger,\n  platformFee,\n}: { poolState: AldrinPoolState; curve: PublicKey } & CreateSwapInstructionParams): TransactionInstruction {\n  const [side, userBaseTokenAccount, userQuoteTokenAccount] = sourceMint.equals(poolState.baseTokenMint)\n    ? [Side.Ask, userSourceTokenAccount, userDestinationTokenAccount]\n    : [Side.Bid, userDestinationTokenAccount, userSourceTokenAccount];\n\n  return JUPITER_PROGRAM.instruction.aldrinV2Swap(\n    inAmount ? new BN(inAmount) : inAmount,\n    new BN(minimumOutAmount),\n    side,\n    platformFee?.feeBps ?? 0,\n    {\n      accounts: {\n        swapProgram: ALDRIN_SWAP_V2_PROGRAM_ID,\n        pool: poolState.address,\n        poolSigner: poolState.poolSigner,\n        poolMint: poolState.poolMint,\n        baseTokenVault: poolState.baseTokenVault,\n        quoteTokenVault: poolState.quoteTokenVault,\n        feePoolTokenAccount: poolState.feePoolTokenAccount,\n        walletAuthority: userTransferAuthority,\n        userBaseTokenAccount,\n        userQuoteTokenAccount,\n        curve,\n        tokenProgram: TOKEN_PROGRAM_ID,\n      },\n      remainingAccounts: prepareRemainingAccounts(inAmount, tokenLedger, platformFee?.feeAccount),\n    },\n  );\n}\n\nexport function createCremaSwapInstruction({\n  poolState,\n  sourceMint,\n  userSourceTokenAccount,\n  userDestinationTokenAccount,\n  userTransferAuthority,\n  inAmount,\n  minimumOutAmount,\n  tokenLedger,\n  platformFee,\n}: { poolState: CremaPoolState } & CreateSwapInstructionParams): TransactionInstruction {\n  const [swapSource, swapDestination] = sourceMint.equals(poolState.mintA)\n    ? [poolState.tokenAAccount, poolState.tokenBAccount]\n    : [poolState.tokenBAccount, poolState.tokenAAccount];\n\n  return JUPITER_PROGRAM.instruction.cremaTokenSwap(\n    inAmount ? new BN(inAmount) : inAmount,\n    new BN(minimumOutAmount),\n    platformFee?.feeBps ?? 0,\n    {\n      accounts: {\n        swapProgram: poolState.programId,\n        pool: poolState.ammId,\n        poolSigner: poolState.authority,\n        userSourceTokenAccount: userSourceTokenAccount,\n        userDestinationTokenAccount: userDestinationTokenAccount,\n        poolSourceTokenAccount: swapSource,\n        poolDestinationTokenAccount: swapDestination,\n        poolTicksAccount: poolState.ticksKey,\n        walletAuthority: userTransferAuthority,\n        tokenProgram: TOKEN_PROGRAM_ID,\n      },\n      remainingAccounts: prepareRemainingAccounts(inAmount, tokenLedger, platformFee?.feeAccount),\n    },\n  );\n}\n\nexport function createRiskCheckAndFeeInstruction(\n  userDestinationTokenAccount: PublicKey,\n  userTransferAuthority: PublicKey,\n  minimumOutAmount: number,\n  tokenLedger: PublicKey,\n  platformFee: PlatformFee | undefined,\n): TransactionInstruction {\n  const remainingAccounts: AccountMeta[] = [];\n\n  if (platformFee?.feeAccount) {\n    remainingAccounts.push({\n      pubkey: platformFee.feeAccount,\n      isSigner: false,\n      isWritable: true,\n    });\n  }\n\n  return JUPITER_PROGRAM.instruction.riskCheckAndFee(new BN(minimumOutAmount), platformFee?.feeBps ?? 0, {\n    accounts: {\n      tokenLedger,\n      userDestinationTokenAccount,\n      userTransferAuthority,\n      tokenProgram: TOKEN_PROGRAM_ID,\n    },\n    remainingAccounts,\n  });\n}\n\nexport function createSetTokenLedgerInstruction(\n  tokenLedger: PublicKey,\n  tokenAccountAddress: PublicKey,\n): TransactionInstruction {\n  return JUPITER_PROGRAM.instruction.setTokenLedger({\n    accounts: {\n      tokenLedger,\n      tokenAccount: tokenAccountAddress,\n    },\n  });\n}\n\nexport function createInitializeTokenLedgerInstruction(\n  tokenLedger: PublicKey,\n  payer: PublicKey,\n): TransactionInstruction {\n  return JUPITER_PROGRAM.instruction.initializeTokenLedger({\n    accounts: {\n      tokenLedger,\n      payer,\n      systemProgram: SystemProgram.programId,\n    },\n  });\n}\n\nexport function createOpenOrdersInstruction(\n  market: Market,\n  userTransferAuthority: PublicKey,\n): [PublicKey, TransactionInstruction] {\n  const [openOrders] = findProgramAddressSync(\n    [Buffer.from('open_orders'), market.publicKey.toBuffer(), userTransferAuthority.toBuffer()],\n    JUPITER_PROGRAM_ID,\n  );\n\n  const ix = JUPITER_PROGRAM.instruction.createOpenOrders({\n    accounts: {\n      openOrders,\n      payer: userTransferAuthority,\n      dexProgram: market.programId,\n      systemProgram: SystemProgram.programId,\n      rent: SYSVAR_RENT_PUBKEY,\n      market: market.publicKey,\n    },\n  });\n  return [openOrders, ix];\n}\n\nfunction saberPoolIntoSaberSwap(\n  saberPool: StableSwap,\n  sourceMintAddress: PublicKey,\n  userSourceTokenAccount: PublicKey,\n  userDestinationTokenAccount: PublicKey,\n  userTransferAuthority: PublicKey,\n) {\n  const feesTokenAccount = sourceMintAddress.equals(saberPool.state.tokenA.mint)\n    ? saberPool.state.tokenB.adminFeeAccount\n    : saberPool.state.tokenA.adminFeeAccount;\n  const [inputTokenAccount, outputTokenAccount] = sourceMintAddress.equals(saberPool.state.tokenA.mint)\n    ? [saberPool.state.tokenA.reserve, saberPool.state.tokenB.reserve]\n    : [saberPool.state.tokenB.reserve, saberPool.state.tokenA.reserve];\n\n  return {\n    swapProgram: saberPool.config.swapProgramID,\n    tokenProgram: TOKEN_PROGRAM_ID,\n    swap: saberPool.config.swapAccount,\n    swapAuthority: saberPool.config.authority,\n    userAuthority: userTransferAuthority,\n    inputUserAccount: userSourceTokenAccount,\n    inputTokenAccount,\n    outputUserAccount: userDestinationTokenAccount,\n    outputTokenAccount,\n    feesTokenAccount,\n  };\n}\n\nexport function createSaberSwapInstruction({\n  stableSwap,\n  sourceMint,\n  userSourceTokenAccount,\n  userDestinationTokenAccount,\n  userTransferAuthority,\n  inAmount,\n  minimumOutAmount,\n  tokenLedger,\n  platformFee,\n}: { stableSwap: StableSwap } & CreateSwapInstructionParams): TransactionInstruction {\n  const remainingAccounts = prepareRemainingAccounts(inAmount, tokenLedger, platformFee?.feeAccount);\n  return JUPITER_PROGRAM.instruction.saberSwap(\n    inAmount ? new BN(inAmount) : inAmount,\n    new BN(minimumOutAmount),\n    platformFee?.feeBps ?? 0,\n    {\n      accounts: saberPoolIntoSaberSwap(\n        stableSwap,\n        sourceMint,\n        userSourceTokenAccount,\n        userDestinationTokenAccount,\n        userTransferAuthority,\n      ),\n      remainingAccounts,\n    },\n  );\n}\n\nexport function createSaberAddDecimalsDepositInstruction({\n  addDecimals,\n  userSourceTokenAccount,\n  userDestinationTokenAccount,\n  userTransferAuthority,\n  inAmount,\n  minimumOutAmount,\n  tokenLedger,\n  platformFee,\n}: { addDecimals: AddDecimals } & CreateSwapInstructionParams) {\n  const remainingAccounts = prepareRemainingAccounts(inAmount, tokenLedger, platformFee?.feeAccount);\n  return JUPITER_PROGRAM.instruction.saberAddDecimalsDeposit(\n    inAmount ? new BN(inAmount) : inAmount,\n    new BN(minimumOutAmount),\n    platformFee?.feeBps ?? 0,\n    {\n      accounts: {\n        addDecimalsProgram: SABER_ADD_DECIMALS_PROGRAM_ID,\n        wrapper: addDecimals.wrapper,\n        wrapperMint: addDecimals.mint,\n        wrapperUnderlyingTokens: addDecimals.wrapperUnderlyingTokens,\n        owner: userTransferAuthority,\n        userUnderlyingTokens: userSourceTokenAccount,\n        userWrappedTokens: userDestinationTokenAccount,\n        tokenProgram: TOKEN_PROGRAM_ID,\n      },\n      remainingAccounts,\n    },\n  );\n}\n\nexport function createSaberAddDecimalsWithdrawInstruction({\n  addDecimals,\n  userSourceTokenAccount,\n  userDestinationTokenAccount,\n  userTransferAuthority,\n  inAmount,\n  minimumOutAmount,\n  tokenLedger,\n  platformFee,\n}: { addDecimals: AddDecimals } & CreateSwapInstructionParams) {\n  const remainingAccounts = prepareRemainingAccounts(inAmount, tokenLedger, platformFee?.feeAccount);\n  return JUPITER_PROGRAM.instruction.saberAddDecimalsWithdraw(\n    inAmount ? new BN(inAmount) : inAmount,\n    new BN(minimumOutAmount),\n    platformFee?.feeBps ?? 0,\n    {\n      accounts: {\n        addDecimalsProgram: SABER_ADD_DECIMALS_PROGRAM_ID,\n        wrapper: addDecimals.wrapper,\n        wrapperMint: addDecimals.mint,\n        wrapperUnderlyingTokens: addDecimals.wrapperUnderlyingTokens,\n        owner: userTransferAuthority,\n        userUnderlyingTokens: userDestinationTokenAccount,\n        userWrappedTokens: userSourceTokenAccount,\n        tokenProgram: TOKEN_PROGRAM_ID,\n      },\n      remainingAccounts,\n    },\n  );\n}\n\nexport function createLifinitySwapInstruction({\n  swapState,\n  sourceMint,\n  userSourceTokenAccount,\n  userDestinationTokenAccount,\n  userTransferAuthority,\n  inAmount,\n  minimumOutAmount,\n  tokenLedger,\n  platformFee,\n}: { swapState: LifinitySwapLayoutState } & CreateSwapInstructionParams): TransactionInstruction {\n  const [swapSource, swapDestination] = sourceMint.equals(swapState.tokenAMint)\n    ? [swapState.poolCoinTokenAccount, swapState.poolPcTokenAccount]\n    : [swapState.poolPcTokenAccount, swapState.poolCoinTokenAccount];\n\n  return JUPITER_PROGRAM.instruction.lifinityTokenSwap(\n    inAmount ? new BN(inAmount) : inAmount,\n    new BN(minimumOutAmount),\n    platformFee?.feeBps ?? 0,\n    {\n      accounts: {\n        swapProgram: swapState.programId,\n        authority: swapState.authority,\n        amm: swapState.amm,\n        userTransferAuthority: userTransferAuthority,\n        sourceInfo: userSourceTokenAccount,\n        destinationInfo: userDestinationTokenAccount,\n        swapSource,\n        swapDestination,\n        poolMint: swapState.poolMint,\n        feeAccount: swapState.feeAccount,\n        tokenProgram: TOKEN_PROGRAM_ID,\n        pythAccount: swapState.pythAccount,\n        pythPcAccount: swapState.pythPcAccount,\n        configAccount: swapState.configAccount,\n      },\n      remainingAccounts: prepareRemainingAccounts(inAmount, tokenLedger, platformFee?.feeAccount),\n    },\n  );\n}\n\ntype CykuraSwapInstructionArgs = {\n  poolAddress: PublicKey;\n  inputVault: PublicKey;\n  outputVault: PublicKey;\n  nextObservationState: PublicKey;\n  lastObservationState: PublicKey;\n  swapAccountMetas: AccountMeta[];\n};\n\nexport function createCykuraSwapInstruction({\n  additionalArgs,\n  userSourceTokenAccount,\n  userDestinationTokenAccount,\n  userTransferAuthority,\n  inAmount,\n  minimumOutAmount,\n  tokenLedger,\n  platformFee,\n}: { additionalArgs: CykuraSwapInstructionArgs } & CreateSwapInstructionParams): TransactionInstruction {\n  const remainingAccounts = prepareRemainingAccounts(inAmount, tokenLedger, platformFee?.feeAccount);\n\n  return JUPITER_PROGRAM.instruction.cykuraSwap(\n    inAmount ? new BN(inAmount) : inAmount,\n    new BN(minimumOutAmount),\n    platformFee?.feeBps ?? 0,\n    {\n      accounts: {\n        swapProgram: CYKURA_PROGRAM_ID,\n        signer: userTransferAuthority,\n        factoryState: CYKURA_FACTORY_STATE_ADDRESS,\n        poolState: additionalArgs.poolAddress,\n        inputTokenAccount: userSourceTokenAccount,\n        outputTokenAccount: userDestinationTokenAccount,\n        inputVault: additionalArgs.inputVault,\n        outputVault: additionalArgs.outputVault,\n        lastObservationState: additionalArgs.lastObservationState,\n        coreProgram: CYKURA_PROGRAM_ID, // Duplicated as in Cykura accounts\n        tokenProgram: TOKEN_PROGRAM_ID,\n      },\n      remainingAccounts: remainingAccounts.concat([\n        ...additionalArgs.swapAccountMetas,\n        { pubkey: additionalArgs.nextObservationState, isSigner: false, isWritable: true },\n      ]),\n    },\n  );\n}\n\ntype WhirlpoolSwapInstructionArgs = {\n  aToB: boolean;\n  whirlpool: PublicKey;\n  tokenVaultA: PublicKey;\n  tokenVaultB: PublicKey;\n  tickArray0: PublicKey;\n  tickArray1: PublicKey;\n  tickArray2: PublicKey;\n  oracle: PublicKey;\n};\n\nexport function createWhirlpoolSwapInstruction({\n  additionalArgs,\n  userSourceTokenAccount,\n  userDestinationTokenAccount,\n  userTransferAuthority,\n  inAmount,\n  minimumOutAmount,\n  tokenLedger,\n  platformFee,\n}: { additionalArgs: WhirlpoolSwapInstructionArgs } & CreateSwapInstructionParams): TransactionInstruction {\n  const [tokenOwnerAccountA, tokenOwnerAccountB] = additionalArgs.aToB\n    ? [userSourceTokenAccount, userDestinationTokenAccount]\n    : [userDestinationTokenAccount, userSourceTokenAccount];\n\n  return JUPITER_PROGRAM.instruction.whirlpoolSwap(\n    inAmount ? new BN(inAmount) : inAmount,\n    new BN(minimumOutAmount),\n    additionalArgs.aToB,\n    platformFee?.feeBps ?? 0,\n    {\n      accounts: {\n        swapProgram: WHIRLPOOL_PROGRAM_ID,\n        tokenProgram: TOKEN_PROGRAM_ID,\n        tokenAuthority: userTransferAuthority,\n        whirlpool: additionalArgs.whirlpool,\n        tokenOwnerAccountA,\n        tokenVaultA: additionalArgs.tokenVaultA,\n        tokenOwnerAccountB,\n        tokenVaultB: additionalArgs.tokenVaultB,\n        tickArray0: additionalArgs.tickArray0,\n        tickArray1: additionalArgs.tickArray1,\n        tickArray2: additionalArgs.tickArray2,\n        oracle: additionalArgs.oracle,\n      },\n      remainingAccounts: prepareRemainingAccounts(inAmount, tokenLedger, platformFee?.feeAccount),\n    },\n  );\n}\n\nfunction prepareRemainingAccounts(\n  inAmount: number | null,\n  tokenLedger: PublicKey,\n  feeAccount: PublicKey | undefined,\n): AccountMeta[] {\n  const remainingAccounts = [];\n\n  if (inAmount === null) {\n    remainingAccounts.push({\n      pubkey: tokenLedger,\n      isSigner: false,\n      isWritable: true,\n    });\n  }\n  if (feeAccount) {\n    remainingAccounts.push({\n      pubkey: feeAccount,\n      isSigner: false,\n      isWritable: true,\n    });\n  }\n\n  return remainingAccounts;\n}\n","import { PublicKey, TransactionInstruction } from '@solana/web3.js';\nimport JSBI from 'jsbi';\nimport { AccountInfoMap, Amm, QuoteParams, SwapParams } from '../amm';\n// Modified from saber's registry to contain the underlying mint decimal to avoid pointless queries\nimport addDecimalsJson from './add-decimals-complete-state.mainnet-beta.json';\nimport {\n  createSaberAddDecimalsDepositInstruction,\n  createSaberAddDecimalsWithdrawInstruction,\n} from '../jupiterInstruction';\n\nexport interface AddDecimals {\n  wrapper: PublicKey;\n  underlying: PublicKey;\n  underlyingDecimals: number;\n  wrapperUnderlyingTokens: PublicKey;\n  mint: PublicKey;\n  decimals: number;\n}\n\nexport function getSaberWrappedDecimalsAmms() {\n  return addDecimalsJson.map((addDecimalJson) => {\n    const addDecimals = {\n      wrapper: new PublicKey(addDecimalJson.wrapper),\n      underlying: new PublicKey(addDecimalJson.underlying),\n      underlyingDecimals: addDecimalJson.underlyingDecimals,\n      wrapperUnderlyingTokens: new PublicKey(addDecimalJson.wrapperUnderlyingTokens),\n      mint: new PublicKey(addDecimalJson.mint),\n      decimals: addDecimalJson.decimals,\n    };\n\n    return new SaberAddDecimalsAmm(new WrappedToken(addDecimals));\n  });\n}\n\nexport class WrappedToken {\n  constructor(public addDecimals: AddDecimals) {}\n\n  private get multiplier() {\n    return 10 ** (this.addDecimals.decimals - this.addDecimals.underlyingDecimals);\n  }\n\n  getOutputAmount(inputAmount: number, inputMint: PublicKey): JSBI {\n    if (this.addDecimals.mint.equals(inputMint)) {\n      // withdraw, so divide\n      return this.calculateWithdrawOutputAmount(inputAmount);\n    } else if (this.addDecimals.underlying.equals(inputMint)) {\n      // deposit, so multiply\n      return this.calculateDepositOutputAmount(inputAmount);\n    }\n    throw new Error(`unknown input token: ${inputMint.toString()}`);\n  }\n\n  private calculateDepositOutputAmount(inputAmount: number) {\n    return JSBI.multiply(JSBI.BigInt(inputAmount), JSBI.BigInt(this.multiplier));\n  }\n\n  private calculateWithdrawOutputAmount(inputAmount: number) {\n    return JSBI.divide(JSBI.BigInt(inputAmount), JSBI.BigInt(this.multiplier));\n  }\n}\n\n// This isn't technically an Amm but this the smoothest solution to allow its usage without a major refactor of the abstractions for now\nexport class SaberAddDecimalsAmm implements Amm {\n  id: string;\n  label = 'Saber (Decimals)' as const;\n  shouldPrefetch = false;\n\n  constructor(public wrappedToken: WrappedToken) {\n    this.id = this.wrappedToken.addDecimals.wrapper.toBase58();\n  }\n\n  getAccountsForUpdate() {\n    return new Array<PublicKey>();\n  }\n\n  update(_accountInfoMap: AccountInfoMap) {}\n\n  getQuote({ sourceMint, amount }: QuoteParams) {\n    const outAmount = JSBI.toNumber(this.wrappedToken.getOutputAmount(amount, sourceMint));\n    return {\n      notEnoughLiquidity: false,\n      inAmount: amount,\n      outAmount,\n      feeAmount: 0,\n      feeMint: sourceMint.toBase58(),\n      feePct: 0,\n      priceImpactPct: 0,\n    };\n  }\n\n  createSwapInstructions(swapParams: SwapParams) {\n    if (this.wrappedToken.addDecimals.underlying.equals(swapParams.sourceMint)) {\n      return [\n        createSaberAddDecimalsDepositInstruction({\n          addDecimals: this.wrappedToken.addDecimals,\n          ...swapParams,\n        }),\n      ];\n    } else {\n      return [\n        createSaberAddDecimalsWithdrawInstruction({\n          addDecimals: this.wrappedToken.addDecimals,\n          ...swapParams,\n        }),\n      ];\n    }\n  }\n\n  get reserveTokenMints() {\n    return [this.wrappedToken.addDecimals.underlying, this.wrappedToken.addDecimals.mint];\n  }\n}\n","export function getTwoPermutations<T>(array: T[]) {\n  return array.reduce((acc, item) => {\n    array.forEach((otherItem) => {\n      if (item !== otherItem) {\n        acc.push([item, otherItem]);\n      }\n    });\n    return acc;\n  }, new Array<T[]>());\n}\n","export function chunks<T>(array: T[], size: number): T[][] {\n  return Array.apply<number, T[], T[][]>(0, new Array(Math.ceil(array.length / size))).map((_, index) =>\n    array.slice(index * size, (index + 1) * size),\n  );\n}\n","import { AccountInfo, Connection, PublicKey } from '@solana/web3.js';\nimport { chunks } from './chunks';\n\nexport async function chunkedGetMultipleAccountInfos(\n  connection: Connection,\n  pks: string[],\n  chunkSize: number = 100,\n): Promise<Array<AccountInfo<Buffer> | null>> {\n  return (\n    await Promise.all(\n      chunks(pks, chunkSize).map((chunk) => {\n        const args = connection._buildArgs([chunk], connection.commitment, 'base64');\n        return (\n          // getMultipleAccounts is quite slow, so we use fetch directly\n          connection\n            // @ts-ignore\n            ._rpcRequest('getMultipleAccounts', args)\n            .then((item: any) => {\n              const accounts = item.result.value as Array<AccountInfo<string[]> | null>;\n              accounts.forEach((item) => {\n                if (item) {\n                  const value = item as unknown as AccountInfo<Buffer>;\n                  value.data = Buffer.from(item.data[0], item.data[1] as 'base64');\n                  value.owner = new PublicKey(value.owner);\n                }\n              });\n\n              return accounts;\n            })\n            .catch((e: any) => {\n              console.error('Failed to fetch account infos', e);\n              return chunk.map(() => null);\n            })\n        );\n      }),\n    )\n  ).flat();\n}\n","import { AccountInfo, Connection, PublicKey, TransactionInstruction } from '@solana/web3.js';\nimport { PlatformFee, QuoteMintToReferrer, TokenMintAddress } from '..';\nimport { AccountInfo as TokenAccountInfo } from '@solana/spl-token';\nimport JSBI from 'jsbi';\nimport { chunkedGetMultipleAccountInfos } from '../utils/chunkedGetMultipleAccountInfos';\n\nexport interface QuoteParams {\n  sourceMint: PublicKey;\n  destinationMint: PublicKey;\n  amount: number;\n}\n\nexport interface Quote {\n  notEnoughLiquidity: boolean;\n  minInAmount?: number;\n  minOutAmount?: number;\n  inAmount: number;\n  outAmount: number;\n  feeAmount: number;\n  feeMint: TokenMintAddress;\n  feePct: number;\n  priceImpactPct: number;\n}\n\nexport interface SwapParams {\n  sourceMint: PublicKey;\n  destinationMint: PublicKey;\n  userSourceTokenAccount: PublicKey;\n  userDestinationTokenAccount: PublicKey;\n  userTransferAuthority: PublicKey;\n  inAmount: number | null;\n  minimumOutAmount: number;\n  tokenLedger: PublicKey;\n  openOrdersAddress?: PublicKey;\n  platformFee?: PlatformFee;\n  quoteMintToReferrer?: QuoteMintToReferrer;\n}\n\nexport type AccountInfoMap = Map<string, AccountInfo<Buffer> | null>;\n\nexport interface Amm {\n  /* Label for UI usage */\n  label: string;\n  /* Unique id to recognize the AMM */\n  id: string;\n  /* Reserve token mints for the purpose of routing */\n  reserveTokenMints: PublicKey[];\n  /* State if we need to prefetch the accounts 1 time */\n  shouldPrefetch: Boolean;\n\n  getAccountsForUpdate(): PublicKey[];\n  update(accountInfoMap: AccountInfoMap): void;\n  getQuote(quoteParams: QuoteParams): Quote;\n  createSwapInstructions(swapParams: SwapParams): TransactionInstruction[];\n}\n\nexport const mapAddressToAccountInfos = (accountInfoMap: AccountInfoMap, addresses: PublicKey[]) => {\n  const accountInfos = addresses.map((address) => {\n    const accountInfo = accountInfoMap.get(address.toString());\n    if (!accountInfo) {\n      throw new Error(`Account info ${address.toBase58()} missing`);\n    }\n    return accountInfo;\n  });\n\n  return accountInfos;\n};\n\nexport const tokenAccountsToJSBIs = (tokenAccounts: TokenAccountInfo[]): JSBI[] => {\n  return tokenAccounts.map((tokenAccount) => {\n    return JSBI.BigInt(tokenAccount.amount);\n  });\n};\n\nexport const prefetchAmms = async (amms: Amm[], connection: Connection) => {\n  const accounts = amms.map((amm) => amm.getAccountsForUpdate().map((item) => item.toBase58())).flat();\n  const accountInfosMap = new Map<string, AccountInfo<Buffer>>();\n  const accountInfos = await chunkedGetMultipleAccountInfos(connection, accounts);\n\n  accountInfos.forEach((item, index) => {\n    const publicKey = accounts[index];\n    if (item) {\n      accountInfosMap.set(publicKey, item);\n    }\n  });\n\n  for (let amm of amms) {\n    amm.update(accountInfosMap);\n  }\n};\n","// Only a few hardcoded pools for now, until we query the whole lot through api\nimport { struct, nu64 } from '@solana/buffer-layout';\nimport { u64 } from '@solana/spl-token';\nimport { PublicKey } from '@solana/web3.js';\nimport { publicKey, uint128, uint64 } from '../../utils/layout';\n\ninterface AmmInfoLayoutV4 {\n  status: number;\n  nonce: number;\n  orderNum: number;\n  depth: number;\n  coinDecimals: number;\n  pcDecimals: number;\n  state: number;\n  resetFlag: number;\n  minSize: number;\n  volMaxCutRatio: number;\n  amountWaveRatio: number;\n  coinLotSize: number;\n  pcLotSize: number;\n  minPriceMultiplier: number;\n  maxPriceMultiplier: number;\n  systemDecimalsValue: number;\n  minSeparateNumerator: number;\n  minSeparateDenominator: number;\n  tradeFeeNumerator: number;\n  tradeFeeDenominator: number;\n  pnlNumerator: number;\n  pnlDenominator: number;\n  swapFeeNumerator: u64;\n  swapFeeDenominator: u64;\n  needTakePnlCoin: number;\n  needTakePnlPc: number;\n  totalPnlPc: number;\n  totalPnlCoin: number;\n  poolTotalDepositPc: u64;\n  poolTotalDepositCoin: u64;\n  swapCoinInAmount: u64;\n  swapPcOutAmount: u64;\n  swapCoin2PcFee: number;\n  swapPcInAmount: u64;\n  swapCoinOutAmount: u64;\n  swapPc2CoinFee: number;\n  poolCoinTokenAccount: PublicKey;\n  poolPcTokenAccount: PublicKey;\n  coinMintAddress: PublicKey;\n  pcMintAddress: PublicKey;\n  lpMintAddress: PublicKey;\n  ammOpenOrders: PublicKey;\n  serumMarket: PublicKey;\n  serumProgramId: PublicKey;\n  ammTargetOrders: PublicKey;\n  poolWithdrawQueue: PublicKey;\n  poolTempLpTokenAccount: PublicKey;\n  ammOwner: PublicKey;\n  pnlOwner: PublicKey;\n}\n\nexport const AMM_INFO_LAYOUT_V4 = struct<AmmInfoLayoutV4>([\n  nu64('status'),\n  nu64('nonce'),\n  nu64('orderNum'),\n  nu64('depth'),\n  nu64('coinDecimals'),\n  nu64('pcDecimals'),\n  nu64('state'),\n  nu64('resetFlag'),\n  nu64('minSize'),\n  nu64('volMaxCutRatio'),\n  nu64('amountWaveRatio'),\n  nu64('coinLotSize'),\n  nu64('pcLotSize'),\n  nu64('minPriceMultiplier'),\n  nu64('maxPriceMultiplier'),\n  nu64('systemDecimalsValue'),\n  // Fees\n  nu64('minSeparateNumerator'),\n  nu64('minSeparateDenominator'),\n  nu64('tradeFeeNumerator'),\n  nu64('tradeFeeDenominator'),\n  nu64('pnlNumerator'),\n  nu64('pnlDenominator'),\n  nu64('swapFeeNumerator'),\n  nu64('swapFeeDenominator'),\n  // OutPutData\n  nu64('needTakePnlCoin'),\n  nu64('needTakePnlPc'),\n  nu64('totalPnlPc'),\n  nu64('totalPnlCoin'),\n  uint128('poolTotalDepositPc'),\n  uint128('poolTotalDepositCoin'),\n  uint128('swapCoinInAmount'),\n  uint128('swapPcOutAmount'),\n  nu64('swapCoin2PcFee'),\n  uint128('swapPcInAmount'),\n  uint128('swapCoinOutAmount'),\n  nu64('swapPc2CoinFee'),\n\n  publicKey('poolCoinTokenAccount'),\n  publicKey('poolPcTokenAccount'),\n  publicKey('coinMintAddress'),\n  publicKey('pcMintAddress'),\n  publicKey('lpMintAddress'),\n  publicKey('ammOpenOrders'),\n  publicKey('serumMarket'),\n  publicKey('serumProgramId'),\n  publicKey('ammTargetOrders'),\n  publicKey('poolWithdrawQueue'),\n  publicKey('poolTempLpTokenAccount'),\n  publicKey('ammOwner'),\n  publicKey('pnlOwner'),\n]);\n","// https://github.com/raydium-io/raydium-ui/blob/4048286f79fc4b71c3ffbfd9095470ab0c7d3862/src/utils/liquidity.ts#L30-L82\n\nimport { Fraction, TokenSwapConstantProduct, ZERO_FRACTION } from '@jup-ag/math';\nimport { createProgramAddressSync } from '@project-serum/anchor/dist/cjs/utils/pubkey';\nimport { Market, OpenOrders } from '@project-serum/serum';\nimport { u64 } from '@solana/spl-token';\nimport { AccountInfo, PublicKey } from '@solana/web3.js';\nimport Decimal from 'decimal.js';\nimport JSBI from 'jsbi';\nimport { AccountInfoMap, Amm, mapAddressToAccountInfos, Quote, QuoteParams, SwapParams } from '../amm';\nimport { createRaydiumSwapInstruction } from '../jupiterInstruction';\nimport { AMM_INFO_LAYOUT_V4 } from './pools';\n\n// Explained here\n// https://discordapp.com/channels/813741812598439958/813750197423308820/900288485028683776\n// total_pc = amminfo.pc_vault.balance + amminfo.openorder.total_quote - amminfo.need_taken_pnl_pc\n// total_coin = amminfo.coin_vault.balance + amminfo.openorder.total_base - amminfo.need_taken_pnl_coin\n\ntype SerumMarketKeys = {\n  serumBids: PublicKey;\n  serumAsks: PublicKey;\n  serumEventQueue: PublicKey;\n  serumCoinVaultAccount: PublicKey;\n  serumPcVaultAccount: PublicKey;\n  serumVaultSigner: PublicKey;\n};\n\ntype SerumMarketKeysString = Record<keyof SerumMarketKeys, string>;\nexport class RaydiumAmm implements Amm {\n  id: string;\n  label = 'Raydium' as const;\n  shouldPrefetch = false;\n\n  coinMint: PublicKey;\n  pcMint: PublicKey;\n\n  status: number;\n  serumProgramId: PublicKey;\n  serumMarket: PublicKey;\n  ammOpenOrders: PublicKey;\n  ammTargetOrders: PublicKey;\n  poolCoinTokenAccount: PublicKey;\n  poolPcTokenAccount: PublicKey;\n\n  serumMarketKeys: SerumMarketKeys;\n\n  coinReserve: u64 | undefined;\n  pcReserve: u64 | undefined;\n\n  private feePct: Decimal;\n  private calculator: TokenSwapConstantProduct;\n\n  constructor(public ammId: PublicKey, ammAccountInfo: AccountInfo<Buffer>, params: SerumMarketKeysString) {\n    this.id = ammId.toBase58();\n    const decoded = AMM_INFO_LAYOUT_V4.decode(ammAccountInfo.data);\n\n    this.status = decoded.status;\n    this.coinMint = new PublicKey(decoded.coinMintAddress);\n    this.pcMint = new PublicKey(decoded.pcMintAddress);\n\n    this.poolCoinTokenAccount = new PublicKey(decoded.poolCoinTokenAccount);\n    this.poolPcTokenAccount = new PublicKey(decoded.poolPcTokenAccount);\n\n    this.serumProgramId = new PublicKey(decoded.serumProgramId);\n    this.serumMarket = new PublicKey(decoded.serumMarket);\n    this.ammOpenOrders = new PublicKey(decoded.ammOpenOrders);\n    this.ammTargetOrders = new PublicKey(decoded.ammTargetOrders);\n\n    this.serumMarketKeys = (Object.keys(params) as Array<keyof SerumMarketKeysString>).reduce((acc, item) => {\n      const pk = params[item];\n      if (!pk) throw new Error(`Could not find ${item} in params`);\n      acc[item] = new PublicKey(params[item]);\n      return acc;\n    }, {} as SerumMarketKeys);\n\n    const swapFeeNumerator = decoded.swapFeeNumerator;\n    const swapFeeDenominator = decoded.swapFeeDenominator;\n\n    this.feePct = new Decimal(swapFeeNumerator.toString()).div(swapFeeDenominator.toString());\n\n    this.calculator = new TokenSwapConstantProduct(\n      new Fraction(JSBI.BigInt(swapFeeNumerator), JSBI.BigInt(swapFeeDenominator)),\n      ZERO_FRACTION,\n    );\n  }\n\n  static decodeSerumMarketKeysString(\n    serumProgramId: PublicKey,\n    serumMarket: PublicKey,\n    serumMarketInfo: AccountInfo<Buffer>,\n  ): SerumMarketKeysString {\n    const decodedMarket = Market.getLayout(serumProgramId).decode(serumMarketInfo.data);\n    const serumVaultSigner = createProgramAddressSync(\n      [serumMarket.toBuffer(), decodedMarket.vaultSignerNonce.toArrayLike(Buffer, 'le', 8)],\n      serumProgramId,\n    );\n\n    return {\n      serumBids: decodedMarket.bids.toBase58(),\n      serumAsks: decodedMarket.asks.toBase58(),\n      serumEventQueue: decodedMarket.eventQueue.toBase58(),\n      serumCoinVaultAccount: decodedMarket.baseVault.toBase58(),\n      serumPcVaultAccount: decodedMarket.quoteVault.toBase58(),\n      serumVaultSigner: serumVaultSigner.toBase58(),\n    };\n  }\n\n  getAccountsForUpdate(): PublicKey[] {\n    return [this.ammId, this.poolCoinTokenAccount, this.poolPcTokenAccount, this.ammOpenOrders];\n  }\n\n  update(accountInfoMap: AccountInfoMap) {\n    const [ammAccountInfo, poolCoinTokenAccountInfo, poolPcTokenAccountInfo, ammOpenOrdersAccountInfo] =\n      mapAddressToAccountInfos(accountInfoMap, this.getAccountsForUpdate());\n\n    const [coinAmount, pcAmount] = [\n      RaydiumAmm.tokenAmountAccessor(poolCoinTokenAccountInfo),\n      RaydiumAmm.tokenAmountAccessor(poolPcTokenAccountInfo),\n    ];\n\n    const openOrders = OpenOrders.fromAccountInfo(\n      this.ammOpenOrders,\n      ammOpenOrdersAccountInfo,\n      ammOpenOrdersAccountInfo.owner,\n    );\n\n    const decoded = AMM_INFO_LAYOUT_V4.decode(ammAccountInfo.data);\n\n    this.coinReserve = coinAmount.add(openOrders.baseTokenTotal).sub(new u64(String(decoded.needTakePnlCoin)));\n\n    this.pcReserve = pcAmount.add(openOrders.quoteTokenTotal).sub(new u64(String(decoded.needTakePnlPc)));\n  }\n\n  private static tokenAmountAccessor(tokenAccountInfo: AccountInfo<Buffer>): u64 {\n    return u64.fromBuffer(tokenAccountInfo.data.slice(64, 64 + 8));\n  }\n\n  getQuote({ sourceMint, amount }: QuoteParams): Quote {\n    const { coinReserve, pcReserve } = this;\n    if (!coinReserve || !pcReserve) {\n      throw new Error('Pool token accounts balances not refreshed or empty');\n    }\n\n    const outputIndex = this.coinMint.equals(sourceMint) ? 1 : 0;\n    const result = this.calculator.exchange(\n      [JSBI.BigInt(coinReserve), JSBI.BigInt(pcReserve)],\n      JSBI.BigInt(amount),\n      outputIndex,\n    );\n\n    return {\n      notEnoughLiquidity: false,\n      inAmount: amount,\n      outAmount: JSBI.toNumber(result.expectedOutputAmount),\n      feeAmount: JSBI.toNumber(result.fees),\n      feeMint: sourceMint.toBase58(),\n      feePct: this.feePct.toNumber(),\n      priceImpactPct: result.priceImpact.toNumber(),\n    };\n  }\n\n  createSwapInstructions(swapParams: SwapParams) {\n    return [\n      createRaydiumSwapInstruction({\n        raydiumAmm: this,\n        ...swapParams,\n      }),\n    ];\n  }\n\n  get reserveTokenMints() {\n    return [this.coinMint, this.pcMint];\n  }\n}\n","import { ZERO } from '@jup-ag/math';\nimport { Market, Orderbook } from '@project-serum/serum';\nimport { PublicKey } from '@solana/web3.js';\nimport BN from 'bn.js';\nimport Decimal from 'decimal.js';\nimport JSBI from 'jsbi';\n\nconst TAKER_FEE_PCT = 0.0004;\nconst STABLE_TAKER_FEE_PCT = 0.0001;\n\n// Stable markets are hardcoded in the program\nconst STABLE_MARKET_ADDRESSES = [\n  '77quYg4MGneUdjgXCunt9GgM1usmrxKY31twEy3WHwcS', // USDT/USDC\n  '5cLrMai1DsLRYc1Nio9qMTicsWtvzjzZfJPXyAoF4t1Z', // mSOL/SOL\n  'EERNEEnBqdGzBS8dd46wwNY5F2kwnaCQ3vsq2fNKGogZ', // UST/USDC\n  '8sFf9TW3KzxLiBXcDcjAxqabEsRroo4EiRr3UG1xbJ9m', // UST/USDT\n  '2iDSTGhjJEiRxNaLF27CY6daMYPs5hgYrP2REHd5YD62', // stSOL/SOL\n];\n\ninterface IMarketMeta {\n  /** buy or sell side */\n  side: 'buy' | 'sell';\n  /** indicate that your order is too huge for the market */\n  notEnoughLiquidity: boolean;\n  /** minimum in amount and the corresponding out amount */\n  minimum: {\n    in: number;\n    out: number;\n  };\n  /** amount in taken for the trade */\n  inAmount: number;\n  /** the amount out for the trade */\n  outAmount: number;\n  /** the total fee amount */\n  feeAmount: number;\n  /** price impact percentage */\n  priceImpactPct: number;\n  /** fee percentage */\n  feePct: number;\n}\n\n// Provides swap like out amount, with slippage and corresponding minimum amount out\nexport function getOutAmountMeta({\n  market,\n  asks,\n  bids,\n  fromAmount,\n  fromMint,\n  toMint,\n}: {\n  market: Market;\n  asks: Orderbook;\n  bids: Orderbook;\n  fromMint: PublicKey;\n  toMint: PublicKey;\n  fromAmount: number;\n}) {\n  const takerFeePct = STABLE_MARKET_ADDRESSES.includes(market.address.toBase58())\n    ? STABLE_TAKER_FEE_PCT\n    : TAKER_FEE_PCT;\n\n  if (fromMint.equals(market.quoteMintAddress) && toMint.equals(market.baseMintAddress)) {\n    // buy\n    return forecastBuy(market, asks, fromAmount, takerFeePct);\n  } else {\n    return forecastSell(market, bids, fromAmount, takerFeePct);\n  }\n}\n\nexport function forecastBuy(market: Market, orderbook: Orderbook, pcIn: number, takerFeePct: number): IMarketMeta {\n  let coinOut = JSBI.BigInt(0);\n  let bestPrice: JSBI = JSBI.BigInt(0);\n  let worstPrice: JSBI = JSBI.BigInt(0);\n  // total base price\n  let totalCost = JSBI.BigInt(0);\n  let totalCoins = JSBI.BigInt(0);\n\n  // might be decimal, e.g: 0.001\n  const quoteSizeLots = market.quoteSizeLotsToNumber(new BN(1));\n\n  // Serum buy order take fee in quote tokens\n  let availablePc = quoteSizeLots ? JSBI.BigInt(Math.floor(pcIn / (1 + takerFeePct) / quoteSizeLots)) : ZERO;\n\n  const baseSizeLots = JSBI.BigInt(market.baseSizeLotsToNumber(new BN(1)).toString());\n\n  for (let [lotPrice, lotQuantity] of getL2(orderbook)) {\n    if (JSBI.equal(bestPrice, ZERO)) {\n      bestPrice = lotPrice;\n    }\n\n    worstPrice = lotPrice;\n\n    const orderCoinAmount = JSBI.multiply(lotQuantity, baseSizeLots);\n    const orderPcAmount = JSBI.multiply(lotQuantity, lotPrice);\n\n    totalCoins = JSBI.add(totalCoins, orderCoinAmount);\n\n    if (JSBI.greaterThanOrEqual(orderPcAmount, availablePc)) {\n      const numberLotsPurchasable = JSBI.divide(availablePc, lotPrice);\n\n      totalCost = JSBI.add(totalCost, JSBI.multiply(lotPrice, numberLotsPurchasable));\n      coinOut = JSBI.add(coinOut, JSBI.multiply(baseSizeLots, numberLotsPurchasable));\n      availablePc = ZERO;\n      break;\n    } else {\n      totalCost = JSBI.add(totalCost, JSBI.multiply(lotPrice, lotQuantity));\n      coinOut = JSBI.add(coinOut, orderCoinAmount);\n      availablePc = JSBI.subtract(availablePc, orderPcAmount);\n    }\n  }\n\n  const bestPriceDecimal = new Decimal(bestPrice.toString());\n  const worstPriceDecimal = new Decimal(worstPrice.toString());\n\n  const priceImpactPct = worstPriceDecimal.sub(bestPriceDecimal).div(bestPriceDecimal).toNumber();\n\n  const bestPriceSizeLots = priceLotsToDecimal(market, new BN(bestPrice.toString()));\n  const totalCostSizeLots = priceLotsToDecimal(market, new BN(totalCost.toString()));\n\n  return {\n    side: 'buy',\n    notEnoughLiquidity: JSBI.lessThanOrEqual(totalCoins, coinOut),\n    minimum: {\n      in: new Decimal(bestPriceSizeLots.toString())\n        .mul(baseSizeLots.toString())\n        .mul(1 + takerFeePct)\n        .ceil()\n        .toNumber(),\n      out: JSBI.toNumber(baseSizeLots),\n    },\n    inAmount: new Decimal(totalCostSizeLots.toString())\n      .mul(baseSizeLots.toString())\n      .mul(1 + takerFeePct)\n      .ceil()\n      .toNumber(),\n    outAmount: JSBI.toNumber(coinOut),\n    feeAmount: new Decimal(totalCost.toString()).mul(takerFeePct).toNumber(),\n    priceImpactPct,\n    feePct: takerFeePct,\n  };\n}\n\nexport function forecastSell(market: Market, orderbook: Orderbook, coinIn: number, takerFeePct: number): IMarketMeta {\n  let pcOut = JSBI.BigInt(0);\n  let bestPrice = JSBI.BigInt(0);\n  let worstPrice = JSBI.BigInt(0);\n  let totalCoin = JSBI.BigInt(0);\n  let availableCoin = JSBI.BigInt(coinIn);\n  let inAmount = JSBI.BigInt(0);\n\n  const baseSizeLots = JSBI.BigInt(market.baseSizeLotsToNumber(new BN(1)));\n  const quoteSizeLots = JSBI.BigInt(market.quoteSizeLotsToNumber(new BN(1)));\n\n  for (const [lotPrice, lotQuantity] of getL2(orderbook)) {\n    if (JSBI.equal(bestPrice, ZERO)) {\n      bestPrice = lotPrice;\n    }\n\n    worstPrice = lotPrice;\n\n    const orderCoinAmount = JSBI.multiply(baseSizeLots, lotQuantity);\n    const orderPcAmount = JSBI.multiply(lotQuantity, JSBI.multiply(lotPrice, quoteSizeLots));\n    totalCoin = JSBI.add(totalCoin, orderCoinAmount);\n\n    if (JSBI.greaterThanOrEqual(orderCoinAmount, availableCoin)) {\n      const numberLotsCanSell = JSBI.divide(availableCoin, baseSizeLots);\n      const totalCoinAmountToSell = JSBI.multiply(numberLotsCanSell, lotPrice);\n      pcOut = JSBI.add(pcOut, JSBI.multiply(totalCoinAmountToSell, quoteSizeLots));\n      availableCoin = JSBI.subtract(availableCoin, totalCoinAmountToSell);\n      inAmount = JSBI.add(inAmount, JSBI.multiply(numberLotsCanSell, baseSizeLots));\n      break;\n    } else {\n      pcOut = JSBI.add(pcOut, orderPcAmount);\n      availableCoin = JSBI.subtract(availableCoin, orderCoinAmount);\n      inAmount = JSBI.add(inAmount, orderCoinAmount);\n    }\n  }\n\n  let pcOutInteger = new Decimal(pcOut.toString())\n    .mul(1 - takerFeePct)\n    .floor()\n    .toNumber();\n\n  const bestPriceDecimal = priceLotsToDecimal(market, new BN(bestPrice.toString()));\n  const worstPriceDecimal = priceLotsToDecimal(market, new BN(worstPrice.toString()));\n\n  const priceImpactPct = bestPriceDecimal.minus(worstPriceDecimal).div(bestPriceDecimal).toNumber();\n\n  return {\n    side: 'sell',\n    notEnoughLiquidity: JSBI.greaterThan(JSBI.BigInt(coinIn), totalCoin),\n    minimum: {\n      in: JSBI.toNumber(baseSizeLots),\n      out: bestPriceDecimal\n        .mul(JSBI.toNumber(baseSizeLots))\n        .mul(1 - takerFeePct)\n        .floor()\n        .toNumber(),\n    },\n    inAmount: JSBI.toNumber(inAmount),\n    outAmount: pcOutInteger,\n    feeAmount: new Decimal(JSBI.toNumber(pcOut)).mul(takerFeePct).round().toNumber(),\n    priceImpactPct,\n    feePct: takerFeePct,\n  };\n}\n\nexport function* getL2(orderbook: Orderbook): Generator<[JSBI, JSBI]> {\n  const descending = orderbook.isBids;\n  for (const { key, quantity } of orderbook.slab.items(descending)) {\n    const price = JSBI.BigInt(key.ushrn(64).toString());\n    yield [price, JSBI.BigInt(quantity.toString())];\n  }\n}\n\nfunction divideBnToDecimal(numerator: BN, denominator: BN): Decimal {\n  const quotient = new Decimal(numerator.div(denominator).toString());\n  const rem = numerator.umod(denominator);\n  const gcd = rem.gcd(denominator);\n  return quotient.add(new Decimal(rem.div(gcd).toString()).div(new Decimal(denominator.div(gcd).toString())));\n}\n\nfunction priceLotsToDecimal(market: Market, price: BN) {\n  // @ts-expect-error _decoded\n  const baseLotSize = market._decoded.baseLotSize;\n  if (baseLotSize.isZero()) return new Decimal(0);\n\n  return divideBnToDecimal(\n    // @ts-expect-error _decoded _baseSplTokenMultiplier is private\n    price.mul(market._decoded.quoteLotSize).mul(market._baseSplTokenMultiplier),\n    // @ts-expect-error _quoteSplTokenMultiplier is private\n    baseLotSize.mul(market._quoteSplTokenMultiplier),\n  );\n}\n","import { Orderbook } from '@project-serum/serum';\nimport { PublicKey } from '@solana/web3.js';\nimport { AccountInfoMap, Amm, mapAddressToAccountInfos, Quote, QuoteParams, SwapParams } from '../amm';\nimport { createSerumSwapInstruction } from '../jupiterInstruction';\nimport { SerumMarket } from '../market';\nimport { getL2, getOutAmountMeta } from './market';\n\nexport class SerumAmm implements Amm {\n  id: string;\n  label = 'Serum' as const;\n  shouldPrefetch = false;\n\n  private _orderbooks: { asks: Orderbook; bids: Orderbook } | undefined;\n\n  constructor(public market: SerumMarket) {\n    this.id = market.address.toBase58();\n  }\n\n  get orderbooks() {\n    return this._orderbooks;\n  }\n\n  static getL2 = getL2;\n\n  getAccountsForUpdate(): PublicKey[] {\n    return [this.market.asksAddress, this.market.bidsAddress];\n  }\n\n  update(accountInfoMap: AccountInfoMap): void {\n    const [asksAccountInfo, bidsAccountInfo] = mapAddressToAccountInfos(accountInfoMap, this.getAccountsForUpdate());\n\n    const asks = Orderbook.decode(this.market, asksAccountInfo.data);\n    const bids = Orderbook.decode(this.market, bidsAccountInfo.data);\n\n    this._orderbooks = {\n      asks,\n      bids,\n    };\n  }\n\n  getQuote({ sourceMint, destinationMint, amount }: QuoteParams): Quote {\n    if (!this.orderbooks) {\n      throw new Error('Failed to find orderbooks');\n    }\n\n    const outAmountMeta = getOutAmountMeta({\n      market: this.market,\n      asks: this.orderbooks.asks,\n      bids: this.orderbooks.bids,\n      fromMint: sourceMint,\n      toMint: destinationMint,\n      fromAmount: amount,\n    });\n\n    return {\n      notEnoughLiquidity: outAmountMeta.notEnoughLiquidity,\n      minInAmount: outAmountMeta.minimum.in,\n      minOutAmount: outAmountMeta.minimum.out,\n      inAmount: outAmountMeta.inAmount,\n      outAmount: outAmountMeta.outAmount,\n      feeAmount: outAmountMeta.feeAmount,\n      feeMint: this.market.quoteMintAddress.toBase58(),\n      feePct: outAmountMeta.feePct,\n      priceImpactPct: outAmountMeta.priceImpactPct,\n    };\n  }\n\n  createSwapInstructions(swapParams: SwapParams) {\n    if (!swapParams.openOrdersAddress) {\n      throw new Error('Missing open orders');\n    }\n\n    return [\n      createSerumSwapInstruction({\n        market: this.market,\n        openOrdersAddress: swapParams.openOrdersAddress,\n        referrer: swapParams?.quoteMintToReferrer?.get(this.market.quoteMintAddress.toBase58()),\n        ...swapParams,\n      }),\n    ];\n  }\n\n  get reserveTokenMints() {\n    return [this.market.baseMintAddress, this.market.quoteMintAddress];\n  }\n}\n","import { PublicKey } from '@solana/web3.js';\nimport { getTwoPermutations } from '../../utils/getTwoPermutations';\nimport { AccountInfoMap, Amm, Quote, QuoteParams, SwapParams } from '../amm';\nimport { RaydiumAmm } from '../raydium/raydiumAmm';\nimport { createRiskCheckAndFeeInstruction, createSetTokenLedgerInstruction } from '../jupiterInstruction';\nimport { SerumAmm } from '../serum/serumAmm';\nimport { SerumMarket } from '../market';\nimport { CykuraAmm } from '../cykura/cykuraAmm';\n\ninterface SplitSolution {\n  outAmount: number;\n  portion: number;\n  firstQuote: Quote | undefined;\n  secondQuote: Quote | undefined;\n}\n\nfunction isSplitSupported(firstAmm: Amm, secondAmm: Amm) {\n  if (\n    (firstAmm instanceof SerumAmm && secondAmm instanceof RaydiumAmm) ||\n    (firstAmm instanceof RaydiumAmm && secondAmm instanceof SerumAmm) ||\n    (firstAmm instanceof SerumAmm && secondAmm instanceof SerumAmm)\n  ) {\n    return false;\n  }\n  return true;\n}\n\nfunction requiresSplitSetup(firstAmm: Amm, secondAmm: Amm): boolean {\n  if (firstAmm instanceof RaydiumAmm || secondAmm instanceof RaydiumAmm) {\n    return true;\n  } else if (firstAmm instanceof SerumAmm && secondAmm instanceof SerumAmm) {\n    return true;\n  }\n  return false;\n}\n\n// Create an iteration to quote with a stepped split\nexport class SplitTradeAmm implements Amm {\n  shouldSplitSetup: boolean;\n  market: SerumMarket | null;\n  shouldPrefetch = false;\n  private portion1: number = 0;\n  private portion2: number = 0;\n\n  constructor(private firstAmm: Amm, private secondAmm: Amm, public reserveTokenMints: PublicKey[]) {\n    this.shouldSplitSetup = requiresSplitSetup(firstAmm, secondAmm);\n    this.market =\n      firstAmm instanceof SerumAmm ? firstAmm.market : secondAmm instanceof SerumAmm ? secondAmm.market : null;\n  }\n\n  static create(firstAmm: Amm, secondAmm: Amm) {\n    if (!isSplitSupported(firstAmm, secondAmm)) return;\n\n    const firstAmmTwoPermutations = getTwoPermutations(firstAmm.reserveTokenMints);\n    const secondAmmTwoPermutations = getTwoPermutations(secondAmm.reserveTokenMints);\n\n    for (const firstAmmTwoPermutation of firstAmmTwoPermutations) {\n      for (const secondAmmTwoPermutation of secondAmmTwoPermutations) {\n        if (firstAmmTwoPermutation.every((value, index) => value.equals(secondAmmTwoPermutation[index]))) {\n          return new SplitTradeAmm(firstAmm, secondAmm, firstAmmTwoPermutation);\n        }\n      }\n    }\n  }\n\n  get id() {\n    return `${this.firstAmm.id}-${this.secondAmm.id}`;\n  }\n\n  get label() {\n    const labelWithPortions = [\n      { label: this.firstAmm.label, portion: this.portion1 },\n      { label: this.secondAmm.label, portion: this.portion2 },\n    ].sort((a, b) => b.portion - a.portion);\n\n    return labelWithPortions.map(({ label, portion }) => `${label} (${portion}%)`).join(' + ');\n  }\n\n  getAccountsForUpdate() {\n    return [];\n  }\n\n  update(_accountInfoMap: AccountInfoMap) {\n    // Underlying amms are updated\n  }\n\n  getQuote(quoteParams: QuoteParams): Quote {\n    const sourceMintString = quoteParams.sourceMint.toBase58();\n    const amount = quoteParams.amount;\n    // Portion in % directly to please the UI\n    let bestSolution: SplitSolution = {\n      outAmount: 0,\n      portion: 0,\n      firstQuote: undefined,\n      secondQuote: undefined,\n    };\n\n    // Increase portion until 100\n    for (let p = 100; (p -= 5); p > 0) {\n      const firstAmount = Math.floor((amount * p) / 100);\n      const secondAmount = amount - firstAmount;\n\n      const firstQuote = this.firstAmm.getQuote({\n        ...quoteParams,\n        amount: firstAmount,\n      });\n      const secondQuote = this.secondAmm.getQuote({\n        ...quoteParams,\n        amount: secondAmount,\n      });\n      const outAmount = firstQuote.outAmount + secondQuote.outAmount;\n\n      if (outAmount < bestSolution.outAmount) {\n        break;\n      }\n\n      bestSolution = {\n        outAmount,\n        portion: p,\n        firstQuote,\n        secondQuote,\n      };\n    }\n\n    if (!bestSolution.firstQuote || !bestSolution.secondQuote) {\n      throw new Error('Unreachable: There was no better solution than getting 0 outAmount');\n    }\n\n    const { outAmount, portion, firstQuote, secondQuote } = bestSolution;\n    const portion1 = portion;\n    const portion2 = 100 - portion1;\n\n    // For UI display\n    this.portion1 = portion1;\n    this.portion2 = portion2;\n\n    let firstAmmFee = {\n      amount: firstQuote.feeAmount,\n      mint: firstQuote.feeMint,\n    };\n    let secondAmmFee = {\n      amount: secondQuote.feeAmount,\n      mint: secondQuote.feeMint,\n    };\n\n    if (firstAmmFee.mint !== secondAmmFee.mint) {\n      // Then we convert destinationMint fee into a sourceMint, to please the current data structure\n      // This will lead to inexact fees but this doesn't affect the user minimum out amount\n      if (firstAmmFee.mint !== sourceMintString) {\n        firstAmmFee = {\n          amount: Math.floor((firstAmmFee.amount * amount * portion1) / 100 / bestSolution.outAmount),\n          mint: sourceMintString,\n        };\n      }\n      if (secondAmmFee.mint !== sourceMintString) {\n        secondAmmFee = {\n          amount: Math.floor((secondAmmFee.amount * amount * portion2) / 100 / bestSolution.outAmount),\n          mint: sourceMintString,\n        };\n      }\n    }\n\n    const feePct = (portion1 * firstQuote.feePct + portion2 * secondQuote.feePct) / 100;\n    const priceImpactPct = (portion1 * firstQuote.priceImpactPct + portion2 * secondQuote.priceImpactPct) / 100;\n\n    // Not sure about the relevance on minInAmount and minOutAmount in this case\n    const minInAmount =\n      firstQuote.minInAmount || secondQuote.minInAmount\n        ? (firstQuote.minInAmount ?? 0) + (secondQuote.minInAmount ?? 0)\n        : undefined;\n    const minOutAmount =\n      firstQuote.minOutAmount || secondQuote.minOutAmount\n        ? (firstQuote.minOutAmount ?? 0) + (secondQuote.minOutAmount ?? 0)\n        : undefined;\n    return {\n      notEnoughLiquidity: false,\n      inAmount: quoteParams.amount,\n      outAmount: outAmount,\n      minInAmount,\n      minOutAmount,\n      feeAmount: firstAmmFee.amount + secondAmmFee.amount,\n      feeMint: firstAmmFee.mint, // Guaranteed identical mint at this point\n      feePct,\n      priceImpactPct,\n    };\n  }\n\n  createSwapInstructions(swapParams: SwapParams) {\n    const inAmount = swapParams.inAmount;\n    if (inAmount === null) {\n      throw new Error('Split trade cannot be used with a null inAmount');\n    }\n\n    // We rely on the fact that this.portion1 is set, what if it isn't?\n    const firstAmount = Math.floor((inAmount * this.portion1) / 100);\n    const secondAmount = inAmount - firstAmount;\n\n    return [\n      ...this.firstAmm.createSwapInstructions({\n        ...swapParams,\n        inAmount: firstAmount,\n        minimumOutAmount: 0,\n        platformFee: undefined,\n      }),\n      ...this.secondAmm.createSwapInstructions({\n        ...swapParams,\n        inAmount: secondAmount,\n        minimumOutAmount: 0,\n        platformFee: undefined,\n      }),\n      createRiskCheckAndFeeInstruction(\n        swapParams.userDestinationTokenAccount,\n        swapParams.userTransferAuthority,\n        swapParams.minimumOutAmount,\n        swapParams.tokenLedger,\n        swapParams.platformFee,\n      ),\n    ];\n  }\n}\n","import { Market as SerumMarket } from '@project-serum/serum';\nimport { PublicKey } from '@solana/web3.js';\nimport { StableSwap } from '@saberhq/stableswap-sdk';\nimport { SaberAddDecimalsAmm } from './saber/saberAddDecimalsAmm';\nimport { SplitTradeAmm } from './split-trade/splitTradeAmm';\nimport { RaydiumAmm } from './raydium/raydiumAmm';\nimport { SerumAmm } from './serum/serumAmm';\nimport { Amm } from './amm';\n\nexport interface Fee {\n  amount: number;\n  mint: string;\n  pct: number;\n}\n\nexport { SerumMarket, StableSwap };\n\nexport interface MarketInfo {\n  amm: Amm; //name: string, // pair for serum, pool name for mer pool\n  inputMint: PublicKey;\n  outputMint: PublicKey;\n  minInAmount?: number;\n  minOutAmount?: number;\n  inAmount: number;\n  outAmount: number;\n  notEnoughLiquidity: boolean;\n  priceImpactPct: number;\n  lpFee: Fee;\n  platformFee: Fee;\n}\n\n// This is to check if the two markets are supported by the aggregator\nexport const isValidRoute = (ammA: Amm, ammB: Amm) => {\n  // dont match the same amm together\n  if (ammA.id === ammB.id) {\n    return false;\n  }\n  // don't show decimal as input or output\n  else if (ammA instanceof SaberAddDecimalsAmm && ammB instanceof SaberAddDecimalsAmm) {\n    return false;\n  } else if (ammA instanceof SplitTradeAmm || ammB instanceof SplitTradeAmm) {\n    return false;\n  }\n\n  return true;\n};\n\nexport function isSerumAndRaydium(marketInfos: MarketInfo[]) {\n  if (marketInfos.length < 2) return false;\n\n  const [firstAmm, secondAmm] = marketInfos.map((mi) => mi.amm);\n\n  return (\n    (firstAmm instanceof RaydiumAmm && secondAmm instanceof SerumAmm) ||\n    (firstAmm instanceof SerumAmm && secondAmm instanceof RaydiumAmm)\n  );\n}\n","import { StableSwap } from '@saberhq/stableswap-sdk';\nimport { PublicKey } from '@solana/web3.js';\nimport { Fraction, ONE, Stable, TWO } from '@jup-ag/math';\nimport JSBI from 'jsbi';\nimport Decimal from 'decimal.js';\nimport {\n  AccountInfoMap,\n  Amm,\n  mapAddressToAccountInfos,\n  Quote,\n  QuoteParams,\n  tokenAccountsToJSBIs,\n  SwapParams,\n} from '../amm';\nimport { createSaberSwapInstruction } from '../jupiterInstruction';\nimport { deserializeAccount } from '@mercurial-finance/optimist';\nimport { AccountInfo } from '@solana/spl-token';\n\nexport class SaberAmm implements Amm {\n  id: string;\n  label = 'Saber' as const;\n  shouldPrefetch = false;\n  private tokenAccounts: AccountInfo[] = [];\n  private calculator: Stable;\n\n  constructor(private stableSwap: StableSwap) {\n    this.id = stableSwap.config.swapAccount.toBase58();\n    this.calculator = new Stable(\n      TWO,\n      JSBI.BigInt(this.stableSwap.state.targetAmpFactor.toString()),\n      [ONE, ONE], // TODO: How to get the token decimal?\n      new Fraction(this.stableSwap.state.fees.trade.numerator, this.stableSwap.state.fees.trade.denominator),\n    );\n  }\n\n  getAccountsForUpdate(): PublicKey[] {\n    return [this.stableSwap.state.tokenA.reserve, this.stableSwap.state.tokenB.reserve];\n  }\n\n  update(accountInfoMap: AccountInfoMap) {\n    let tokenAccountInfos = mapAddressToAccountInfos(accountInfoMap, this.getAccountsForUpdate());\n\n    this.tokenAccounts = tokenAccountInfos.map((info) => {\n      const tokenAccount = deserializeAccount(info.data);\n      if (!tokenAccount) {\n        throw new Error('Invalid token account data');\n      }\n      return tokenAccount;\n    });\n  }\n\n  getQuote({ sourceMint, destinationMint, amount }: QuoteParams): Quote {\n    if (this.tokenAccounts.length === 0) {\n      throw new Error('Unable to fetch accounts for specified tokens.');\n    }\n\n    const feePct = new Decimal(this.stableSwap.state.fees.trade.asFraction.toFixed(4));\n\n    const [inputIndex, outputIndex] = this.tokenAccounts[0].mint.equals(sourceMint) ? [0, 1] : [1, 0];\n\n    const result = this.calculator.exchange(\n      tokenAccountsToJSBIs(this.tokenAccounts),\n      JSBI.BigInt(amount),\n      inputIndex,\n      outputIndex,\n    );\n\n    return {\n      notEnoughLiquidity: false,\n      inAmount: amount,\n      outAmount: JSBI.toNumber(result.expectedOutputAmount),\n      feeAmount: JSBI.toNumber(result.fees),\n      feeMint: destinationMint.toBase58(),\n      feePct: feePct.toNumber(),\n      priceImpactPct: result.priceImpact.toNumber(),\n    };\n  }\n\n  createSwapInstructions(swapParams: SwapParams) {\n    return [\n      createSaberSwapInstruction({\n        stableSwap: this.stableSwap,\n        ...swapParams,\n      }),\n    ];\n  }\n\n  get reserveTokenMints() {\n    return [this.stableSwap.state.tokenA.mint, this.stableSwap.state.tokenB.mint];\n  }\n}\n","import { u64 } from '@solana/spl-token';\nimport Decimal from 'decimal.js';\n\nconst ZERO = new u64(0);\n\nexport class Percentage {\n  readonly numerator: u64;\n  readonly denominator: u64;\n\n  constructor(numerator: u64, denominator: u64) {\n    this.numerator = numerator;\n    this.denominator = denominator;\n  }\n\n  public static fromDecimal(number: Decimal): Percentage {\n    return Percentage.fromFraction(number.toDecimalPlaces(1).mul(10).toNumber(), 1000);\n  }\n\n  public static fromFraction(numerator: u64 | number, denominator: u64 | number): Percentage {\n    const num = typeof numerator === 'number' ? new u64(numerator.toString()) : numerator;\n    const denom = typeof denominator === 'number' ? new u64(denominator.toString()) : denominator;\n    return new Percentage(num, denom);\n  }\n\n  public toString = (): string => {\n    return `${this.numerator.toString()}/${this.denominator.toString()}`;\n  };\n\n  public toDecimal() {\n    if (this.denominator.eq(ZERO)) {\n      return new Decimal(0);\n    }\n    return new Decimal(this.numerator.toString()).div(new Decimal(this.denominator.toString()));\n  }\n\n  public add(p2: Percentage): Percentage {\n    const denomGcd = this.denominator.gcd(p2.denominator);\n    const denomLcm = this.denominator.div(denomGcd).mul(p2.denominator);\n\n    const p1DenomAdjustment = denomLcm.div(this.denominator);\n    const p2DenomAdjustment = denomLcm.div(p2.denominator);\n\n    const p1NumeratorAdjusted = this.numerator.mul(p1DenomAdjustment);\n    const p2NumeratorAdjusted = p2.numerator.mul(p2DenomAdjustment);\n\n    const newNumerator = p1NumeratorAdjusted.add(p2NumeratorAdjusted);\n\n    return new Percentage(new u64(newNumerator.toString()), new u64(denomLcm.toString()));\n  }\n}\n","import { struct, blob, u8, Structure } from '@solana/buffer-layout';\nimport { u64 } from '@solana/spl-token';\nimport { AccountInfo, PublicKey } from '@solana/web3.js';\nimport { ALDRIN_SWAP_V2_PROGRAM_ID } from '../../constants';\nimport { publicKey, rustEnum, uint64 } from '../../utils/layout';\nimport { Percentage } from './percentage';\n\ntype FeeStructure = {\n  traderFee: Percentage;\n  ownerFee: Percentage;\n};\n\ninterface FeeLayout {\n  tradeFeeNumerator: u64;\n  tradeFeeDenominator: u64;\n  ownerTradeFeeNumerator: u64;\n  ownerTradeFeeDenominator: u64;\n  ownerWithdrawFeeNumerator: u64;\n  ownerWithdrawFeeDenominator: u64;\n}\n\n// https://github.com/aldrin-exchange/aldrin-sdk/blob/78527e3adfc02e186956f420b5083fa0950e7263/src/pools/layout.ts\nconst FEES_LAYOUT = struct<FeeLayout>(\n  [\n    uint64('tradeFeeNumerator'),\n    uint64('tradeFeeDenominator'),\n    uint64('ownerTradeFeeNumerator'),\n    uint64('ownerTradeFeeDenominator'),\n    uint64('ownerWithdrawFeeNumerator'),\n    uint64('ownerWithdrawFeeDenominator'),\n  ],\n  'fees',\n);\n\nconst POOL_FIELDS_COMMON = [\n  blob(8, 'padding'),\n  publicKey('lpTokenFreezeVault'),\n  publicKey('poolMint'),\n  publicKey('baseTokenVault'),\n  publicKey('baseTokenMint'),\n  publicKey('quoteTokenVault'),\n  publicKey('quoteTokenMint'),\n  publicKey('poolSigner'),\n  u8('poolSignerNonce'),\n  publicKey('authority'),\n  publicKey('initializerAccount'),\n  publicKey('feeBaseAccount'),\n  publicKey('feeQuoteAccount'),\n  publicKey('feePoolTokenAccount'),\n  FEES_LAYOUT,\n];\n\ninterface PoolLayout {\n  padding: any;\n  lpTokenFreezeVault: PublicKey;\n  poolMint: PublicKey;\n  baseTokenVault: PublicKey;\n  baseTokenMint: PublicKey;\n  quoteTokenVault: PublicKey;\n  quoteTokenMint: PublicKey;\n  poolSigner: PublicKey;\n  poolSignerNonce: number;\n  authority: PublicKey;\n  initializerAccount: PublicKey;\n  feeBaseAccount: PublicKey;\n  feeQuoteAccount: PublicKey;\n  feePoolTokenAccount: PublicKey;\n  fees: FeeLayout;\n}\n\nexport const POOL_LAYOUT = struct<PoolLayout>(POOL_FIELDS_COMMON);\n\ninterface PoolV2Layout extends PoolLayout {\n  curveType: number;\n  curve: PublicKey;\n}\n\nexport const POOL_V2_LAYOUT = struct<PoolV2Layout>([...POOL_FIELDS_COMMON, u8('curveType'), publicKey('curve')]);\n\ninterface StableCurveLayout {\n  padding: any;\n  amp: u64;\n}\n\nexport const STABLE_CURVE_LAYOUT = struct<StableCurveLayout>([blob(8, 'padding'), uint64('amp')]);\n\ninterface SwapInstructionLayout {\n  instruction: any;\n  tokens: u64;\n  minTokens: u64;\n  side: 'bid' | 'ask';\n}\n\nexport const SWAP_INSTRUCTION_LAYOUT = struct<SwapInstructionLayout>([\n  blob(8, 'instruction'),\n  uint64('tokens'),\n  uint64('minTokens'),\n  rustEnum([new Structure([], 'bid'), new Structure([], 'ask')], 'side'),\n]);\n\nexport function accountInfoToAldrinPoolState(address: PublicKey, accountInfo: AccountInfo<Buffer>): AldrinPoolState {\n  const isV2 = accountInfo.owner.equals(ALDRIN_SWAP_V2_PROGRAM_ID) ? true : false;\n\n  const decoded: PoolV2Layout | PoolLayout = (isV2 ? POOL_V2_LAYOUT : POOL_LAYOUT).decode(accountInfo.data) as\n    | PoolV2Layout\n    | PoolLayout;\n\n  const curveObject = 'curveType' in decoded ? { curveType: decoded.curveType, curve: decoded.curve } : {};\n\n  return {\n    isV2,\n    address,\n    poolMint: decoded.poolMint,\n    baseTokenVault: decoded.baseTokenVault,\n    baseTokenMint: decoded.baseTokenMint,\n    quoteTokenVault: decoded.quoteTokenVault,\n    quoteTokenMint: decoded.quoteTokenMint,\n    poolSigner: decoded.poolSigner,\n    feeBaseAccount: decoded.feeBaseAccount,\n    feeQuoteAccount: decoded.feeQuoteAccount,\n    feePoolTokenAccount: decoded.feePoolTokenAccount,\n    fees: {\n      traderFee: Percentage.fromFraction(decoded.fees.tradeFeeNumerator, decoded.fees.tradeFeeDenominator),\n      ownerFee: Percentage.fromFraction(decoded.fees.ownerTradeFeeNumerator, decoded.fees.ownerTradeFeeDenominator),\n    },\n    ...curveObject,\n  };\n}\n\nexport interface AldrinPoolState {\n  isV2: Boolean;\n  address: PublicKey;\n  poolMint: PublicKey;\n  baseTokenVault: PublicKey;\n  baseTokenMint: PublicKey;\n  quoteTokenVault: PublicKey;\n  quoteTokenMint: PublicKey;\n  poolSigner: PublicKey;\n  feeBaseAccount: PublicKey;\n  feeQuoteAccount: PublicKey;\n  feePoolTokenAccount: PublicKey;\n  fees: FeeStructure;\n  curveType?: number;\n  curve?: PublicKey;\n}\n","import { Fraction, TokenSwapConstantProduct, TokenSwapStable } from '@jup-ag/math';\nimport { AccountInfo, PublicKey, TransactionInstruction } from '@solana/web3.js';\nimport JSBI from 'jsbi';\nimport { deserializeAccount } from '@mercurial-finance/optimist';\nimport {\n  AccountInfoMap,\n  Amm,\n  mapAddressToAccountInfos,\n  Quote,\n  QuoteParams,\n  tokenAccountsToJSBIs,\n  SwapParams,\n} from '../amm';\nimport { createAldrinSwapInstruction, createAldrinV2SwapInstruction } from '../jupiterInstruction';\nimport { accountInfoToAldrinPoolState, AldrinPoolState, STABLE_CURVE_LAYOUT } from './poolState';\nimport { AccountInfo as TokenAccountInfo } from '@solana/spl-token';\nimport Decimal from 'decimal.js';\n\ninterface AldrinParams {\n  amp?: number;\n}\n\nexport class AldrinAmm implements Amm {\n  id: string;\n  label = 'Aldrin' as const;\n  shouldPrefetch = false;\n  poolState: AldrinPoolState;\n  private tokenAccounts: TokenAccountInfo[] = [];\n  calculator: TokenSwapConstantProduct | TokenSwapStable;\n\n  constructor(address: PublicKey, accountInfo: AccountInfo<Buffer>, private params: AldrinParams) {\n    this.poolState = accountInfoToAldrinPoolState(address, accountInfo);\n    this.id = address.toBase58();\n\n    if (this.poolState.curveType === 1) {\n      const { amp } = this.params;\n      if (!amp) {\n        throw new Error('Amp is required for a stable curve');\n      }\n\n      this.calculator = new TokenSwapStable(\n        JSBI.BigInt(amp),\n        new Fraction(\n          JSBI.BigInt(this.poolState.fees.traderFee.numerator.toString()),\n          JSBI.BigInt(this.poolState.fees.traderFee.denominator.toString()),\n        ),\n        new Fraction(\n          JSBI.BigInt(this.poolState.fees.ownerFee.numerator.toString()),\n          JSBI.BigInt(this.poolState.fees.ownerFee.denominator.toString()),\n        ),\n      );\n    } else {\n      this.calculator = new TokenSwapConstantProduct(\n        new Fraction(\n          JSBI.BigInt(this.poolState.fees.traderFee.numerator.toString()),\n          JSBI.BigInt(this.poolState.fees.traderFee.denominator.toString()),\n        ),\n        new Fraction(\n          JSBI.BigInt(this.poolState.fees.ownerFee.numerator.toString()),\n          JSBI.BigInt(this.poolState.fees.ownerFee.denominator.toString()),\n        ),\n      );\n    }\n  }\n\n  static accountInfoToAldrinPoolState = accountInfoToAldrinPoolState;\n\n  static decodeStableCurveAmp(accountInfo: AccountInfo<Buffer>) {\n    const { amp } = STABLE_CURVE_LAYOUT.decode(accountInfo.data);\n\n    return amp.toNumber() * 2; // times two for their AMP, dont ask me why, it is what it is\n  }\n\n  getAccountsForUpdate(): PublicKey[] {\n    return [this.poolState.quoteTokenVault, this.poolState.baseTokenVault];\n  }\n\n  update(accountInfoMap: AccountInfoMap): void {\n    const tokenAccountInfos = mapAddressToAccountInfos(accountInfoMap, this.getAccountsForUpdate());\n\n    this.tokenAccounts = tokenAccountInfos.map((info) => {\n      const tokenAccount = deserializeAccount(info.data);\n      if (!tokenAccount) throw new Error('Invalid token account');\n      return tokenAccount;\n    });\n  }\n\n  getQuote({ sourceMint, amount }: QuoteParams): Quote {\n    if (this.tokenAccounts.length === 0) {\n      throw new Error('Unable to fetch accounts for specified tokens.');\n    }\n\n    let feePct = new Decimal(this.poolState.fees.traderFee.numerator.toString())\n      .div(this.poolState.fees.traderFee.denominator.toString())\n      .add(\n        new Decimal(this.poolState.fees.ownerFee.numerator.toString()).div(\n          this.poolState.fees.ownerFee.denominator.toString(),\n        ),\n      );\n\n    const outputIndex = this.tokenAccounts[0].mint.equals(sourceMint) ? 1 : 0;\n    let result = this.calculator.exchange(tokenAccountsToJSBIs(this.tokenAccounts), JSBI.BigInt(amount), outputIndex);\n\n    return {\n      notEnoughLiquidity: false,\n      inAmount: amount,\n      outAmount: JSBI.toNumber(result.expectedOutputAmount),\n      feeAmount: JSBI.toNumber(result.fees),\n      feeMint: sourceMint.toBase58(),\n      feePct: feePct.toNumber(),\n      priceImpactPct: result.priceImpact.toNumber(),\n    };\n  }\n\n  createSwapInstructions(swapParams: SwapParams): TransactionInstruction[] {\n    if (this.poolState.isV2) {\n      if (!this.poolState.curve) {\n        throw new Error('Unable to fetch curve account.');\n      }\n\n      const curve = this.poolState.curve;\n      return [\n        createAldrinV2SwapInstruction({\n          poolState: this.poolState,\n          curve,\n          ...swapParams,\n        }),\n      ];\n    }\n\n    return [\n      createAldrinSwapInstruction({\n        poolState: this.poolState,\n        ...swapParams,\n      }),\n    ];\n  }\n\n  get reserveTokenMints() {\n    return [this.poolState.baseTokenMint, this.poolState.quoteTokenMint];\n  }\n}\n","import { PublicKey } from '@solana/web3.js';\n\nexport const STEP_TOKEN_SWAP_PROGRAM_ID = new PublicKey('SSwpMgqNDsyV7mAgN9ady4bDVu5ySjmmXejXvy2vLt1');\n\nexport const PROGRAM_ID_TO_LABEL = new Map<string, string>([\n  ['9W959DqEETiGZocYWCQPaJ6sBmUzgfxXfqGeTEdp3aQP', 'Orca'],\n  [STEP_TOKEN_SWAP_PROGRAM_ID.toBase58(), 'Step'],\n  ['PSwapMdSai8tjrEXcxFeQth87xC4rRsa4VA5mhGhXkP', 'Penguin'],\n  ['SSwapUtytfBdBn1b9NUGG6foMVPtcWgpRU32HToDUZr', 'Saros'],\n]);\n","import { findProgramAddressSync } from '@project-serum/anchor/dist/cjs/utils/pubkey';\nimport { struct, u8, blob } from '@solana/buffer-layout';\nimport { u64 } from '@solana/spl-token';\nimport { AccountInfo, PublicKey } from '@solana/web3.js';\nimport { publicKey, uint64 } from '../../utils/layout';\nimport { STEP_TOKEN_SWAP_PROGRAM_ID } from './splTokenSwapPools';\n\ninterface TokenSwapLayout {\n  version: number;\n  isInitialized: number;\n  bumpSeed: number;\n  tokenProgramId: PublicKey;\n  tokenAccountA: PublicKey;\n  tokenAccountB: PublicKey;\n  tokenPool: PublicKey;\n  mintA: PublicKey;\n  mintB: PublicKey;\n  feeAccount: PublicKey;\n  tradeFeeNumerator: u64;\n  tradeFeeDenominator: u64;\n  ownerTradeFeeNumerator: u64;\n  ownerTradeFeeDenominator: u64;\n  ownerWithdrawFeeNumerator: u64;\n  ownerWithdrawFeeDenominator: u64;\n  hostFeeNumerator: u64;\n  hostFeeDenominator: u64;\n  curveType: number;\n  curveParameters: Uint8Array;\n}\n\nconst TokenSwapLayout = struct<TokenSwapLayout>([\n  u8('version'),\n  u8('isInitialized'),\n  u8('bumpSeed'),\n  publicKey('tokenProgramId'),\n  publicKey('tokenAccountA'),\n  publicKey('tokenAccountB'),\n  publicKey('tokenPool'),\n  publicKey('mintA'),\n  publicKey('mintB'),\n  publicKey('feeAccount'),\n  uint64('tradeFeeNumerator'),\n  uint64('tradeFeeDenominator'),\n  uint64('ownerTradeFeeNumerator'),\n  uint64('ownerTradeFeeDenominator'),\n  uint64('ownerWithdrawFeeNumerator'),\n  uint64('ownerWithdrawFeeDenominator'),\n  uint64('hostFeeNumerator'),\n  uint64('hostFeeDenominator'),\n  u8('curveType'),\n  blob(32, 'curveParameters'),\n]);\n\ninterface StepTokenSwapLayout extends TokenSwapLayout {\n  poolNonce: u64;\n}\n\nconst StepTokenSwapLayout = struct<StepTokenSwapLayout>([\n  u8('version'),\n  u8('isInitialized'),\n  u8('bumpSeed'),\n  publicKey('tokenProgramId'),\n  publicKey('tokenAccountA'),\n  publicKey('tokenAccountB'),\n  publicKey('tokenPool'),\n  publicKey('mintA'),\n  publicKey('mintB'),\n  publicKey('feeAccount'),\n  uint64('tradeFeeNumerator'),\n  uint64('tradeFeeDenominator'),\n  uint64('ownerTradeFeeNumerator'),\n  uint64('ownerTradeFeeDenominator'),\n  uint64('ownerWithdrawFeeNumerator'),\n  uint64('ownerWithdrawFeeDenominator'),\n  u8('curveType'),\n  blob(32, 'curveParameters'),\n  u8('poolNonce'),\n]);\n\nexport interface TokenSwapState {\n  address: PublicKey;\n  programId: PublicKey;\n  tokenProgramId: PublicKey;\n  poolToken: PublicKey;\n  feeAccount: PublicKey;\n  authority: PublicKey;\n  tokenAccountA: PublicKey;\n  tokenAccountB: PublicKey;\n  mintA: PublicKey;\n  mintB: PublicKey;\n  tradeFeeNumerator: u64;\n  tradeFeeDenominator: u64;\n  ownerTradeFeeNumerator: u64;\n  ownerTradeFeeDenominator: u64;\n  ownerWithdrawFeeNumerator: u64;\n  ownerWithdrawFeeDenominator: u64;\n  curveType: number;\n  curveParameters: Uint8Array;\n  poolNonce?: u64;\n}\n\nexport function accountInfoToTokenSwapState(\n  address: PublicKey,\n  tokenSwapAccountInfo: AccountInfo<Buffer>,\n): TokenSwapState {\n  const programId = tokenSwapAccountInfo.owner;\n\n  // The layout difference only affects fields we do not actively use\n  const tokenSwapData = (\n    programId.equals(STEP_TOKEN_SWAP_PROGRAM_ID)\n      ? StepTokenSwapLayout.decode(tokenSwapAccountInfo.data)\n      : TokenSwapLayout.decode(tokenSwapAccountInfo.data)\n  ) as TokenSwapLayout | StepTokenSwapLayout;\n\n  if (!tokenSwapData.isInitialized) {\n    throw new Error(`Invalid token swap state`);\n  }\n\n  const [authority] = findProgramAddressSync([address.toBuffer()], programId);\n\n  const poolToken = new PublicKey(tokenSwapData.tokenPool);\n  const feeAccount = new PublicKey(tokenSwapData.feeAccount);\n  const tokenAccountA = new PublicKey(tokenSwapData.tokenAccountA);\n  const tokenAccountB = new PublicKey(tokenSwapData.tokenAccountB);\n  const mintA = new PublicKey(tokenSwapData.mintA);\n  const mintB = new PublicKey(tokenSwapData.mintB);\n  const tokenProgramId = new PublicKey(tokenSwapData.tokenProgramId);\n\n  const tradeFeeNumerator = tokenSwapData.tradeFeeNumerator;\n  const tradeFeeDenominator = tokenSwapData.tradeFeeDenominator;\n  const ownerTradeFeeNumerator = tokenSwapData.ownerTradeFeeNumerator;\n  const ownerTradeFeeDenominator = tokenSwapData.ownerTradeFeeDenominator;\n  const ownerWithdrawFeeNumerator = tokenSwapData.ownerWithdrawFeeNumerator;\n  const ownerWithdrawFeeDenominator = tokenSwapData.ownerWithdrawFeeDenominator;\n\n  const curveType = tokenSwapData.curveType;\n  const curveParameters = tokenSwapData.curveParameters;\n\n  const poolNonce = 'poolNonce' in tokenSwapData ? tokenSwapData.poolNonce : undefined;\n\n  return {\n    address,\n    programId,\n    tokenProgramId,\n    poolToken,\n    feeAccount,\n    authority,\n    tokenAccountA,\n    tokenAccountB,\n    mintA,\n    mintB,\n    tradeFeeNumerator,\n    tradeFeeDenominator,\n    ownerTradeFeeNumerator,\n    ownerTradeFeeDenominator,\n    ownerWithdrawFeeNumerator,\n    ownerWithdrawFeeDenominator,\n    curveType,\n    curveParameters,\n    poolNonce,\n  };\n}\n","import { AccountInfo, PublicKey } from '@solana/web3.js';\nimport Decimal from 'decimal.js';\nimport {\n  AccountInfoMap,\n  Amm,\n  mapAddressToAccountInfos,\n  Quote,\n  QuoteParams,\n  SwapParams,\n  tokenAccountsToJSBIs,\n} from '../amm';\nimport { createTokenSwapInstruction } from '../jupiterInstruction';\nimport { accountInfoToTokenSwapState, TokenSwapState } from './tokenSwapLayout';\nimport { deserializeAccount } from '@mercurial-finance/optimist';\nimport { Fraction, TokenSwapConstantProduct, TokenSwapStable } from '@jup-ag/math';\nimport JSBI from 'jsbi';\nimport { AccountInfo as TokenAccountInfo } from '@solana/spl-token';\nimport { STEP_TOKEN_SWAP_PROGRAM_ID } from './splTokenSwapPools';\n\nenum CurveType {\n  ConstantProduct = 0,\n  Stable = 2,\n}\n\n// Abstract any SPL token swap based AMM\nexport class SplTokenSwapAmm implements Amm {\n  id: string;\n  shouldPrefetch = false;\n  private tokenSwapState: TokenSwapState;\n  private curveType: CurveType;\n\n  private tokenAccounts: TokenAccountInfo[] = [];\n  calculator: TokenSwapConstantProduct | TokenSwapStable;\n\n  constructor(address: PublicKey, swapStateAccountInfo: AccountInfo<Buffer>, public label: string) {\n    this.id = address.toBase58();\n    this.tokenSwapState = accountInfoToTokenSwapState(address, swapStateAccountInfo);\n\n    this.curveType = this.tokenSwapState.curveType;\n\n    if (!(this.curveType in CurveType)) {\n      throw new Error(`curveType ${this.tokenSwapState.curveType} is not supported`);\n    }\n\n    if (this.tokenSwapState.curveType === CurveType.ConstantProduct) {\n      this.calculator = new TokenSwapConstantProduct(\n        new Fraction(\n          JSBI.BigInt(this.tokenSwapState.tradeFeeNumerator.toString()),\n          JSBI.BigInt(this.tokenSwapState.tradeFeeDenominator.toString()),\n        ),\n        new Fraction(\n          JSBI.BigInt(this.tokenSwapState.ownerTradeFeeNumerator.toString()),\n          JSBI.BigInt(this.tokenSwapState.ownerTradeFeeDenominator.toString()),\n        ),\n      );\n    } else {\n      this.calculator = new TokenSwapStable(\n        JSBI.BigInt(this.tokenSwapState.curveParameters[0]),\n        new Fraction(\n          JSBI.BigInt(this.tokenSwapState.tradeFeeNumerator.toString()),\n          JSBI.BigInt(this.tokenSwapState.tradeFeeDenominator.toString()),\n        ),\n        new Fraction(\n          JSBI.BigInt(this.tokenSwapState.ownerTradeFeeNumerator.toString()),\n          JSBI.BigInt(this.tokenSwapState.ownerTradeFeeDenominator.toString()),\n        ),\n      );\n    }\n  }\n\n  getAccountsForUpdate(): PublicKey[] {\n    return [this.tokenSwapState.tokenAccountA, this.tokenSwapState.tokenAccountB];\n  }\n\n  update(accountInfoMap: AccountInfoMap): void {\n    const tokenAccountInfos = mapAddressToAccountInfos(accountInfoMap, this.getAccountsForUpdate());\n\n    this.tokenAccounts = tokenAccountInfos.map((info) => {\n      const tokenAccount = deserializeAccount(info.data);\n      if (!tokenAccount) {\n        throw new Error('Invalid token account');\n      }\n      return tokenAccount;\n    });\n  }\n\n  getQuote({ sourceMint, amount }: QuoteParams): Quote {\n    if (this.tokenAccounts.length === 0) {\n      throw new Error('Unable to fetch accounts for specified tokens.');\n    }\n\n    let feePct = new Decimal(this.tokenSwapState.tradeFeeNumerator.toString())\n      .div(this.tokenSwapState.tradeFeeDenominator.toString())\n      .add(\n        new Decimal(this.tokenSwapState.ownerTradeFeeNumerator.toString()).div(\n          this.tokenSwapState.ownerTradeFeeDenominator.toString(),\n        ),\n      );\n\n    const outputIndex = this.tokenAccounts[0].mint.equals(sourceMint) ? 1 : 0;\n    let result = this.calculator.exchange(\n      tokenAccountsToJSBIs(this.tokenAccounts),\n      JSBI.BigInt(Math.floor(amount)),\n      outputIndex,\n    );\n\n    return {\n      notEnoughLiquidity: false,\n      inAmount: amount,\n      outAmount: JSBI.toNumber(result.expectedOutputAmount),\n      feeAmount: JSBI.toNumber(result.fees),\n      feeMint: sourceMint.toBase58(),\n      feePct: feePct.toNumber(),\n      priceImpactPct: result.priceImpact.toNumber(),\n    };\n  }\n\n  createSwapInstructions(swapParams: SwapParams) {\n    return [\n      createTokenSwapInstruction({\n        tokenSwapState: this.tokenSwapState,\n        ...swapParams,\n        isStep: this.tokenSwapState.programId.equals(STEP_TOKEN_SWAP_PROGRAM_ID),\n      }),\n    ];\n  }\n\n  get reserveTokenMints() {\n    return [this.tokenSwapState.mintA, this.tokenSwapState.mintB];\n  }\n}\n","import { findProgramAddressSync } from '@project-serum/anchor/dist/cjs/utils/pubkey';\nimport { struct, u8, u32 } from '@solana/buffer-layout';\nimport { u64 } from '@solana/spl-token';\nimport { AccountInfo, PublicKey } from '@solana/web3.js';\nimport { uint64, publicKey } from '../../utils/layout';\n\nexport const FEE_DENOMINATOR = Math.pow(10, 10);\n\ninterface MercurialSwapLayout {\n  version: number;\n  isInitialized: number;\n  nonce: number;\n  amplificationCoefficient: u64;\n  feeNumerator: u64;\n  adminFeeNumerator: u64;\n  tokenAccountsLength: number;\n  precisionFactor: u64;\n  precisionMultiplierA: u64;\n  precisionMultiplierB: u64;\n  precisionMultiplierC: u64;\n  precisionMultiplierD: u64;\n  tokenAccountA: PublicKey;\n  tokenAccountB: PublicKey;\n  tokenAccountC: PublicKey;\n  tokenAccountD: PublicKey;\n}\n\nexport const MercurialSwapLayout = struct<MercurialSwapLayout>([\n  u8('version'),\n  u8('isInitialized'),\n  u8('nonce'),\n  uint64('amplificationCoefficient'),\n  uint64('feeNumerator'),\n  uint64('adminFeeNumerator'),\n  u32('tokenAccountsLength'),\n  uint64('precisionFactor'),\n  uint64('precisionMultiplierA'),\n  uint64('precisionMultiplierB'),\n  uint64('precisionMultiplierC'),\n  uint64('precisionMultiplierD'),\n  publicKey('tokenAccountA'),\n  publicKey('tokenAccountB'),\n  publicKey('tokenAccountC'),\n  publicKey('tokenAccountD'),\n]);\n\nexport interface MercurialSwapLayoutState {\n  programId: PublicKey;\n  authority: PublicKey;\n  isInitialized: boolean;\n  nonce: number;\n  ammId: PublicKey;\n  amplificationCoefficient: number;\n  feeNumerator: number;\n  tokenAccountsLength: number;\n  precisionFactor: number;\n  precisionMultipliers: number[];\n  tokenAccounts: PublicKey[];\n}\n\nexport const accountInfoToMercurialSwapLayout = (\n  address: PublicKey,\n  accountInfo: AccountInfo<Buffer>,\n): MercurialSwapLayoutState => {\n  const programId = accountInfo.owner;\n  const decoded = MercurialSwapLayout.decode(accountInfo.data);\n  const tokenAccountsLength = decoded.tokenAccountsLength;\n  const [authority] = findProgramAddressSync([address.toBuffer()], programId);\n\n  const precisionMultipliers = [\n    decoded.precisionMultiplierA.toNumber(),\n    decoded.precisionMultiplierB.toNumber(),\n    decoded.precisionMultiplierC.toNumber(),\n    decoded.precisionMultiplierD.toNumber(),\n  ].slice(0, tokenAccountsLength);\n\n  const tokenAccounts = [\n    decoded.tokenAccountA,\n    decoded.tokenAccountB,\n    decoded.tokenAccountC,\n    decoded.tokenAccountD,\n  ].slice(0, tokenAccountsLength);\n\n  return {\n    programId,\n    authority,\n    isInitialized: Boolean(decoded.isInitialized),\n    nonce: decoded.nonce,\n    ammId: address,\n    amplificationCoefficient: decoded.amplificationCoefficient.toNumber(),\n    feeNumerator: decoded.feeNumerator.toNumber(),\n    tokenAccountsLength,\n    precisionFactor: decoded.precisionFactor.toNumber(),\n    precisionMultipliers,\n    tokenAccounts,\n  };\n};\n","import { Fraction, Stable } from '@jup-ag/math';\nimport { AccountInfo, PublicKey, TransactionInstruction } from '@solana/web3.js';\nimport JSBI from 'jsbi';\nimport {\n  AccountInfoMap,\n  Amm,\n  mapAddressToAccountInfos,\n  Quote,\n  QuoteParams,\n  tokenAccountsToJSBIs,\n  SwapParams,\n} from '../amm';\nimport { createMercurialExchangeInstruction } from '../jupiterInstruction';\nimport { deserializeAccount } from '@mercurial-finance/optimist';\nimport { AccountInfo as TokenAccountInfo } from '@solana/spl-token';\nimport { accountInfoToMercurialSwapLayout, FEE_DENOMINATOR, MercurialSwapLayoutState } from './swapLayout';\n\ninterface MercurialParams {\n  tokenMints: string[];\n}\n\nexport class MercurialAmm implements Amm {\n  id: string;\n  label = 'Mercurial';\n  shouldPrefetch = false;\n  swapLayout: MercurialSwapLayoutState;\n  private tokenAccounts: TokenAccountInfo[] = [];\n  private calculator: Stable;\n\n  static decodeSwapLayout = accountInfoToMercurialSwapLayout;\n\n  constructor(address: PublicKey, accountInfo: AccountInfo<Buffer>, private params: MercurialParams) {\n    this.id = address.toBase58();\n    this.swapLayout = accountInfoToMercurialSwapLayout(address, accountInfo);\n    this.calculator = new Stable(\n      JSBI.BigInt(this.swapLayout.tokenAccountsLength),\n      JSBI.BigInt(this.swapLayout.amplificationCoefficient),\n      this.swapLayout.precisionMultipliers.map((precisionMultiplier) => JSBI.BigInt(precisionMultiplier)),\n      new Fraction(JSBI.BigInt(this.swapLayout.feeNumerator), JSBI.BigInt(FEE_DENOMINATOR)),\n    );\n  }\n\n  getAccountsForUpdate(): PublicKey[] {\n    return this.swapLayout.tokenAccounts;\n  }\n\n  update(accountInfoMap: AccountInfoMap) {\n    let tokenAccountInfos = mapAddressToAccountInfos(accountInfoMap, this.getAccountsForUpdate());\n\n    this.tokenAccounts = tokenAccountInfos\n      .map((info) => deserializeAccount(info.data))\n      .filter((x): x is TokenAccountInfo => x !== null);\n  }\n\n  getQuote({ sourceMint, destinationMint, amount }: QuoteParams): Quote {\n    if (this.tokenAccounts.length === 0) {\n      throw new Error('Unable to fetch accounts for specified tokens.');\n    }\n\n    const inputIndex = this.tokenAccounts.findIndex((tokenAccount) => tokenAccount.mint.equals(sourceMint));\n    const outputIndex = this.tokenAccounts.findIndex((tokenAccount) => tokenAccount.mint.equals(destinationMint));\n    const result = this.calculator.exchange(\n      tokenAccountsToJSBIs(this.tokenAccounts),\n      JSBI.BigInt(amount),\n      inputIndex,\n      outputIndex,\n    );\n\n    const feePct = this.swapLayout.feeNumerator / FEE_DENOMINATOR;\n\n    return {\n      notEnoughLiquidity: false,\n      inAmount: amount,\n      outAmount: JSBI.toNumber(result.expectedOutputAmount),\n      feeAmount: JSBI.toNumber(result.fees),\n      feeMint: destinationMint.toBase58(),\n      feePct: feePct,\n      priceImpactPct: result.priceImpact.toNumber(),\n    };\n  }\n\n  createSwapInstructions(swapParams: SwapParams): TransactionInstruction[] {\n    return [\n      createMercurialExchangeInstruction({\n        swapLayout: this.swapLayout,\n        ...swapParams,\n      }),\n    ];\n  }\n\n  get reserveTokenMints() {\n    return this.params.tokenMints.map((tokenMint) => new PublicKey(tokenMint));\n  }\n}\n","import { Fraction, TokenSwapConstantProduct } from '@jup-ag/math';\nimport { AccountInfo, Connection, PublicKey, TransactionInstruction } from '@solana/web3.js';\nimport JSBI from 'jsbi';\nimport { deserializeAccount } from '@mercurial-finance/optimist';\nimport {\n  AccountInfoMap,\n  Amm,\n  mapAddressToAccountInfos,\n  Quote,\n  QuoteParams,\n  tokenAccountsToJSBIs,\n  SwapParams,\n} from '../amm';\nimport { createCropperSwapInstruction } from '../jupiterInstruction';\n\nimport { AccountInfo as TokenAccountInfo } from '@solana/spl-token';\nimport {\n  accountInfoToCropperPoolState,\n  CropperPoolState,\n  stateAccountInfoToCropperState,\n  CROPPER_STATE_ADDRESS,\n} from './swapLayout';\nimport Decimal from 'decimal.js';\n\ninterface CropperParams {\n  tokenAFeeAccount: PublicKey;\n  tokenBFeeAccount: PublicKey;\n  returnFeeNumerator: number;\n  fixedFeeNumerator: number;\n  feeDenominator: number;\n}\n\nexport class CropperAmm implements Amm {\n  id: string;\n  label = 'Cropper' as const;\n  shouldPrefetch = false;\n  poolState: CropperPoolState;\n  private tokenAccounts: TokenAccountInfo[] = [];\n  private calculator: TokenSwapConstantProduct;\n  private feePct: Decimal;\n\n  // Hardcoded because no where to query this\n  static async getStateFromStateAccount(connection: Connection) {\n    const accountInfo = await connection.getAccountInfo(CROPPER_STATE_ADDRESS);\n\n    if (!accountInfo) {\n      throw new Error('State account not found');\n    }\n\n    return stateAccountInfoToCropperState(accountInfo);\n  }\n\n  static decodePoolState = accountInfoToCropperPoolState;\n\n  constructor(address: PublicKey, accountInfo: AccountInfo<Buffer>, private params: CropperParams) {\n    this.id = address.toBase58();\n    this.poolState = accountInfoToCropperPoolState(address, accountInfo);\n\n    this.feePct = new Decimal(this.params.fixedFeeNumerator)\n      .div(this.params.feeDenominator)\n      .add(new Decimal(this.params.returnFeeNumerator).div(this.params.feeDenominator));\n\n    this.params.tokenAFeeAccount = new PublicKey(this.params.tokenAFeeAccount);\n    this.params.tokenBFeeAccount = new PublicKey(this.params.tokenBFeeAccount);\n\n    this.calculator = new TokenSwapConstantProduct(\n      new Fraction(JSBI.BigInt(this.params.fixedFeeNumerator), JSBI.BigInt(this.params.feeDenominator)),\n      new Fraction(JSBI.BigInt(this.params.returnFeeNumerator), JSBI.BigInt(this.params.feeDenominator)),\n    );\n  }\n\n  getAccountsForUpdate(): PublicKey[] {\n    return [this.poolState.tokenAAccount, this.poolState.tokenBAccount];\n  }\n\n  update(accountInfoMap: AccountInfoMap): void {\n    const tokenAccountInfos = mapAddressToAccountInfos(accountInfoMap, this.getAccountsForUpdate());\n\n    this.tokenAccounts = tokenAccountInfos.map((info) => {\n      const tokenAccount = deserializeAccount(info.data);\n      if (!tokenAccount) {\n        throw new Error('Invalid token account');\n      }\n      return tokenAccount;\n    });\n  }\n\n  getQuote({ sourceMint, amount }: QuoteParams): Quote {\n    if (this.tokenAccounts.length === 0) {\n      throw new Error('Unable to fetch accounts for specified tokens.');\n    }\n\n    const outputIndex = this.tokenAccounts[0].mint.equals(sourceMint) ? 1 : 0;\n    const result = this.calculator.exchange(tokenAccountsToJSBIs(this.tokenAccounts), JSBI.BigInt(amount), outputIndex);\n\n    return {\n      notEnoughLiquidity: false,\n      inAmount: amount,\n      outAmount: JSBI.toNumber(result.expectedOutputAmount),\n      feeAmount: JSBI.toNumber(result.fees),\n      feeMint: sourceMint.toBase58(),\n      feePct: this.feePct.toNumber(),\n      priceImpactPct: result.priceImpact.toNumber(),\n    };\n  }\n\n  createSwapInstructions(swapParams: SwapParams): TransactionInstruction[] {\n    const feeAccount = swapParams.sourceMint.equals(this.poolState.mintA)\n      ? this.params.tokenAFeeAccount\n      : this.params.tokenBFeeAccount;\n\n    return [\n      createCropperSwapInstruction({\n        poolState: this.poolState,\n        feeAccount,\n        ...swapParams,\n      }),\n    ];\n  }\n\n  get reserveTokenMints() {\n    return [this.poolState.mintA, this.poolState.mintB];\n  }\n}\n","import { TokenSwapAccountLayout } from '@jup-ag/crema-sdk';\nimport { findProgramAddressSync } from '@project-serum/anchor/dist/cjs/utils/pubkey';\nimport { AccountInfo, PublicKey } from '@solana/web3.js';\nimport Decimal from 'decimal.js';\n\nexport interface CremaPoolState {\n  programId: PublicKey;\n  authority: PublicKey;\n  version: number;\n  isInitialized: boolean;\n  nonce: number;\n  ammId: PublicKey;\n  tokenProgramId: PublicKey;\n  tokenAAccount: PublicKey;\n  tokenBAccount: PublicKey;\n  ticksKey: PublicKey;\n  mintA: PublicKey;\n  mintB: PublicKey;\n  fee: Decimal;\n  currentSqrtPrice: Decimal;\n  currentLiquity: Decimal;\n}\n\nexport const accountInfoToCremaPoolState = (address: PublicKey, accountInfo: AccountInfo<Buffer>): CremaPoolState => {\n  const programId = accountInfo.owner;\n\n  const decoded = TokenSwapAccountLayout.decode(accountInfo.data);\n  const [authority] = findProgramAddressSync([address.toBuffer()], programId);\n\n  return {\n    programId,\n    authority,\n    version: decoded.version,\n    isInitialized: Boolean(decoded.isInitialized),\n    nonce: decoded.nonce,\n    ammId: address,\n    tokenProgramId: decoded.tokenProgramId,\n    tokenAAccount: decoded.swapTokenA,\n    tokenBAccount: decoded.swapTokenB,\n    ticksKey: decoded.ticksKey,\n    mintA: decoded.tokenAMint,\n    mintB: decoded.tokenBMint,\n    fee: decoded.fee,\n    currentSqrtPrice: decoded.currentSqrtPrice,\n    currentLiquity: decoded.currentLiquity,\n  };\n};\n","import { AccountInfoMap, Amm, mapAddressToAccountInfos, Quote, QuoteParams, SwapParams } from '../amm';\nimport { AccountInfo, PublicKey, TransactionInstruction } from '@solana/web3.js';\nimport { accountInfoToCremaPoolState, CremaPoolState } from './swapLayout';\nimport { createCremaSwapInstruction } from '../jupiterInstruction';\nimport { calculateSwapA2B, calculateSwapB2A, parseTicksAccount, Tick } from '@jup-ag/crema-sdk';\nimport Decimal from 'decimal.js';\n\nexport class CremaAmm implements Amm {\n  id: string;\n  label = 'Crema';\n  shouldPrefetch = false;\n  private ticks: Tick[] | undefined;\n  private poolState: CremaPoolState;\n\n  constructor(address: PublicKey, accountInfo: AccountInfo<Buffer>) {\n    this.poolState = accountInfoToCremaPoolState(address, accountInfo);\n    this.id = address.toBase58();\n  }\n\n  getAccountsForUpdate(): PublicKey[] {\n    return [this.poolState.ammId, this.poolState.ticksKey];\n  }\n\n  update(accountInfoMap: AccountInfoMap): void {\n    const [tokenSwapAccountInfo, ticksAccountInfo] = mapAddressToAccountInfos(\n      accountInfoMap,\n      this.getAccountsForUpdate(),\n    );\n\n    this.poolState = accountInfoToCremaPoolState(this.poolState.ammId, tokenSwapAccountInfo);\n\n    const ticksInfo = parseTicksAccount(this.poolState.ticksKey, ticksAccountInfo);\n    if (!ticksInfo) throw new Error(`Ticks account invalid: ${this.poolState.ticksKey.toBase58()}`);\n    this.ticks = ticksInfo.data.ticks;\n  }\n\n  getQuote({ sourceMint, amount }: QuoteParams): Quote {\n    if (!this.ticks) {\n      throw new Error('Unable to fetch accounts for ticks.');\n    }\n\n    // Crema SDK doesn't support 0 amount input\n    if (amount === 0) {\n      return {\n        notEnoughLiquidity: false,\n        inAmount: amount,\n        outAmount: 0,\n        feeAmount: 0,\n        feeMint: sourceMint.toBase58(),\n        feePct: this.poolState.fee.toNumber(),\n        priceImpactPct: 0,\n      };\n    }\n\n    const result = this.poolState.mintA.equals(sourceMint)\n      ? this.preSwapA(new Decimal(amount))\n      : this.preSwapB(new Decimal(amount));\n\n    return {\n      notEnoughLiquidity: false,\n      inAmount: amount,\n      outAmount: result.amountOut.toNumber(),\n      feeAmount: result.feeUsed.toNumber(),\n      feeMint: sourceMint.toBase58(),\n      feePct: this.poolState.fee.toNumber(),\n      priceImpactPct: result.impact.toNumber(),\n    };\n  }\n\n  preSwapA(amountIn: Decimal): {\n    amountOut: Decimal;\n    amountUsed: Decimal;\n    feeUsed: Decimal;\n    afterPrice: Decimal;\n    afterLiquity: Decimal;\n    impact: Decimal;\n  } {\n    if (!this.ticks) {\n      throw new Error('Unable to fetch accounts for ticks.');\n    }\n\n    let result = calculateSwapA2B(\n      this.ticks,\n      this.poolState.currentSqrtPrice,\n      this.poolState.fee,\n      this.poolState.currentLiquity,\n      amountIn,\n    );\n\n    let currentPriceA = this.poolState.currentSqrtPrice.pow(2);\n    let transactionPriceA = result.amountOut.div(result.amountUsed);\n    let impact = transactionPriceA.sub(currentPriceA).div(currentPriceA).abs();\n\n    return {\n      ...result,\n      impact,\n    };\n  }\n\n  preSwapB(amountIn: Decimal): {\n    amountOut: Decimal;\n    amountUsed: Decimal;\n    feeUsed: Decimal;\n    afterPrice: Decimal;\n    afterLiquity: Decimal;\n    impact: Decimal;\n  } {\n    if (!this.ticks) {\n      throw new Error('Unable to fetch accounts for ticks.');\n    }\n\n    let result = calculateSwapB2A(\n      this.ticks,\n      this.poolState.currentSqrtPrice,\n      this.poolState.fee,\n      this.poolState.currentLiquity,\n      amountIn,\n    );\n\n    let currentPriceA = this.poolState.currentSqrtPrice.pow(2);\n    let currentPriceB = new Decimal(1).div(currentPriceA);\n    let transactionPriceB = result.amountOut.div(result.amountUsed);\n    let impact = transactionPriceB.sub(currentPriceB).div(currentPriceB).abs();\n\n    return {\n      ...result,\n      impact,\n    };\n  }\n\n  createSwapInstructions(swapParams: SwapParams): TransactionInstruction[] {\n    return [\n      createCremaSwapInstruction({\n        poolState: this.poolState,\n        ...swapParams,\n      }),\n    ];\n  }\n\n  get reserveTokenMints() {\n    return [this.poolState.mintA, this.poolState.mintB];\n  }\n}\n","import { struct, u8, Layout, blob } from '@solana/buffer-layout';\nimport { PublicKey, AccountInfo } from '@solana/web3.js';\nimport { u64 } from '@solana/spl-token';\nimport { publicKey, uint64 } from '../../utils/layout';\n\ninterface SenchaSwapLayout {\n  discriminator: any;\n  factory: PublicKey;\n  bump: number;\n  index: u64;\n  admin: PublicKey;\n  token0Reserves: PublicKey;\n  token0Mint: PublicKey;\n  token0Fees: PublicKey;\n  token1Reserves: PublicKey;\n  token1Mint: PublicKey;\n  token1Fees: PublicKey;\n  isPaused: number;\n  poolMint: PublicKey;\n  tradeFeeKbps: u64;\n  withdrawFeeKbps: u64;\n  adminTradeFeeKbps: u64;\n  adminWithdrawFeeKbps: u64;\n}\n\nexport const SenchaSwapLayout = struct<SenchaSwapLayout>([\n  blob(8, 'discriminator'),\n  publicKey('factory'),\n  u8('bump'),\n  uint64('index'),\n  publicKey('admin'),\n  publicKey('token0Reserves'),\n  publicKey('token0Mint'),\n  publicKey('token0Fees'),\n  publicKey('token1Reserves'),\n  publicKey('token1Mint'),\n  publicKey('token1Fees'),\n  u8('isPaused'),\n  publicKey('poolMint'),\n  uint64('tradeFeeKbps'),\n  uint64('withdrawFeeKbps'),\n  uint64('adminTradeFeeKbps'),\n  uint64('adminWithdrawFeeKbps'),\n]);\n\nexport interface SenchaPoolState {\n  programId: PublicKey;\n  isPaused: boolean;\n  bump: number;\n  ammId: PublicKey;\n  token0Reserves: PublicKey;\n  token1Reserves: PublicKey;\n  token0Mint: PublicKey;\n  token1Mint: PublicKey;\n  token0Fees: PublicKey;\n  token1Fees: PublicKey;\n  poolMint: PublicKey;\n  tradeFeeKbps: number;\n}\n\nexport const accountInfoToSenchaPoolState = (address: PublicKey, accountInfo: AccountInfo<Buffer>): SenchaPoolState => {\n  const programId = accountInfo.owner;\n  const decoded = SenchaSwapLayout.decode(accountInfo.data);\n\n  return {\n    programId,\n    isPaused: Boolean(decoded.isPaused),\n    bump: decoded.bump,\n    ammId: address,\n    token0Reserves: decoded.token0Reserves,\n    token1Reserves: decoded.token1Reserves,\n    token0Mint: decoded.token0Mint,\n    token1Mint: decoded.token1Mint,\n    token0Fees: decoded.token0Fees,\n    token1Fees: decoded.token1Fees,\n    poolMint: decoded.poolMint,\n    tradeFeeKbps: decoded.tradeFeeKbps.toNumber(),\n  };\n};\n","import { AccountInfo, PublicKey, TransactionInstruction } from '@solana/web3.js';\nimport {\n  AccountInfoMap,\n  Amm,\n  mapAddressToAccountInfos,\n  Quote,\n  QuoteParams,\n  tokenAccountsToJSBIs,\n  SwapParams,\n} from '../amm';\nimport { accountInfoToSenchaPoolState, SenchaPoolState } from './swapLayout';\nimport { AccountInfo as TokenAccountInfo } from '@solana/spl-token';\nimport { deserializeAccount } from '@mercurial-finance/optimist';\nimport { createSenchaSwapInstruction } from '../jupiterInstruction';\nimport { Fraction, TokenSwapConstantProduct, ZERO } from '@jup-ag/math';\nimport JSBI from 'jsbi';\n\nexport class SenchaAmm implements Amm {\n  id: string;\n  label = 'Sencha' as const;\n  shouldPrefetch = false;\n  poolState: SenchaPoolState;\n  private calculator: TokenSwapConstantProduct;\n  private tokenAccounts: TokenAccountInfo[] = [];\n\n  constructor(address: PublicKey, accountInfo: AccountInfo<Buffer>) {\n    this.id = address.toBase58();\n    this.poolState = accountInfoToSenchaPoolState(address, accountInfo);\n    this.calculator = new TokenSwapConstantProduct(\n      new Fraction(\n        JSBI.BigInt(this.poolState.tradeFeeKbps),\n        JSBI.BigInt(10000000), // 100% = 10000000kbps\n      ),\n      new Fraction(ZERO, ZERO),\n      false,\n    );\n  }\n\n  get isPaused() {\n    return this.poolState.isPaused;\n  }\n\n  getAccountsForUpdate(): PublicKey[] {\n    return [this.poolState.token0Reserves, this.poolState.token1Reserves];\n  }\n\n  update(accountInfoMap: AccountInfoMap): void {\n    const tokenAccountInfos = mapAddressToAccountInfos(accountInfoMap, this.getAccountsForUpdate());\n\n    this.tokenAccounts = tokenAccountInfos.map((info) => {\n      const tokenAccount = deserializeAccount(info.data);\n      if (!tokenAccount) {\n        throw new Error('Invalid token account');\n      }\n      return tokenAccount;\n    });\n  }\n\n  getQuote({ sourceMint, amount }: QuoteParams): Quote {\n    if (this.tokenAccounts.length === 0) {\n      throw new Error('Unable to fetch accounts for specified tokens.');\n    }\n\n    const outputIndex = this.tokenAccounts[0].mint.equals(sourceMint) ? 1 : 0;\n    let result = this.calculator.exchange(tokenAccountsToJSBIs(this.tokenAccounts), JSBI.BigInt(amount), outputIndex);\n\n    let feePct = this.poolState.tradeFeeKbps / 10000000; // 100% kbps\n\n    return {\n      notEnoughLiquidity: false,\n      inAmount: amount,\n      outAmount: JSBI.toNumber(result.expectedOutputAmount),\n      feeAmount: JSBI.toNumber(result.fees),\n      feeMint: sourceMint.toBase58(),\n      feePct,\n      priceImpactPct: result.priceImpact.toNumber(),\n    };\n  }\n\n  createSwapInstructions(swapParams: SwapParams): TransactionInstruction[] {\n    return [\n      createSenchaSwapInstruction({\n        poolState: this.poolState,\n        ...swapParams,\n      }),\n    ];\n  }\n\n  get reserveTokenMints() {\n    return [this.poolState.token0Mint, this.poolState.token1Mint];\n  }\n}\n","import { AccountInfo, PublicKey } from '@solana/web3.js';\nimport { findProgramAddressSync } from '@project-serum/anchor/dist/cjs/utils/pubkey';\nimport { LIFINITY_AMM_LAYOUT, IPoolInfo } from '@jup-ag/lifinity-sdk';\n\nexport interface LifinitySwapLayoutState {\n  programId: PublicKey;\n  authority: PublicKey;\n  amm: PublicKey;\n  tokenAMint: PublicKey;\n  tokenBMint: PublicKey;\n  poolMint: PublicKey;\n  feeAccount: PublicKey;\n  pythAccount: PublicKey;\n  pythPcAccount: PublicKey;\n  configAccount: PublicKey;\n  poolCoinTokenAccount: PublicKey;\n  poolCoinMint: PublicKey;\n  poolPcTokenAccount: PublicKey;\n  poolPcMint: PublicKey;\n}\n\nexport const swapStateToPoolInfo = (state: LifinitySwapLayoutState): IPoolInfo => {\n  return {\n    amm: state.amm.toBase58(),\n    configAccount: state.configAccount.toBase58(),\n    feeAccount: state.feeAccount.toBase58(),\n    pythAccount: state.pythAccount.toBase58(),\n    pythPcAccount: state.pythPcAccount.toBase58(),\n    poolCoinMint: state.poolCoinMint.toBase58(),\n    poolCoinTokenAccount: state.poolCoinTokenAccount.toBase58(),\n    poolMint: state.poolMint.toBase58(),\n    // We don't use decimals at the moment, so default to 0, if we need to use it later, we can add it from API\n    poolCoinDecimal: 0,\n    poolPcDecimal: 0,\n    poolPcTokenAccount: state.poolPcTokenAccount.toBase58(),\n    poolPcMint: state.poolPcMint.toBase58(),\n  };\n};\n\nexport const accountInfoLifinitySwapLayout = (\n  address: PublicKey,\n  accountInfo: AccountInfo<Buffer>,\n): LifinitySwapLayoutState => {\n  const programId = accountInfo.owner;\n  const decoded = LIFINITY_AMM_LAYOUT.decode(accountInfo.data);\n  const [authority] = findProgramAddressSync([address.toBuffer()], programId);\n\n  return {\n    programId,\n    authority,\n    amm: address,\n    tokenAMint: decoded.tokenAMint,\n    tokenBMint: decoded.tokenBMint,\n    poolMint: decoded.poolMint,\n    feeAccount: decoded.poolFeeAccount,\n    pythAccount: decoded.pythAccount,\n    pythPcAccount: decoded.pythPcAccount,\n    configAccount: decoded.configAccount,\n    poolCoinTokenAccount: decoded.tokenAAccount,\n    poolCoinMint: decoded.tokenAMint,\n    poolPcTokenAccount: decoded.tokenBAccount,\n    poolPcMint: decoded.tokenBMint,\n  };\n};\n","import { getCurveAmount, getParsedData, IAmmData, ICurveAmount, IPoolInfo, TradeDirection } from '@jup-ag/lifinity-sdk';\nimport { AccountInfo, PublicKey, TransactionInstruction } from '@solana/web3.js';\nimport { AccountInfoMap, Amm, Quote, QuoteParams, SwapParams } from '../amm';\nimport { accountInfoLifinitySwapLayout, LifinitySwapLayoutState, swapStateToPoolInfo } from './swapLayout';\nimport { createLifinitySwapInstruction } from '../jupiterInstruction';\nimport Decimal from 'decimal.js';\n\nexport class LifinityAmm implements Amm {\n  id: string;\n  label = 'Lifinity' as const;\n  shouldPrefetch = false;\n  private swapState: LifinitySwapLayoutState;\n  private poolInfo: IPoolInfo;\n  private accountInfos: Array<{ publicKey: PublicKey; account: AccountInfo<Buffer> }> = [];\n\n  constructor(address: PublicKey, private ammAccountInfo: AccountInfo<Buffer>) {\n    this.id = address.toBase58();\n    this.swapState = accountInfoLifinitySwapLayout(address, ammAccountInfo);\n    this.poolInfo = swapStateToPoolInfo(this.swapState);\n  }\n\n  getAccountsForUpdate(): PublicKey[] {\n    return [\n      this.swapState.poolCoinTokenAccount,\n      this.swapState.poolPcTokenAccount,\n      this.swapState.configAccount,\n      this.swapState.pythAccount,\n      this.swapState.pythPcAccount,\n    ];\n  }\n\n  update(accountInfoMap: AccountInfoMap): void {\n    this.getAccountsForUpdate().forEach((publicKey, idx) => {\n      const account = accountInfoMap.get(publicKey.toBase58());\n      if (account) {\n        this.accountInfos[idx] = {\n          publicKey,\n          account,\n        };\n      }\n    });\n  }\n\n  getQuote({ sourceMint, amount }: QuoteParams): Quote {\n    if (this.accountInfos.length !== this.getAccountsForUpdate().length) {\n      throw new Error('Accounts not loaded');\n    }\n\n    const tradeDirection = this.swapState.poolCoinMint.equals(sourceMint) ? TradeDirection.AtoB : TradeDirection.BtoA;\n    const { amm, pyth, pythPc, fees, coinBalance, pcBalance, config }: IAmmData = getParsedData(\n      [{ publicKey: this.swapState.amm, account: this.ammAccountInfo }, ...this.accountInfos],\n      this.poolInfo,\n    );\n\n    if (\n      !pyth.status.equals(1) ||\n      // pythPc can be undefined from the lifinity SDK\n      (pythPc && !pythPc.status.equals(1))\n    ) {\n      throw new Error('Pyth accounts are outdated');\n    }\n\n    const amountIn = new Decimal(amount);\n    const result: ICurveAmount = getCurveAmount(\n      amountIn,\n      pyth.publishSlot.toNumber(), // Use pyth publish slot to not throw error\n      amm,\n      fees,\n      coinBalance,\n      pcBalance,\n      config,\n      pyth,\n      pythPc,\n      tradeDirection,\n    );\n\n    return {\n      notEnoughLiquidity: false,\n      inAmount: amount,\n      outAmount: result.amountSwapped.toNumber(),\n      feeAmount: result.fee.toNumber(),\n      feeMint: sourceMint.toBase58(),\n      feePct: result.feePercent.toNumber(),\n      priceImpactPct: result.priceImpact.toNumber(),\n    };\n  }\n\n  createSwapInstructions(swapParams: SwapParams): TransactionInstruction[] {\n    return [\n      createLifinitySwapInstruction({\n        swapState: this.swapState,\n        ...swapParams,\n      }),\n    ];\n  }\n\n  get reserveTokenMints() {\n    return [this.swapState.poolCoinMint, this.swapState.poolPcMint];\n  }\n}\n","import { AccountInfo, PublicKey } from '@solana/web3.js';\nimport Decimal from 'decimal.js';\nimport { AccountInfoMap, Amm, Quote, QuoteParams, SwapParams } from '../amm';\nimport { createWhirlpoolSwapInstruction } from '../jupiterInstruction';\nimport { findProgramAddressSync } from '@project-serum/anchor/dist/cjs/utils/pubkey';\nimport { WHIRLPOOL_PROGRAM_ID } from '../../constants';\nimport {\n  parseWhirlpool,\n  parseTickArray,\n  WhirlpoolData,\n  getSwapQuote,\n  getTickArrayPks,\n  TickArrayData,\n  getTickArrayPublicKeysForSwap,\n} from '@jup-ag/whirlpool-sdk';\nimport BN from 'bn.js';\n\nconst FEE_RATE_MUL_VALUE = 1_000_000;\n\nfunction fromX64(num: BN): Decimal {\n  return new Decimal(num.toString()).mul(Decimal.pow(2, -64));\n}\n\nfunction parseWhirlpoolSafe(address: PublicKey, data: Buffer) {\n  const whirlpoolData = parseWhirlpool(data);\n  if (!whirlpoolData) throw new Error(`Failed to parse whilpool ${address.toBase58()}`);\n  return whirlpoolData;\n}\n\nexport class WhirlpoolAmm implements Amm {\n  id: string;\n  label = 'Orca (Whirlpool)';\n  shouldPrefetch = true;\n\n  private whirlpoolData: WhirlpoolData;\n  private tickArrays: Map<string, TickArrayData> = new Map();\n  private tickPks: PublicKey[];\n  private oracle: PublicKey;\n  private feePct: number;\n\n  constructor(private address: PublicKey, whirlpoolAccountInfo: AccountInfo<Buffer>) {\n    this.id = address.toBase58();\n    this.whirlpoolData = parseWhirlpoolSafe(address, whirlpoolAccountInfo.data);\n\n    this.oracle = findProgramAddressSync([Buffer.from('oracle'), address.toBuffer()], WHIRLPOOL_PROGRAM_ID)[0];\n    this.feePct = new Decimal(this.whirlpoolData.feeRate).div(FEE_RATE_MUL_VALUE).toNumber();\n    this.tickPks = getTickArrayPks(address, this.whirlpoolData);\n  }\n\n  getAccountsForUpdate(): PublicKey[] {\n    // The tickCurrentIndex is technically behind here, belonging to the last refresh\n    return [this.address, ...this.tickPks];\n  }\n\n  update(accountInfoMap: AccountInfoMap): void {\n    const whirlpoolAccountInfo = accountInfoMap.get(this.address.toBase58());\n    if (!whirlpoolAccountInfo) throw new Error(`Missing ${this.address.toBase58()}`);\n    this.whirlpoolData = parseWhirlpoolSafe(this.address, whirlpoolAccountInfo.data);\n    this.tickPks = getTickArrayPks(this.address, this.whirlpoolData);\n\n    this.tickArrays.clear();\n    for (const tickArrayPk of this.tickPks) {\n      const tickArrayAddress = tickArrayPk.toBase58();\n      const tickArrayAccountInfo = accountInfoMap.get(tickArrayAddress);\n      if (!tickArrayAccountInfo) {\n        // This can happen if we reach an uninitialized tick, and it is likely to occur right now\n        continue;\n      }\n      const tickArray = parseTickArray(tickArrayAccountInfo.data);\n      if (!tickArray) throw new Error(`Could not parse tick array ${tickArrayAddress}`);\n      this.tickArrays.set(tickArrayAddress, tickArray);\n    }\n  }\n\n  getQuote({ sourceMint, amount }: QuoteParams): Quote {\n    const swapQuote = getSwapQuote({\n      poolAddress: this.address,\n      whirlpool: this.whirlpoolData,\n      tickArrays: this.tickArrays,\n      tokenMint: sourceMint,\n      tokenAmount: new BN(amount.toString()),\n      isInput: true,\n      // slippageTolerance,\n    });\n\n    const inAmount = Number(swapQuote.amountIn.toString());\n    const feeAmount = Math.floor(this.feePct * inAmount);\n\n    const quotePrice = swapQuote.aToB\n      ? new Decimal(swapQuote.amountOut.toString()).div(swapQuote.amountIn.toString())\n      : new Decimal(swapQuote.amountIn.toString()).div(swapQuote.amountOut.toString());\n\n    const currentPrice = fromX64(this.whirlpoolData.sqrtPrice).pow(2);\n    const priceImpactPct = currentPrice.minus(quotePrice).div(currentPrice).abs().toNumber();\n\n    return {\n      notEnoughLiquidity: false,\n      inAmount,\n      outAmount: Number(swapQuote.amountOut.toString()),\n      feeAmount,\n      feeMint: sourceMint.toBase58(),\n      feePct: this.feePct,\n      priceImpactPct: Number(priceImpactPct),\n    };\n  }\n\n  createSwapInstructions(swapParams: SwapParams) {\n    const aToB = swapParams.sourceMint.equals(this.whirlpoolData.tokenMintA);\n\n    const [tickArray0, tickArray1, tickArray2] = getTickArrayPublicKeysForSwap(\n      this.whirlpoolData.tickCurrentIndex,\n      this.whirlpoolData.sqrtPrice,\n      this.whirlpoolData.tickSpacing,\n      this.address,\n      this.tickArrays,\n      WHIRLPOOL_PROGRAM_ID,\n      aToB,\n    );\n\n    return [\n      createWhirlpoolSwapInstruction({\n        additionalArgs: {\n          aToB,\n          whirlpool: this.address,\n          tickArray0,\n          tickArray1,\n          tickArray2,\n          oracle: this.oracle,\n          ...this.whirlpoolData,\n        },\n        ...swapParams,\n      }),\n    ];\n  }\n\n  get reserveTokenMints() {\n    return [this.whirlpoolData.tokenMintA, this.whirlpoolData.tokenMintB];\n  }\n}\n","// TODO: Move this to SDK rather than being maintained by us\nimport {\n  CyclosCore,\n  buildTick,\n  generateBitmapWord,\n  nextInitializedBit,\n  tickPosition,\n  TickDataProvider,\n  PoolVars,\n  TICK_SEED,\n  u32ToSeed,\n  BITMAP_SEED,\n  TickMath,\n  u16ToSeed,\n} from '@jup-ag/cykura-sdk';\nimport * as anchor from '@project-serum/anchor';\nimport { BN, IdlAccounts } from '@project-serum/anchor';\nimport { findProgramAddressSync } from '@project-serum/anchor/dist/cjs/utils/pubkey';\nimport { AccountInfo, PublicKey } from '@solana/web3.js';\nimport JSBI from 'jsbi';\n\nexport type TickBitmapState = IdlAccounts<CyclosCore>['tickBitmapState'];\nexport type TickState = IdlAccounts<CyclosCore>['tickState'];\n\nexport class SolanaTickDataProvider implements TickDataProvider {\n  program: anchor.Program<CyclosCore>;\n  pool: PoolVars;\n\n  bitmapCache: Map<\n    number,\n    {\n      address: PublicKey;\n      word: anchor.BN;\n    }\n  >;\n\n  tickCache: Map<\n    number,\n    {\n      address: PublicKey;\n      liquidityNet: JSBI;\n    }\n  >;\n\n  accountsToFetch: { bitmaps: PublicKey[]; ticks: PublicKey[] } = { bitmaps: [], ticks: [] };\n\n  constructor(program: anchor.Program<CyclosCore>, pool: PoolVars) {\n    this.program = program;\n    this.pool = pool;\n    this.bitmapCache = new Map();\n    this.tickCache = new Map();\n  }\n\n  /**\n   * Caches ticks and bitmap accounts near the current price\n   * @param tickCurrent The current pool tick\n   * @param tickSpacing The pool tick spacing\n   */\n  async eagerLoadCache(tickCurrent: number, tickSpacing: number) {\n    // fetch 10 bitmaps on each side in a single fetch. Find active ticks and read them together\n    const compressed = JSBI.toNumber(JSBI.divide(JSBI.BigInt(tickCurrent), JSBI.BigInt(tickSpacing)));\n    const { wordPos } = tickPosition(compressed);\n\n    try {\n      const bitmapsToFetch = [];\n      const { wordPos: WORD_POS_MIN } = tickPosition(Math.floor(TickMath.MIN_TICK / tickSpacing));\n      const { wordPos: WORD_POS_MAX } = tickPosition(Math.floor(TickMath.MAX_TICK / tickSpacing));\n      const minWord = Math.max(wordPos - 10, WORD_POS_MIN);\n      const maxWord = Math.min(wordPos + 10, WORD_POS_MAX);\n      for (let i = minWord; i < maxWord; i++) {\n        bitmapsToFetch.push(this.getBitmapAddressSync(i));\n      }\n\n      const fetchedBitmaps = (await this.program.account.tickBitmapState.fetchMultiple(\n        bitmapsToFetch,\n      )) as (TickBitmapState | null)[];\n\n      const tickAddresses = [];\n      for (let i = 0; i < maxWord - minWord; i++) {\n        const currentWordPos = i + minWord;\n        const wordArray = fetchedBitmaps[i]?.word;\n        const word = wordArray ? generateBitmapWord(wordArray) : new BN(0);\n        this.bitmapCache.set(currentWordPos, {\n          address: bitmapsToFetch[i],\n          word,\n        });\n        if (word && !word.eqn(0)) {\n          for (let j = 0; j < 256; j++) {\n            if (word.shrn(j).and(new BN(1)).eqn(1)) {\n              const tick = ((currentWordPos << 8) + j) * tickSpacing;\n              const tickAddress = this.getTickAddressSync(tick);\n              tickAddresses.push(tickAddress);\n            }\n          }\n        }\n      }\n\n      const fetchedTicks = (await this.program.account.tickState.fetchMultiple(tickAddresses)) as (TickState | null)[];\n      for (const i in tickAddresses) {\n        const fetchedTick = fetchedTicks[i];\n        if (!fetchedTick) continue;\n\n        const { tick, liquidityNet } = fetchedTick;\n        this.tickCache.set(tick, {\n          address: tickAddresses[i],\n          liquidityNet: JSBI.BigInt(liquidityNet),\n        });\n      }\n    } catch (error) {\n      console.log(error);\n    }\n  }\n\n  /**\n   * Return accounts to cache and returns early if there is insufficient data\n   * @param tickCurrent The current pool tick\n   * @param tickSpacing The pool tick spacing\n   */\n  lazyLoadAccountsToCache(tickCurrent: number, tickSpacing: number): PublicKey[] {\n    // fetch 10 bitmaps on each side in a single fetch. Find active ticks and read them together\n    const compressed = JSBI.toNumber(JSBI.divide(JSBI.BigInt(tickCurrent), JSBI.BigInt(tickSpacing)));\n    const { wordPos } = tickPosition(compressed);\n\n    const bitmapsToFetch: PublicKey[] = [];\n    const bitmaps: ({ address: PublicKey; word: anchor.BN } | undefined)[] = [];\n    const { wordPos: WORD_POS_MIN } = tickPosition(Math.floor(TickMath.MIN_TICK / tickSpacing));\n    const { wordPos: WORD_POS_MAX } = tickPosition(Math.floor(TickMath.MAX_TICK / tickSpacing));\n    const minWord = Math.max(wordPos - 10, WORD_POS_MIN);\n    const maxWord = Math.min(wordPos + 10, WORD_POS_MAX);\n    for (let i = minWord; i < maxWord; i++) {\n      bitmapsToFetch.push(this.getBitmapAddressSync(i));\n      const bitmap = this.bitmapCache.get(i);\n      bitmaps.push(bitmap);\n    }\n\n    const tickAddressesToFetch = [];\n    for (let i = 0; i < maxWord - minWord; i++) {\n      const currentWordPos = i + minWord;\n      // We might not have the bitmap yet in the first iteration\n      const word = bitmaps[i]?.word ?? new BN(0);\n      this.bitmapCache.set(currentWordPos, {\n        address: bitmapsToFetch[i],\n        word,\n      });\n      if (word && !word.eqn(0)) {\n        for (let j = 0; j < 256; j++) {\n          if (word.shrn(j).and(new BN(1)).eqn(1)) {\n            const tick = ((currentWordPos << 8) + j) * tickSpacing;\n            const tickAddress = this.getTickAddressSync(tick);\n            tickAddressesToFetch.push(tickAddress);\n          }\n        }\n      }\n    }\n\n    this.accountsToFetch = { bitmaps: bitmapsToFetch, ticks: tickAddressesToFetch };\n    return [...bitmapsToFetch, ...tickAddressesToFetch];\n  }\n\n  getTick(tick: number): {\n    address: anchor.web3.PublicKey;\n    liquidityNet: JSBI;\n  } {\n    let savedTick = this.tickCache.get(tick);\n    if (!savedTick) {\n      throw new Error('Tick not cached');\n    }\n\n    return {\n      address: savedTick.address,\n      liquidityNet: savedTick.liquidityNet,\n    };\n  }\n\n  async getTickAddress(tick: number): Promise<anchor.web3.PublicKey> {\n    return this.getTickAddressSync(tick);\n  }\n\n  getTickAddressSync(tick: number): anchor.web3.PublicKey {\n    return findProgramAddressSync(\n      [TICK_SEED, this.pool.token0.toBuffer(), this.pool.token1.toBuffer(), u32ToSeed(this.pool.fee), u32ToSeed(tick)],\n      this.program.programId,\n    )[0];\n  }\n\n  async getBitmapAddress(wordPos: number): Promise<anchor.web3.PublicKey> {\n    return this.getBitmapAddressSync(wordPos);\n  }\n\n  getBitmapAddressSync(wordPos: number): anchor.web3.PublicKey {\n    return findProgramAddressSync(\n      [\n        BITMAP_SEED,\n        this.pool.token0.toBuffer(),\n        this.pool.token1.toBuffer(),\n        u32ToSeed(this.pool.fee),\n        u16ToSeed(wordPos),\n      ],\n      this.program.programId,\n    )[0];\n  }\n\n  /**\n   * Fetches the cached bitmap for the word\n   * @param wordPos\n   */\n  getBitmap(wordPos: number): {\n    address: anchor.web3.PublicKey;\n    word: anchor.BN;\n  } {\n    let savedBitmap = this.bitmapCache.get(wordPos);\n    if (!savedBitmap) {\n      throw new Error('Bitmap not cached');\n    }\n\n    return savedBitmap;\n  }\n\n  /**\n   * Finds the next initialized tick in the given word. Fetched bitmaps are saved in a\n   * cache for quicker lookups in future.\n   * @param tick The current tick\n   * @param lte Whether to look for a tick less than or equal to the current one, or a tick greater than or equal to\n   * @param tickSpacing The tick spacing for the pool\n   * @returns\n   */\n  nextInitializedTickWithinOneWord(\n    tick: number,\n    lte: boolean,\n    tickSpacing: number,\n  ): [number, boolean, number, number, PublicKey] {\n    let compressed = JSBI.toNumber(JSBI.divide(JSBI.BigInt(tick), JSBI.BigInt(tickSpacing)));\n    if (tick < 0 && tick % tickSpacing !== 0) {\n      compressed -= 1;\n    }\n    if (!lte) {\n      compressed += 1;\n    }\n\n    const { wordPos, bitPos } = tickPosition(compressed);\n    const cachedBitmap = this.getBitmap(wordPos);\n\n    const { next: nextBit, initialized } = nextInitializedBit(cachedBitmap.word, bitPos, lte);\n    const nextTick = buildTick(wordPos, nextBit, tickSpacing);\n    return [nextTick, initialized, wordPos, bitPos, cachedBitmap.address];\n  }\n\n  // Change this to be a blind decoder rather than decode what we know\n  updateCachedAccountInfos(accountInfoMap: Map<string, AccountInfo<Buffer> | null>) {\n    for (const bitmapAddress of this.accountsToFetch.bitmaps) {\n      const bitmapAccountInfo = accountInfoMap.get(bitmapAddress.toBase58());\n      if (bitmapAccountInfo) {\n        const tickBitmapState = this.program.coder.accounts.decode<TickBitmapState>(\n          'tickBitmapState',\n          bitmapAccountInfo.data,\n        );\n\n        this.bitmapCache.set(tickBitmapState.wordPos, {\n          address: bitmapAddress,\n          word: generateBitmapWord(tickBitmapState.word),\n        });\n      }\n    }\n\n    for (const tickAddress of this.accountsToFetch.ticks) {\n      const tickStateAccountInfo = accountInfoMap.get(tickAddress.toBase58());\n      if (tickStateAccountInfo) {\n        const tickState = this.program.coder.accounts.decode<TickState>('tickState', tickStateAccountInfo.data);\n        this.tickCache.set(tickState.tick, {\n          address: tickAddress,\n          liquidityNet: JSBI.BigInt(tickState.liquidityNet),\n        });\n      }\n    }\n  }\n}\n","import { AccountInfo, AccountMeta, Connection, PublicKey, TransactionInstruction } from '@solana/web3.js';\nimport JSBI from 'jsbi';\nimport * as anchor from '@project-serum/anchor';\nimport { AccountInfoMap, Amm, Quote, QuoteParams, SwapParams } from '../amm';\nimport { Pool as CykuraPool, CyclosCore, IDL, OBSERVATION_SEED, u32ToSeed, u16ToSeed } from '@jup-ag/cykura-sdk';\nimport { CurrencyAmount, Token } from '@jup-ag/cykura-sdk-core';\nimport { IdlAccounts, Wallet } from '@project-serum/anchor';\nimport { SolanaTickDataProvider } from './solanaTickDataProvider';\nimport { CYKURA_PROGRAM_ID } from '../../constants';\nimport { ASSOCIATED_TOKEN_PROGRAM_ID, TOKEN_PROGRAM_ID } from '@solana/spl-token';\nimport { findProgramAddressSync } from '@project-serum/anchor/dist/cjs/utils/pubkey';\nimport { createCykuraSwapInstruction } from '../jupiterInstruction';\nimport { toDecimal } from '@jup-ag/math';\n\nexport type PoolState = IdlAccounts<CyclosCore>['poolState'];\n\nconst FEE_DENOMINATOR = 1_000_000;\n\nconst provider = new anchor.Provider(null as unknown as Connection, null as unknown as Wallet, {\n  skipPreflight: false,\n});\nconst CYCLOS_CORE = new anchor.Program<CyclosCore>(IDL, CYKURA_PROGRAM_ID, provider);\n\nexport class CykuraAmm implements Amm {\n  label = 'Cykura' as const;\n  id: string;\n  shouldPrefetch = true;\n  private poolState: PoolState;\n  private pool: CykuraPool;\n  private tickDataProvider: SolanaTickDataProvider;\n  private tokens: { token0: Token; token1: Token };\n  public vaults: { vault0: PublicKey; vault1: PublicKey };\n  private swapAccountMetas: AccountMeta[] = [];\n  private feePct: number;\n\n  constructor(private address: PublicKey, accountInfoOrPoolState: AccountInfo<Buffer> | PoolState) {\n    this.id = address.toBase58();\n    let poolState: PoolState;\n    if ('data' in accountInfoOrPoolState) {\n      poolState = CYCLOS_CORE.coder.accounts.decode<PoolState>('poolState', accountInfoOrPoolState.data);\n    } else {\n      poolState = accountInfoOrPoolState;\n    }\n\n    this.poolState = poolState;\n\n    const { token0, token1, fee, sqrtPriceX32, liquidity, tick } = this.poolState;\n\n    this.tickDataProvider = new SolanaTickDataProvider(CYCLOS_CORE, {\n      token0,\n      token1,\n      fee,\n    });\n\n    this.tokens = {\n      token0: new Token(101, token0, 0, '', ''),\n      token1: new Token(101, token1, 0, '', ''),\n    };\n\n    this.pool = new CykuraPool(\n      this.tokens.token0,\n      this.tokens.token1,\n      fee,\n      JSBI.BigInt(sqrtPriceX32.toString()),\n      JSBI.BigInt(liquidity.toString()),\n      tick,\n      this.tickDataProvider,\n    );\n\n    this.vaults = {\n      vault0: findProgramAddressSync(\n        [this.address.toBuffer(), TOKEN_PROGRAM_ID.toBuffer(), token0.toBuffer()],\n        ASSOCIATED_TOKEN_PROGRAM_ID,\n      )[0],\n      vault1: findProgramAddressSync(\n        [this.address.toBuffer(), TOKEN_PROGRAM_ID.toBuffer(), token1.toBuffer()],\n        ASSOCIATED_TOKEN_PROGRAM_ID,\n      )[0],\n    };\n\n    this.feePct = this.poolState.fee / FEE_DENOMINATOR;\n  }\n\n  getAccountsForUpdate(): PublicKey[] {\n    return [\n      this.address,\n      ...this.tickDataProvider.lazyLoadAccountsToCache(this.pool.tickCurrent, this.pool.tickSpacing),\n    ];\n  }\n\n  update(accountInfoMap: AccountInfoMap) {\n    const poolAccountInfo = accountInfoMap.get(this.address.toBase58());\n    if (!poolAccountInfo) {\n      throw new Error(`Could not find poolAccountInfo ${this.address.toBase58()}`);\n    }\n    this.poolState = CYCLOS_CORE.coder.accounts.decode<PoolState>('poolState', poolAccountInfo.data);\n    const { fee, sqrtPriceX32, liquidity, tick } = this.poolState;\n    this.pool = new CykuraPool(\n      this.tokens.token0,\n      this.tokens.token1,\n      fee,\n      JSBI.BigInt(sqrtPriceX32.toString()),\n      JSBI.BigInt(liquidity.toString()),\n      tick,\n      this.tickDataProvider,\n    );\n\n    this.tickDataProvider.updateCachedAccountInfos(accountInfoMap);\n  }\n\n  getQuote({ sourceMint, amount }: QuoteParams): Quote {\n    const inputToken = sourceMint.equals(this.poolState.token0) ? this.tokens.token0 : this.tokens.token1;\n    const [currentOutAmount, newPool, swapAccountMetas] = this.pool.getOutputAmount(\n      CurrencyAmount.fromRawAmount(inputToken, JSBI.BigInt(amount)),\n    );\n    this.swapAccountMetas = swapAccountMetas;\n\n    const priceImpactDecimal = toDecimal(JSBI.subtract(this.pool.sqrtRatioX32, newPool.sqrtRatioX32)).div(\n      this.pool.sqrtRatioX32.toString(),\n    );\n\n    return {\n      notEnoughLiquidity: false,\n      inAmount: amount,\n      outAmount: JSBI.toNumber(currentOutAmount.quotient),\n      // Might not be spot on but avoids many conversions\n      feeAmount: Math.floor((amount * this.poolState.fee) / FEE_DENOMINATOR),\n      feeMint: sourceMint.toBase58(),\n      feePct: this.feePct,\n      priceImpactPct: priceImpactDecimal.toNumber(),\n    };\n  }\n\n  createSwapInstructions(swapParams: SwapParams): TransactionInstruction[] {\n    const [inputVault, outputVault] = swapParams.sourceMint.equals(this.poolState.token0)\n      ? [this.vaults.vault0, this.vaults.vault1]\n      : [this.vaults.vault1, this.vaults.vault0];\n\n    const lastObservationState = findProgramAddressSync(\n      [\n        OBSERVATION_SEED,\n        this.poolState.token0.toBuffer(),\n        this.poolState.token1.toBuffer(),\n        u32ToSeed(this.poolState.fee),\n        u16ToSeed(this.poolState.observationIndex),\n      ],\n      CYKURA_PROGRAM_ID,\n    )[0];\n\n    const nextObservationState = findProgramAddressSync(\n      [\n        OBSERVATION_SEED,\n        this.poolState.token0.toBuffer(),\n        this.poolState.token1.toBuffer(),\n        u32ToSeed(this.poolState.fee),\n        u16ToSeed((this.poolState.observationIndex + 1) % this.poolState.observationCardinalityNext),\n      ],\n      CYKURA_PROGRAM_ID,\n    )[0];\n\n    const additionalArgs = {\n      poolAddress: this.address,\n      inputVault,\n      outputVault,\n      nextObservationState,\n      lastObservationState,\n      swapAccountMetas: this.swapAccountMetas,\n    };\n    return [createCykuraSwapInstruction({ ...swapParams, additionalArgs })];\n  }\n\n  get reserveTokenMints() {\n    return [this.poolState.token0, this.poolState.token1];\n  }\n}\n","import { AccountInfo, PublicKey } from '@solana/web3.js';\nimport {\n  ALDRIN_SWAP_V2_PROGRAM_ID,\n  ALDRIN_SWAP_PROGRAM_ID,\n  DEVNET_SERUM_DEX_PROGRAM,\n  MAINNET_SERUM_DEX_PROGRAM,\n  RAYDIUM_AMM_V4_PROGRAM_ID,\n  CROPPER_PROGRAM_ID,\n  CREMA_PROGRAM_ID,\n  SENCHA_PROGRAM_ID,\n  MERCURIAL_SWAP_PROGRAM_ID,\n  LIFINITY_PROGRAM_ID,\n  WHIRLPOOL_PROGRAM_ID,\n  CYKURA_PROGRAM_ID,\n} from '../constants';\nimport { Amm } from './amm';\nimport { SerumMarket, StableSwap } from './market';\nimport { SWAP_PROGRAM_ID as SABER_SWAP_PROGRAM_ID } from '@saberhq/stableswap-sdk';\nimport { SaberAmm } from './saber/saberAmm';\nimport { SerumAmm } from './serum/serumAmm';\nimport { findProgramAddressSync } from '@project-serum/anchor/dist/cjs/utils/pubkey';\nimport { AldrinAmm } from './aldrin/aldrinAmm';\nimport { PROGRAM_ID_TO_LABEL } from './spl-token-swap/splTokenSwapPools';\nimport { SplTokenSwapAmm } from './spl-token-swap/splTokenSwapAmm';\nimport { MercurialAmm } from './mercurial/mercurialAmm';\nimport { RaydiumAmm } from './raydium/raydiumAmm';\nimport { CropperAmm } from './cropper/cropperAmm';\nimport { CremaAmm } from './crema/cremaAmm';\nimport { SenchaAmm } from './sencha/senchaAmm';\nimport { LifinityAmm } from './lifinity/lifinityAmm';\nimport { WhirlpoolAmm } from './whirlpool/whirlpoolAmm';\nimport { CykuraAmm } from './cykura/cykuraAmm';\n\nexport function ammFactory(address: PublicKey, accountInfo: AccountInfo<Buffer>, params?: any): Amm | undefined {\n  const programId = new PublicKey(accountInfo.owner);\n\n  if (programId.equals(MAINNET_SERUM_DEX_PROGRAM) || programId.equals(DEVNET_SERUM_DEX_PROGRAM)) {\n    const decoded = SerumMarket.getLayout(programId).decode(accountInfo.data);\n    if (!decoded.accountFlags.initialized || !decoded.accountFlags.market) {\n      throw new Error('Invalid market');\n    }\n    const serumMarket = new SerumMarket(decoded, 0, 0, {}, programId);\n    return new SerumAmm(serumMarket);\n  } else if (programId.equals(RAYDIUM_AMM_V4_PROGRAM_ID)) {\n    const raydiumAmm = new RaydiumAmm(address, accountInfo, params);\n    if (raydiumAmm.status === 1) {\n      return raydiumAmm;\n    }\n  } else if (programId.equals(MERCURIAL_SWAP_PROGRAM_ID)) {\n    return new MercurialAmm(address, accountInfo, params);\n  } else if (programId.equals(SABER_SWAP_PROGRAM_ID)) {\n    const stableSwap = StableSwap.loadWithData(\n      address,\n      accountInfo.data,\n      findProgramAddressSync([address.toBuffer()], SABER_SWAP_PROGRAM_ID)[0],\n    );\n\n    if (stableSwap.state.isPaused || !stableSwap.state.isInitialized) return;\n\n    return new SaberAmm(stableSwap);\n  } else if (programId.equals(CREMA_PROGRAM_ID)) {\n    return new CremaAmm(address, accountInfo);\n  } else if (programId.equals(ALDRIN_SWAP_PROGRAM_ID) || programId.equals(ALDRIN_SWAP_V2_PROGRAM_ID)) {\n    return new AldrinAmm(address, accountInfo, params);\n  } else if ([...PROGRAM_ID_TO_LABEL.keys()].includes(programId.toBase58())) {\n    const label = PROGRAM_ID_TO_LABEL.get(accountInfo.owner.toBase58()) ?? 'Unknown';\n    return new SplTokenSwapAmm(address, accountInfo, label);\n  } else if (programId.equals(CROPPER_PROGRAM_ID)) {\n    return new CropperAmm(address, accountInfo, params);\n  } else if (programId.equals(SENCHA_PROGRAM_ID)) {\n    const senchaAmm = new SenchaAmm(address, accountInfo);\n    if (senchaAmm.isPaused) return;\n    return senchaAmm;\n  } else if (programId.equals(LIFINITY_PROGRAM_ID)) {\n    return new LifinityAmm(address, accountInfo);\n  } else if (programId.equals(WHIRLPOOL_PROGRAM_ID)) {\n    return new WhirlpoolAmm(address, accountInfo);\n  } else if (programId.equals(CYKURA_PROGRAM_ID)) {\n    return new CykuraAmm(address, accountInfo);\n  }\n  // Not supported by frontend\n  return;\n}\n","import { AccountInfo, Connection, PublicKey } from '@solana/web3.js';\nimport { isValidRoute, MarketInfo } from './market';\nimport { WRAPPED_SOL_MINT } from '../constants';\nimport { RaydiumAmm } from './raydium/raydiumAmm';\nimport fetch from 'cross-fetch';\nimport { TokenRouteSegments } from './types';\nimport { Amm, prefetchAmms } from './amm';\nimport { SerumAmm } from './serum/serumAmm';\nimport { ammFactory } from './ammFactory';\nimport { getSaberWrappedDecimalsAmms, SaberAddDecimalsAmm } from './saber/saberAddDecimalsAmm';\nimport { SplitTradeAmm } from './split-trade/splitTradeAmm';\nimport { getTwoPermutations } from '../utils/getTwoPermutations';\nimport { chunkedGetMultipleAccountInfos } from '../utils/chunkedGetMultipleAccountInfos';\n\nexport interface TransactionFeeInfo {\n  signatureFee: number;\n  openOrdersDeposits: number[];\n  ataDeposits: number[];\n  /* Overall amount that will be deducted from user wallet after the swap */\n  totalFeeAndDeposits: number;\n  /* Amount for fee, deposits and temporary token accounts */\n  minimumSOLForTransaction: number;\n}\n\nexport interface RouteInfo {\n  marketInfos: MarketInfo[];\n  inAmount: number;\n  outAmount: number;\n  outAmountWithSlippage: number;\n  priceImpactPct: number;\n  getDepositAndFee: () => Promise<TransactionFeeInfo | undefined>;\n}\n\ntype MarketsCache = Array<\n  Omit<AccountInfo<Buffer>, 'data' | 'owner'> & {\n    data: [string, 'base64'];\n    owner: string;\n    pubkey: string;\n  }\n>;\n\ntype KeyedAccountInfo = AccountInfo<Buffer> & {\n  pubkey: PublicKey;\n  // api can pass some extra params\n  params?: any;\n};\n\nexport const fetchMarketCache = async (url: string) => {\n  const marketsCache = (await (await fetch(url)).json()) as MarketsCache;\n  return marketsCache;\n};\n\n/** For testing purposes when api does not have the new pools */\nexport async function fetchExtraKeyedAccountInfos(connection: Connection, pks: PublicKey[]) {\n  const extraKeyedAccountInfos = (\n    await chunkedGetMultipleAccountInfos(\n      connection,\n      pks.map((item) => item.toBase58()),\n    )\n  ).map((item, index) => {\n    const pubkey = pks[index];\n    if (!item) throw new Error(`Failed to fetch pool ${pubkey.toBase58()}`);\n    return { pubkey, ...item };\n  });\n  return extraKeyedAccountInfos;\n}\n\nexport async function getAllAmms(connection: Connection, marketsCache: MarketsCache): Promise<Amm[]> {\n  const marketCacheToAccountInfo = (marketsCache: MarketsCache): Array<KeyedAccountInfo> => {\n    return marketsCache.map((market) => {\n      const {\n        data: [accountInfo, format],\n        pubkey,\n        ...rest\n      } = market;\n      return {\n        ...rest,\n        pubkey: new PublicKey(pubkey),\n        data: Buffer.from(accountInfo, format),\n        owner: new PublicKey(rest.owner),\n      };\n    });\n  };\n\n  const marketKeyedAccountInfos = marketCacheToAccountInfo(marketsCache);\n\n  // this is used for development\n  const extraKeys: Array<PublicKey> = [];\n\n  if (extraKeys.length) {\n    const extraKeyedAccountInfos = await fetchExtraKeyedAccountInfos(connection, extraKeys);\n    marketKeyedAccountInfos.push(...extraKeyedAccountInfos);\n  }\n\n  const amms = marketKeyedAccountInfos.reduce((acc, keyedAccountInfo) => {\n    const amm = ammFactory(keyedAccountInfo.pubkey, keyedAccountInfo, keyedAccountInfo.params);\n    // Amm might not be recognized by the current version of the frontend\n    // or be in a state we don't want\n    if (amm) {\n      acc.push(amm);\n    }\n    return acc;\n  }, new Array<Amm>());\n\n  await prefetchAmms(\n    amms.filter((amm) => amm.shouldPrefetch),\n    connection,\n  );\n\n  amms.push(...getSaberWrappedDecimalsAmms());\n\n  return amms;\n}\n\nexport function ammCrossProtocolPairs(arr: Amm[], callback: (a: Amm, b: Amm) => void) {\n  for (let i = 0; i < arr.length; i++) {\n    for (let j = i + 1; j < arr.length; j++) {\n      // Don't pair amm with same label\n      if (arr[i].label !== arr[j].label) {\n        callback(arr[i], arr[j]);\n      }\n    }\n  }\n}\n\nexport function getTokenRouteSegments(amms: Amm[]): TokenRouteSegments {\n  const tokenRouteSegments = new Map<string, Map<string, Amm[]>>();\n\n  amms.forEach((amm) => {\n    const reserveTokenMintPermutations = getTwoPermutations(amm.reserveTokenMints);\n    reserveTokenMintPermutations.forEach(([firstReserveMint, secondReserveMint]) => {\n      addSegment(firstReserveMint.toBase58(), secondReserveMint.toBase58(), amm, tokenRouteSegments);\n    });\n  });\n\n  return tokenRouteSegments;\n}\n\nfunction addSegment(inMint: string, outMint: string, amm: Amm, tokenRouteSegments: TokenRouteSegments) {\n  let segments = tokenRouteSegments.get(inMint);\n\n  if (!segments) {\n    segments = new Map<string, Amm[]>([[outMint, []]]);\n    tokenRouteSegments.set(inMint, segments);\n  }\n\n  let amms = segments.get(outMint);\n  if (!amms) {\n    amms = [];\n    segments.set(outMint, amms);\n  }\n\n  amms.push(amm);\n}\n\nexport type Route = {\n  amms: Amm[];\n  mints: PublicKey[];\n};\n\n/*\n * Construct TokenRouteSegment that is only used for the selected inputMint and outputMint\n * Example:\n *   SOL => USDC, the map would consist of\n *     - SOL => USDC => Amm[]\n *     - SOL => USDT => Amm[]\n *     - USDT => SOL => Amm[]\n */\nexport function computeInputRouteSegments({\n  inputMint,\n  outputMint,\n  tokenRouteSegments,\n  intermediateTokens,\n}: {\n  inputMint: string;\n  outputMint: string;\n  tokenRouteSegments: TokenRouteSegments;\n  intermediateTokens?: string[];\n}): TokenRouteSegments {\n  const inputRouteSegments: TokenRouteSegments = new Map();\n\n  const inputSegment = tokenRouteSegments.get(inputMint);\n  const outputSegment = tokenRouteSegments.get(outputMint);\n\n  if (inputSegment && outputSegment) {\n    const inputInnerMap = new Map<string, Amm[]>();\n    const outputInnerMap = new Map<string, Amm[]>();\n\n    for (let [outMint, amms] of inputSegment.entries()) {\n      if (outMint === outputMint) {\n        inputInnerMap.set(outMint, amms);\n        outputInnerMap.set(inputMint, amms);\n        continue;\n      }\n\n      if (intermediateTokens && !intermediateTokens.includes(outMint)) {\n        continue;\n      }\n      const intersectionAmms = outputSegment.get(outMint);\n      if (intersectionAmms) {\n        inputRouteSegments.set(\n          outMint,\n          new Map([\n            [inputMint, amms],\n            [outputMint, intersectionAmms],\n          ]),\n        );\n        inputInnerMap.set(outMint, amms);\n        outputInnerMap.set(outMint, intersectionAmms);\n      }\n    }\n    inputRouteSegments.set(inputMint, inputInnerMap);\n    inputRouteSegments.set(outputMint, outputInnerMap);\n  }\n\n  return inputRouteSegments;\n}\n\nexport function computeRouteMap(\n  tokenRouteSegments: TokenRouteSegments,\n  intermediateTokens?: string[],\n  onlyDirectRoutes?: boolean,\n): Map<string, string[]> {\n  const routeMap = new Map<string, string[]>();\n\n  for (const [tokenMint, firstLevelOutputs] of tokenRouteSegments) {\n    const validOutputMints = new Set<string>();\n\n    for (const [firstLevelOutputMint, firstLevelAmms] of firstLevelOutputs) {\n      validOutputMints.add(firstLevelOutputMint);\n\n      if (onlyDirectRoutes) {\n        continue;\n      }\n      // add the single level output as possible valid mints as well\n      const secondLevelOutputs = tokenRouteSegments.get(firstLevelOutputMint) ?? [];\n      for (const [secondLevelOutputMint, secondLevelAmms] of secondLevelOutputs) {\n        // Prevent output mint == input mint when routing\n        if (secondLevelOutputMint === tokenMint) {\n          continue;\n        }\n\n        // if intermediateTokens is specified and it doesnt include in the intermediateTokens, skip it\n        if (intermediateTokens && !intermediateTokens.includes(firstLevelOutputMint)) {\n          continue;\n        }\n\n        for (const firstLevelAmm of firstLevelAmms) {\n          for (const secondLevelAmm of secondLevelAmms) {\n            if (isValidRoute(firstLevelAmm, secondLevelAmm)) {\n              validOutputMints.add(secondLevelOutputMint);\n              break;\n            }\n          }\n        }\n      }\n    }\n    routeMap.set(tokenMint, Array.from(validOutputMints));\n  }\n\n  return routeMap;\n}\n\nexport function isSplitSetupRequired(marketInfos: MarketInfo[]): boolean {\n  if (marketInfos.length === 1) {\n    const amm = marketInfos[0].amm;\n    if (amm instanceof SplitTradeAmm && amm.shouldSplitSetup) {\n      return true;\n    }\n  } else {\n    const [firstMarket, secondMarket] = marketInfos.map((marketInfo) => marketInfo.amm);\n\n    if (firstMarket instanceof RaydiumAmm || secondMarket instanceof RaydiumAmm) {\n      return true;\n    } else if (firstMarket instanceof SerumAmm && secondMarket instanceof SerumAmm) {\n      return true;\n    }\n  }\n  return false;\n}\n\nexport function getNumberOfTransactionForRoute(marketInfos: MarketInfo[]): number {\n  if (isSplitSetupRequired(marketInfos)) {\n    const [firstMarketInfo, secondMarketInfo] = marketInfos;\n\n    const hasSOL = [(firstMarketInfo.inputMint, firstMarketInfo.outputMint, secondMarketInfo.outputMint)].some((item) =>\n      item.equals(WRAPPED_SOL_MINT),\n    );\n\n    return hasSOL ? 3 : 2;\n  }\n  return 1;\n}\n\n// We cannot add platform fee to all possible routing due to transaction size limit\nexport function isPlatformFeeSupported(amms: Amm[]): boolean {\n  if (amms.length > 1) {\n    const [firstMarket, secondMarket] = amms;\n\n    if (firstMarket instanceof RaydiumAmm && secondMarket instanceof RaydiumAmm) {\n      return false;\n    }\n  }\n  return true;\n}\n\nexport function getRouteInfoUniqueId(routeInfo: RouteInfo) {\n  return routeInfo.marketInfos.map((marketInfo) => `${marketInfo.amm.id}-${marketInfo.inputMint}`).join('-');\n}\n","import { InstructionCache } from './types';\nimport { RouteInfo } from './routes';\nimport { SetupInstructions } from '..';\n\nexport const getCacheMintKey = (marketInfos: RouteInfo['marketInfos']) => {\n  return `${marketInfos[0]?.inputMint}-${marketInfos[0]?.outputMint}-${marketInfos[1]?.outputMint}-${marketInfos.map(\n    (item) => item.amm.id,\n  )}`;\n};\n\nexport const getInstructionCache = ({\n  instructionCache,\n  walletPublicKey,\n  cacheKey,\n}: {\n  instructionCache: InstructionCache;\n  walletPublicKey: string;\n  cacheKey: string;\n}) => {\n  return instructionCache.get(walletPublicKey)?.get(cacheKey);\n};\n\nexport const setInstructionCache = ({\n  instructionCache,\n  instructionResult,\n  walletPublicKey,\n  cacheKey,\n}: {\n  instructionCache: InstructionCache;\n  instructionResult: SetupInstructions;\n  walletPublicKey: string;\n  cacheKey: string;\n}) => {\n  const walletCache =\n    instructionCache.get(walletPublicKey) || (new Map() as NonNullable<ReturnType<InstructionCache['get']>>);\n\n  walletCache.set(cacheKey, instructionResult);\n\n  instructionCache.set(walletPublicKey, walletCache);\n};\n\nexport const deleteInstructionCache = ({\n  instructionCache,\n  walletPublicKey,\n}: {\n  instructionCache: InstructionCache;\n  walletPublicKey: string;\n}) => {\n  instructionCache.get(walletPublicKey)?.clear();\n};\n","import { Signer, Transaction, TransactionInstruction, TransactionSignature } from '@solana/web3.js';\n\nexport const getEmptyInstruction: () => Instruction = () => ({\n  instructions: [],\n  cleanupInstructions: [],\n  signers: [],\n});\n\nexport type Instruction = {\n  instructions: TransactionInstruction[];\n  cleanupInstructions: TransactionInstruction[];\n  signers: Signer[];\n};\n\nexport type TransactionPayload = {\n  transaction: Transaction;\n  signers: Signer[];\n  execute: () => Promise<TransactionSignature>;\n};\n","import { ASSOCIATED_TOKEN_PROGRAM_ID, Token, TOKEN_PROGRAM_ID } from '@solana/spl-token';\nimport { Connection, PublicKey, SystemProgram, TransactionInstruction } from '@solana/web3.js';\nimport { WRAPPED_SOL_MINT } from '../constants';\nimport { getEmptyInstruction, Instruction } from './instruction';\n\n// Leverage the existing ATA when present\nexport async function createAndCloseWSOLAccount(\n  connection: Connection,\n  owner: PublicKey,\n  amount: number,\n): Promise<Instruction & { address: PublicKey }> {\n  const result = getEmptyInstruction();\n  result.instructions = [];\n\n  const toAccount = await Token.getAssociatedTokenAddress(\n    ASSOCIATED_TOKEN_PROGRAM_ID,\n    TOKEN_PROGRAM_ID,\n    WRAPPED_SOL_MINT,\n    owner,\n    true,\n  );\n\n  const info = await connection.getAccountInfo(toAccount);\n\n  if (info === null) {\n    result.instructions.push(\n      Token.createAssociatedTokenAccountInstruction(\n        ASSOCIATED_TOKEN_PROGRAM_ID,\n        TOKEN_PROGRAM_ID,\n        WRAPPED_SOL_MINT,\n        toAccount,\n        owner,\n        owner,\n      ),\n    );\n  }\n\n  // Fund account and sync\n  result.instructions.push(\n    SystemProgram.transfer({\n      fromPubkey: owner,\n      toPubkey: toAccount,\n      lamports: amount,\n    }),\n  );\n  result.instructions.push(\n    // This is not exposed by the types, but indeed it exists\n    (Token as any).createSyncNativeInstruction(TOKEN_PROGRAM_ID, toAccount),\n  );\n\n  result.cleanupInstructions = [Token.createCloseAccountInstruction(TOKEN_PROGRAM_ID, toAccount, owner, owner, [])];\n\n  return {\n    address: toAccount,\n    ...result,\n  };\n}\n\nexport async function findOrCreateAssociatedAccountByMint(\n  connection: Connection,\n  payer: PublicKey,\n  owner: PublicKey,\n  mintAddress: PublicKey | string,\n  unwrapSOL: boolean,\n): Promise<Instruction & { address: PublicKey }> {\n  const mint = typeof mintAddress === 'string' ? new PublicKey(mintAddress) : mintAddress;\n  const toAccount = await Token.getAssociatedTokenAddress(\n    ASSOCIATED_TOKEN_PROGRAM_ID,\n    TOKEN_PROGRAM_ID,\n    mint,\n    owner,\n    true,\n  );\n  const cleanupInstructions: TransactionInstruction[] = [];\n  const instructions: TransactionInstruction[] = [];\n\n  const info = await connection.getAccountInfo(toAccount);\n  if (info === null) {\n    instructions.push(\n      Token.createAssociatedTokenAccountInstruction(\n        ASSOCIATED_TOKEN_PROGRAM_ID,\n        TOKEN_PROGRAM_ID,\n        mint,\n        toAccount,\n        owner,\n        payer,\n      ),\n    );\n  }\n\n  // We close it when wrapped SOL\n  if (mint.equals(WRAPPED_SOL_MINT) && unwrapSOL) {\n    cleanupInstructions.push(Token.createCloseAccountInstruction(TOKEN_PROGRAM_ID, toAccount, owner, owner, []));\n  }\n\n  return {\n    address: toAccount,\n    instructions: instructions,\n    cleanupInstructions,\n    signers: [],\n  };\n}\n","import { Connection, Keypair, PublicKey, TransactionInstruction } from '@solana/web3.js';\nimport { isPlatformFeeSupported, RouteInfo } from './routes';\nimport { getEmptyInstruction, Instruction } from '../utils/instruction';\nimport { findOrCreateAssociatedAccountByMint } from '../utils/token';\nimport { createSetTokenLedgerInstruction } from './jupiterInstruction';\nimport { Owner } from '../utils/Owner';\nimport { PlatformFee } from './types';\nimport { QuoteMintToReferrer } from '..';\nimport { isSerumAndRaydium } from './market';\n\ntype RouteToInstructionsParams = {\n  user: Owner;\n  tokenLedger: PublicKey;\n  openOrdersAddresses: (PublicKey | undefined)[];\n  userSourceTokenAccountAddress: PublicKey;\n  userIntermediaryTokenAccountAddress: PublicKey | undefined;\n  userDestinationTokenAccountAddress: PublicKey;\n  routeInfo: RouteInfo;\n  platformFee: PlatformFee | undefined;\n  quoteMintToReferrer: QuoteMintToReferrer;\n};\n\nasync function routeToInstructions({\n  user,\n  tokenLedger,\n  openOrdersAddresses,\n  userSourceTokenAccountAddress,\n  userIntermediaryTokenAccountAddress,\n  userDestinationTokenAccountAddress,\n  routeInfo,\n  platformFee,\n  quoteMintToReferrer,\n}: RouteToInstructionsParams): Promise<Instruction> {\n  const outAmountWithSlippage = routeInfo.outAmountWithSlippage;\n  const inputAmount = routeInfo.inAmount;\n\n  const legs = routeInfo.marketInfos.length;\n  if (legs === 2 && !userIntermediaryTokenAccountAddress) {\n    throw new Error('Missing intermediary token account');\n  }\n\n  // Drop referrer if space is scarce\n  const effectiveQuoteMintToReferrer =\n    platformFee && isSerumAndRaydium(routeInfo.marketInfos) ? undefined : quoteMintToReferrer;\n\n  const userIntermediateTokenAccountAddresses = userIntermediaryTokenAccountAddress\n    ? [userIntermediaryTokenAccountAddress]\n    : [];\n  const userTokenAccountAddresses = [\n    userSourceTokenAccountAddress,\n    ...userIntermediateTokenAccountAddresses,\n    userDestinationTokenAccountAddress,\n  ];\n\n  const platformFeeSupported = isPlatformFeeSupported(routeInfo.marketInfos.map((mi) => mi.amm));\n\n  const instructions: TransactionInstruction[] = [\n    createSetTokenLedgerInstruction(tokenLedger, userTokenAccountAddresses[1]),\n  ];\n\n  for (const [index, marketInfo] of routeInfo.marketInfos.entries()) {\n    const amm = marketInfo.amm;\n    const legInputAmount = index === 0 ? inputAmount : null;\n    const legOutAmountWithSlippage = index === legs - 1 ? outAmountWithSlippage : 0;\n    const legPlatformFee = index === legs - 1 && platformFeeSupported ? platformFee : undefined;\n\n    const [userSourceTokenAccount, userDestinationTokenAccount] = userTokenAccountAddresses.slice(index);\n\n    instructions.push(\n      ...amm.createSwapInstructions({\n        sourceMint: marketInfo.inputMint,\n        destinationMint: marketInfo.outputMint,\n        userSourceTokenAccount,\n        userDestinationTokenAccount,\n        userTransferAuthority: user.publicKey,\n        inAmount: legInputAmount,\n        minimumOutAmount: legOutAmountWithSlippage,\n        tokenLedger,\n        openOrdersAddress: openOrdersAddresses[index],\n        platformFee: legPlatformFee,\n        quoteMintToReferrer: effectiveQuoteMintToReferrer,\n      }),\n    );\n  }\n\n  const { signers, cleanupInstructions } = getEmptyInstruction();\n\n  if (user.isKeyPair && user.signer) {\n    signers.push(user.signer);\n  }\n  return {\n    signers,\n    cleanupInstructions,\n    instructions,\n  };\n}\n\nexport const routeAtaInstructions = async (\n  connection: Connection,\n  marketInfos: RouteInfo['marketInfos'],\n  userPublicKey: PublicKey,\n  unwrapSOL: boolean,\n) => {\n  const getUserIntermediateTokenAccountAddress = async () => {\n    const userIntermediateTokenAccountAddress =\n      marketInfos.length === 2\n        ? await findOrCreateAssociatedAccountByMint(\n            connection,\n            userPublicKey,\n            userPublicKey,\n            marketInfos[0].outputMint,\n            unwrapSOL,\n          )\n        : undefined;\n    return userIntermediateTokenAccountAddress;\n  };\n\n  const getUserDestinationTokenAccountAddress = async () => {\n    return await findOrCreateAssociatedAccountByMint(\n      connection,\n      userPublicKey,\n      userPublicKey,\n      marketInfos.length === 2 ? marketInfos[1].outputMint : marketInfos[0].outputMint,\n      unwrapSOL,\n    );\n  };\n\n  const [userIntermediaryTokenAccountResult, userDestinationTokenAccountResult] = await Promise.all([\n    getUserIntermediateTokenAccountAddress(),\n    getUserDestinationTokenAccountAddress(),\n  ]);\n\n  return {\n    userIntermediaryTokenAccountResult,\n    userDestinationTokenAccountResult,\n  };\n};\n\nexport default routeToInstructions;\n","import { Connection, PublicKey } from '@solana/web3.js';\nimport { SerumMarket } from '../market';\nimport { getEmptyInstruction, Instruction } from '../../utils/instruction';\nimport { wait } from '../../utils/wait';\nimport { createOpenOrdersInstruction } from '../jupiterInstruction';\n\nexport type MarketToOpenOrdersAddress = Map<string, PublicKey>;\n\nexport async function getOrCreateOpenOrdersAddress(\n  connection: Connection,\n  user: PublicKey,\n  serumMarket: SerumMarket,\n  marketToOpenOrdersAddress?: MarketToOpenOrdersAddress,\n): Promise<(Instruction & { address: PublicKey }) | undefined> {\n  const result = getEmptyInstruction();\n\n  const marketAddress = serumMarket.address.toString();\n\n  if (marketToOpenOrdersAddress) {\n    // check existing map\n    let openOrdersAddress = marketToOpenOrdersAddress.get(marketAddress);\n\n    if (openOrdersAddress) {\n      let openOrdersAccountInfo = null;\n\n      // We verify if it indeed exists, with low commitment to pick it up, to address the unsafe behaviour below\n      openOrdersAccountInfo = await connection.getAccountInfo(openOrdersAddress, 'confirmed');\n\n      if (openOrdersAccountInfo) {\n        return {\n          ...result,\n          address: openOrdersAddress,\n        };\n      }\n    }\n  }\n\n  const [newOpenOrdersAddress, ix] = createOpenOrdersInstruction(serumMarket, user);\n\n  const newOpenOrdersAddressInfo = await connection.getAccountInfo(newOpenOrdersAddress);\n\n  if (!newOpenOrdersAddressInfo) {\n    result.instructions = [ix];\n  }\n\n  // This is unsafe, since we don't know yet if it has succeeded\n  marketToOpenOrdersAddress?.set(serumMarket.address.toString(), newOpenOrdersAddress);\n\n  return {\n    ...result,\n    address: newOpenOrdersAddress,\n  };\n}\n","import { TOKEN_PROGRAM_ID } from '@solana/spl-token';\nimport { Connection, FeeCalculator, PublicKey } from '@solana/web3.js';\nimport type { SerumOpenOrdersMap } from '..';\nimport { WRAPPED_SOL_MINT } from '../constants';\nimport { deserializeAccount } from '@mercurial-finance/optimist';\nimport { getCacheMintKey, getInstructionCache, setInstructionCache } from './cache';\nimport { RouteInfo, TransactionFeeInfo } from './routes';\nimport { routeAtaInstructions } from './routeToInstructions';\nimport { getOrCreateOpenOrdersAddress } from './serum/openOrders';\nimport { SerumAmm } from './serum/serumAmm';\nimport { SplitTradeAmm } from './split-trade/splitTradeAmm';\nimport { InstructionCache, PlatformFeeAndAccounts, SetupInstructions } from './types';\n\nconst SERUM_OPEN_ACCOUNT_LAMPORTS = 23_352_760;\nconst OPEN_TOKEN_ACCOUNT_LAMPORTS = 2_039_280;\n\nfunction sum(values: number[]) {\n  return values.reduce((value, acc) => {\n    acc += value;\n    return acc;\n  }, 0);\n}\n\nconst calculateTransactionDepositAndFee = ({\n  intermediate,\n  destination,\n  openOrders,\n  hasWrapUnwrapSOL,\n  feeCalculator,\n}: SetupInstructions & {\n  hasWrapUnwrapSOL: boolean;\n  feeCalculator: FeeCalculator;\n}): TransactionFeeInfo => {\n  const openOrdersDeposits = openOrders\n    .filter((ooi) => ooi && ooi.instructions.length > 0)\n    .map(() => SERUM_OPEN_ACCOUNT_LAMPORTS);\n  const ataDeposits = [intermediate, destination]\n    .filter((item) => item?.instructions.length && item.cleanupInstructions.length === 0)\n    .map(() => OPEN_TOKEN_ACCOUNT_LAMPORTS);\n\n  const signatureFee =\n    ([...openOrders?.map((oo) => oo?.signers), intermediate?.signers, destination.signers].filter(Boolean).flat()\n      .length +\n      1) *\n    feeCalculator.lamportsPerSignature;\n\n  const totalFeeAndDeposits = sum([signatureFee, ...openOrdersDeposits, ...ataDeposits]);\n\n  // We need to account for temporary wrapped SOL token accounts as intermediary or output\n  const minimumSOLForTransaction = sum([\n    signatureFee,\n    ...openOrdersDeposits,\n    ...[intermediate, destination]\n      .filter((item) => (item?.instructions.length ?? 0) > 0)\n      .map(() => OPEN_TOKEN_ACCOUNT_LAMPORTS),\n    hasWrapUnwrapSOL ? OPEN_TOKEN_ACCOUNT_LAMPORTS : 0,\n  ]);\n\n  return {\n    signatureFee,\n    openOrdersDeposits,\n    ataDeposits,\n    totalFeeAndDeposits,\n    minimumSOLForTransaction,\n  };\n};\n\nexport const getDepositAndFeeFromInstructions = async ({\n  connection,\n  userPublicKey,\n  inputMint,\n  marketInfos,\n  feeCalculator,\n  instructionCache,\n  serumOpenOrdersPromise,\n  wrapUnwrapSOL: unwrapSOL,\n}: {\n  connection: Connection;\n  userPublicKey: PublicKey;\n  inputMint: PublicKey;\n  marketInfos: RouteInfo['marketInfos'];\n  feeCalculator: FeeCalculator;\n  instructionCache: InstructionCache;\n  /* promise because we can choose not to await it when we dont need it */\n  serumOpenOrdersPromise: Promise<SerumOpenOrdersMap>;\n  wrapUnwrapSOL: boolean;\n}) => {\n  const cacheKey = getCacheMintKey(marketInfos);\n\n  const walletPublicKey = userPublicKey.toBase58();\n\n  const routeCache = getInstructionCache({\n    instructionCache,\n    walletPublicKey,\n    cacheKey,\n  });\n\n  const hasWrapUnwrapSOL = inputMint.equals(WRAPPED_SOL_MINT) && unwrapSOL;\n  if (routeCache) {\n    const { destination, intermediate, openOrders } = routeCache;\n    return calculateTransactionDepositAndFee({\n      intermediate,\n      destination,\n      openOrders,\n      hasWrapUnwrapSOL,\n      feeCalculator,\n    });\n  }\n\n  const openOrdersInstructionsPromise = Promise.all(\n    marketInfos.map(async (marketInfo) => {\n      const amm = marketInfo.amm;\n      if (amm instanceof SerumAmm || amm instanceof SplitTradeAmm) {\n        if (!amm.market) return;\n        return await getOrCreateOpenOrdersAddress(connection, userPublicKey, amm.market, await serumOpenOrdersPromise);\n      }\n      return;\n    }),\n  );\n\n  const promise = routeAtaInstructions(connection, marketInfos, userPublicKey, unwrapSOL).then(\n    ({ userIntermediaryTokenAccountResult, userDestinationTokenAccountResult }) => {\n      return openOrdersInstructionsPromise.then((openOrdersInstructions) => ({\n        intermediate: userIntermediaryTokenAccountResult,\n        destination: userDestinationTokenAccountResult,\n        openOrders: openOrdersInstructions,\n      }));\n    },\n  );\n\n  const instructionResult = await promise;\n\n  setInstructionCache({\n    cacheKey,\n    instructionCache,\n    instructionResult,\n    walletPublicKey,\n  });\n\n  return calculateTransactionDepositAndFee({\n    ...instructionResult,\n    hasWrapUnwrapSOL,\n    feeCalculator,\n  });\n};\n\nexport const NO_PLATFORM_FEE: PlatformFeeAndAccounts = {\n  feeBps: 0,\n  feeAccounts: new Map<string, PublicKey>(),\n};\n\nexport async function getPlatformFeeAccounts(\n  connection: Connection,\n  feeAccountOwner: PublicKey,\n): Promise<Map<string, PublicKey>> {\n  const tokenAccounts = (\n    await connection.getTokenAccountsByOwner(feeAccountOwner, {\n      programId: TOKEN_PROGRAM_ID,\n    })\n  ).value;\n\n  const feeAccounts = tokenAccounts.reduce((acc, tokenAccount) => {\n    const deserializedtokenAccount = deserializeAccount(tokenAccount.account.data);\n    if (deserializedtokenAccount) {\n      acc.set(deserializedtokenAccount.mint.toBase58(), tokenAccount.pubkey);\n    }\n    return acc;\n  }, new Map<string, PublicKey>());\n\n  return feeAccounts;\n}\n","import {\n  Connection,\n  PublicKey,\n  Transaction,\n  TransactionCtorFields,\n  Signer,\n  TransactionInstruction,\n} from '@solana/web3.js';\nimport { Instruction, TransactionPayload } from './instruction';\nimport { Owner } from './Owner';\n\nexport class TransactionBuilder {\n  private connection: Connection;\n  private feePayer: PublicKey;\n  private instructions: Instruction[];\n  private owner: Owner;\n\n  constructor(connection: Connection, feePayer: PublicKey, owner: Owner) {\n    this.connection = connection;\n    this.feePayer = feePayer;\n    this.instructions = [];\n    this.owner = owner;\n  }\n\n  addInstruction(instruction: Instruction): TransactionBuilder {\n    this.instructions.push(instruction);\n    return this;\n  }\n\n  async build(recentBlockHash?: string): Promise<TransactionPayload> {\n    if (!recentBlockHash) {\n      recentBlockHash = (await this.connection.getLatestBlockhash('confirmed')).blockhash;\n    }\n\n    const txFields: TransactionCtorFields = {\n      recentBlockhash: recentBlockHash,\n      feePayer: this.feePayer,\n    };\n\n    let instructions: TransactionInstruction[] = [];\n    let cleanupInstructions: TransactionInstruction[] = [];\n    let signers: Signer[] = [];\n    this.instructions.forEach((curr) => {\n      instructions = instructions.concat(curr.instructions);\n      cleanupInstructions = cleanupInstructions.concat(curr.cleanupInstructions);\n      signers = signers.concat(curr.signers);\n    });\n\n    const transaction = new Transaction(txFields);\n    instructions.concat(cleanupInstructions).forEach((ix) => transaction.add(ix));\n    transaction.feePayer = this.feePayer;\n\n    return {\n      transaction: transaction,\n      signers: signers,\n      execute: this.owner.isKeyPair\n        ? () => {\n            return this.connection.sendTransaction(transaction, signers);\n          }\n        : async () => {\n            throw new Error('Please use a Keypair for the owner parameter to enable the execute function');\n          },\n    };\n  }\n}\n","import { Keypair, PublicKey, Signer } from '@solana/web3.js';\n\ntype _Owner = Keypair | PublicKey;\n\nexport class Owner {\n  private readonly _owner: _Owner;\n\n  constructor(owner: _Owner) {\n    this._owner = owner;\n  }\n\n  get publicKey(): PublicKey {\n    if (Owner.isKeyPair(this._owner)) {\n      return this._owner.publicKey;\n    }\n\n    return this._owner;\n  }\n\n  get signer(): Signer | undefined {\n    return Owner.isKeyPair(this._owner) ? this._owner : undefined;\n  }\n\n  get isKeyPair(): boolean {\n    return Owner.isKeyPair(this._owner);\n  }\n\n  get isPublicKey(): boolean {\n    return Owner.isPublicKey(this._owner);\n  }\n\n  static isKeyPair(owner: _Owner): owner is Keypair {\n    return (owner as Keypair).secretKey !== undefined;\n  }\n\n  static isPublicKey(owner: _Owner): owner is PublicKey {\n    return !Owner.isKeyPair(owner);\n  }\n}\n","export const wait = (time: number) => new Promise((resolve) => setTimeout(resolve, time));\n","import { TransactionError } from '@mercurial-finance/optimist';\nimport { bs58 } from '@project-serum/anchor/dist/cjs/utils/bytes';\nimport {\n  ConfirmedTransactionMeta,\n  Connection,\n  PublicKey,\n  SendOptions,\n  Transaction,\n  TransactionResponse,\n  TransactionSignature,\n} from '@solana/web3.js';\nimport Decimal from 'decimal.js';\nimport promiseRetry from 'promise-retry';\nimport { WRAPPED_SOL_MINT, JUPITER_ERRORS } from '../constants';\nimport { wait } from './wait';\n\ntype ResponseMeta = NonNullable<TransactionResponse['meta']>;\ntype ReponseTransaction = TransactionResponse['transaction'];\n\nfunction diffTokenBalance(accountKeyIndex: number, meta: ConfirmedTransactionMeta): number | undefined {\n  const postBalance = meta.postTokenBalances?.find(\n    (postTokenBalance) => postTokenBalance.accountIndex === accountKeyIndex,\n  )?.uiTokenAmount.amount;\n  const preBalance = meta.preTokenBalances?.find((preTokenBalance) => preTokenBalance.accountIndex === accountKeyIndex)\n    ?.uiTokenAmount.amount;\n\n  // When token account is created it isn't present in preBalance\n  if (!postBalance) return;\n  return Math.abs(parseInt(postBalance) - (preBalance !== undefined ? parseInt(preBalance) : 0));\n}\n\nexport function extractTokenBalanceChangeFromTransaction(\n  meta: ResponseMeta,\n  transaction: ReponseTransaction,\n  tokenAccountAddress: PublicKey,\n): number | undefined {\n  const message = transaction.message;\n\n  if (!meta) {\n    return;\n  }\n  const index = message.accountKeys.findIndex((p) => p.equals(tokenAccountAddress));\n\n  return diffTokenBalance(index, meta);\n}\n\nexport function extractSOLChangeFromTransaction(\n  meta: ResponseMeta,\n  transaction: ReponseTransaction,\n  user: PublicKey,\n): number {\n  let accountKeyIndex = transaction.message.accountKeys.findIndex((p) => p.equals(user));\n\n  if (accountKeyIndex !== -1) {\n    return Math.abs(meta.postBalances[accountKeyIndex] - meta.preBalances[accountKeyIndex]);\n  }\n\n  // if 0 is returned it will throw error in the caller function\n  return 0;\n}\n\nexport function getWritableKeys(transaction: Transaction) {\n  return [\n    ...new Set(\n      transaction.instructions\n        .map((inst) => inst.keys.filter((key) => key.isWritable).map((k) => k.pubkey))\n        .reduce((acc, el) => acc.concat(el)),\n    ).values(),\n  ];\n}\n\nexport function getTokenBalanceChangesFromTransactionResponse({\n  txid,\n  inputMint,\n  outputMint,\n  user,\n  sourceAddress,\n  destinationAddress,\n  transactionResponse,\n  hasWrappedSOL,\n}: {\n  txid: TransactionSignature;\n  inputMint: PublicKey;\n  outputMint: PublicKey;\n  user: PublicKey;\n  sourceAddress: PublicKey;\n  destinationAddress: PublicKey;\n  transactionResponse: TransactionResponse | null;\n  hasWrappedSOL: boolean;\n}) {\n  let sourceTokenBalanceChange: number | undefined;\n  let destinationTokenBalanceChange: number | undefined;\n\n  if (transactionResponse) {\n    let { meta, transaction } = transactionResponse;\n    if (meta) {\n      sourceTokenBalanceChange =\n        inputMint.equals(WRAPPED_SOL_MINT) && !hasWrappedSOL\n          ? extractSOLChangeFromTransaction(meta, transaction, user)\n          : extractTokenBalanceChangeFromTransaction(meta, transaction, sourceAddress);\n      destinationTokenBalanceChange =\n        outputMint.equals(WRAPPED_SOL_MINT) && !hasWrappedSOL\n          ? extractSOLChangeFromTransaction(meta, transaction, user)\n          : extractTokenBalanceChangeFromTransaction(meta, transaction, destinationAddress);\n    }\n  }\n\n  if (!(sourceTokenBalanceChange && destinationTokenBalanceChange)) {\n    throw new TransactionError(\n      'Cannot find source or destination token account balance change',\n      txid,\n      JUPITER_ERRORS['BalancesNotExtractedProperly'].code,\n    );\n  }\n\n  return [sourceTokenBalanceChange, destinationTokenBalanceChange];\n}\n\nexport async function pollForConfirmedTransaction(\n  connection: Connection,\n  txid: TransactionSignature,\n): Promise<TransactionResponse | null> {\n  return promiseRetry(\n    async (retry) => {\n      const response = await connection.getTransaction(txid, {\n        commitment: 'confirmed',\n      });\n      if (!response) {\n        retry(\n          new TransactionError('Transaction was not confirmed', txid, JUPITER_ERRORS['TransactionNotConfirmed'].code),\n        );\n      }\n      return response;\n    },\n    {\n      retries: 30,\n      minTimeout: 500,\n    },\n  ).catch(() => null);\n}\n\nexport function getUnixTs() {\n  return new Date().getTime();\n}\n\nconst SEND_OPTIONS: SendOptions = { skipPreflight: true, maxRetries: 2 };\n\n/**\n * awaits confirmation while resending the transaction periodically\n *\n * Our RPC node settings\n * solana_send_leader_count: 8\n * solana_send_retry_ms: 15000\n **/\nexport async function transactionSenderAndConfirmationWaiter(\n  connection: Connection,\n  signedTransaction: Transaction,\n  timeout = 120_000, // 2 minutes, (sendInterval * sendRetries) = 80_000 + extra wait 40_000\n  pollInterval = 500,\n  sendInterval = 2_000,\n  sendRetries = 40,\n): Promise<{ txid: TransactionSignature; transactionResponse: TransactionResponse | null }> {\n  const rawTransaction = signedTransaction.serialize();\n  const txid = await connection.sendRawTransaction(rawTransaction, SEND_OPTIONS);\n\n  const start = getUnixTs();\n  let lastSendTimestamp = getUnixTs();\n  let retries = 0;\n  while (getUnixTs() - start < timeout) {\n    const timestamp = getUnixTs();\n    if (retries < sendRetries && timestamp - lastSendTimestamp > sendInterval) {\n      lastSendTimestamp = timestamp;\n      retries += 1;\n      await connection.sendRawTransaction(rawTransaction, SEND_OPTIONS);\n    }\n    const response = await connection.getTransaction(txid, {\n      commitment: 'confirmed',\n    });\n    if (response) return { txid, transactionResponse: response };\n    await wait(pollInterval);\n  }\n  return { txid, transactionResponse: null };\n}\n\nexport function getSignature(transaction: Transaction) {\n  const signature = transaction.signature;\n  if (!signature) {\n    throw new Error('Transaction has no signature');\n  }\n  return bs58.encode(signature);\n}\n","// The package is missing cjs. Apache License 2.0\n// https://github.com/ehmicky/fast-cartesian/blob/619a497dffd978fb4a09a83f2ca047915579774f/src/main.js\n\n// Validate 'array()' input\nconst validateInput = function <T>(arrays: T[][]) {\n  if (!Array.isArray(arrays)) {\n    throw new TypeError('Argument must be an array of arrays');\n  }\n\n  arrays.forEach(validateArray);\n  validateDimensions(arrays);\n  validateCombinations(arrays);\n};\n\nconst validateArray = function <T>(array: T[]) {\n  if (!Array.isArray(array)) {\n    throw new TypeError(`Argument must be an array: ${array}`);\n  }\n};\n\n// Maximum number of nested `for` loops. In my machine, it's 604 but it is\n// engine-specific so we use a safe number. Above the limit, a max call stack\n// error is thrown by the engine.\nconst validateDimensions = function <T>({ length }: T[]) {\n  if (length >= MAX_DIMENSIONS) {\n    throw new TypeError(\n      `Too many arrays (${length}): please use the 'big-cartesian' library instead of 'fast-cartesian'`,\n    );\n  }\n};\n\nconst MAX_DIMENSIONS = 1e2;\n\n// Max array size in JavaScript. This is the limit of the final return value.\nconst validateCombinations = function <T>(arrays: T[][]) {\n  const size = arrays.reduce(multiplySize, 1);\n\n  if (size >= MAX_SIZE) {\n    const sizeStr = Number.isFinite(size) ? ` (${size.toExponential(0)})` : '';\n    throw new TypeError(\n      `Too many combinations${sizeStr}: please use the 'big-cartesian' library instead of 'fast-cartesian'`,\n    );\n  }\n};\n\nconst multiplySize = function <T>(size: number, array: T[]) {\n  return size * array.length;\n};\n\nconst MAX_SIZE = 4294967296; // 2 ** 32 = 4,294,967,296\n\n// Does a cartesian product on several arrays.\n// Returns an array with the results.\n// Optimized to be the fastest implementation in JavaScript.\nexport default function fastCartesian<T>(arrays: T[][]): T[][] {\n  validateInput(arrays);\n\n  if (arrays.length === 0) {\n    return [];\n  }\n\n  const loopFunc = getLoopFunc(arrays.length);\n  const result: T[][] = [];\n  loopFunc(arrays, result);\n  return result;\n}\n\nconst getLoopFunc = function (length: number) {\n  const cachedLoopFunc = cache[length];\n\n  if (cachedLoopFunc !== undefined) {\n    return cachedLoopFunc;\n  }\n\n  const loopFunc = mGetLoopFunc(length);\n  // eslint-disable-next-line fp/no-mutation\n  cache[length] = loopFunc;\n  return loopFunc;\n};\n\nconst cache: Record<number, any> = {};\n\n// Create a function with `new Function()` that does:\n//   function(arrays, results) {\n//     for (const value0 of arrays[0]) {\n//       for (const value1 of arrays[1]) {\n//         // and so on\n//         results.push([value0, value1])\n//       }\n//     }\n//   }\nconst mGetLoopFunc = function (length: number) {\n  const indexes = Array.from({ length }, getIndex);\n  const start = indexes.map((index) => `for (const value${index} of arrays[${index}]) {`).join('\\n');\n  const middle = indexes.map((index) => `value${index}`).join(', ');\n  const end = '}\\n'.repeat(length);\n\n  // eslint-disable-next-line no-new-func\n  return new Function('arrays', 'result', `${start}\\nresult.push([${middle}])\\n${end}`);\n};\n\nconst getIndex = function (value: any, index: number) {\n  return String(index);\n};\n","import { Connection, PublicKey } from '@solana/web3.js';\nimport { chunkedGetMultipleAccountInfos } from '../utils/chunkedGetMultipleAccountInfos';\nimport { Amm, Quote } from './amm';\nimport { SplitTradeAmm } from './split-trade/splitTradeAmm';\nimport { isValidRoute, MarketInfo } from './market';\nimport { ammCrossProtocolPairs, isPlatformFeeSupported, Route, RouteInfo, TransactionFeeInfo } from './routes';\nimport { TokenRouteSegments } from './types';\nimport { IS_DEV } from '../constants';\nimport fastCartesian from '../utils/cartesian';\n\nconst PLATFORM_FEE_DENOMINATOR = 10000;\n\nexport async function fetchAccountInfos(connection: Connection, routes: TokenRouteSegments): Promise<void> {\n  const accountInfosMap = new Map();\n\n  const accountsToFetchSet = new Set<string>();\n  const ammMap = new Map<string, Amm>();\n  routes.forEach((innerMap) => {\n    innerMap.forEach((amms) => {\n      amms.forEach((amm) => {\n        ammMap.set(amm.id, amm);\n        amm.getAccountsForUpdate().forEach((account) => {\n          // Only add accountInfos that is not in the Map\n          accountsToFetchSet.add(account.toBase58());\n        });\n      });\n    });\n  });\n\n  const accountsToFetch = Array.from(accountsToFetchSet);\n\n  if (accountsToFetch.length > 0) {\n    const accountInfos = await chunkedGetMultipleAccountInfos(connection, accountsToFetch);\n\n    accountInfos.forEach((item, index) => {\n      const publicKey = accountsToFetch[index];\n      if (item) {\n        accountInfosMap.set(publicKey, item);\n      }\n    });\n\n    ammMap.forEach((amm) => {\n      amm.update(accountInfosMap);\n    });\n  }\n}\n\ninterface GetQuotesParams {\n  inputRouteSegment: TokenRouteSegments;\n  amount: number;\n  inputMint: PublicKey;\n  outputMint: PublicKey;\n  platformFeeBps: number;\n  slippage: number;\n  filterTopNResult?: number;\n  onlyDirectRoutes?: boolean;\n  getDepositAndFeeForRoute: (params: {\n    marketInfos: RouteInfo['marketInfos'];\n  }) => Promise<TransactionFeeInfo | undefined>;\n}\n\nfunction getInputOutputId({ inputMint, outputMint }: { inputMint: string; outputMint: string }) {\n  return `${inputMint}-${outputMint}`;\n}\n\nfunction getQuoteId({ ammId, amount }: { ammId: string; amount: number }) {\n  return `${ammId}-${amount}`;\n}\n\ntype QuoteMap = Map<string, Quote>;\n\nfunction getQuoteMap({\n  amms,\n  inputMint,\n  outputMint,\n  amount,\n  filterTopNResult = 3,\n}: {\n  amms: Amm[];\n  inputMint: string;\n  outputMint: string;\n  amount: number;\n  filterTopNResult?: number;\n}): QuoteMap {\n  const quotes = amms\n    .map((amm) => {\n      try {\n        const quote = amm.getQuote({\n          amount,\n          sourceMint: new PublicKey(inputMint),\n          destinationMint: new PublicKey(outputMint),\n        });\n        return { quote, id: amm.id };\n      } catch (e) {\n        if (IS_DEV) {\n          console.error(e);\n        }\n        return undefined;\n      }\n    })\n    .sort((a, b) => (b?.quote.outAmount || 0) - (a?.quote.outAmount || 0))\n    // only choose top 3 rates\n    .filter((item, idx) => item && item.quote.inAmount && idx < filterTopNResult) as Array<{\n    id: string;\n    quote: Quote;\n  }>;\n\n  return new Map<string, Quote>(quotes.map((item) => [getQuoteId({ ammId: item.id, amount }), item.quote]));\n}\n\n// Change this to support N-1 level of hops\nconst MAX_LEVEL = 2;\n\nexport function processInputRouteSegmentToRoutesInfos({\n  inputRouteSegment,\n  inputMint,\n  outputMint,\n  amount,\n  getDepositAndFeeForRoute,\n  platformFeeBps,\n  slippage,\n  filterTopNResult,\n  onlyDirectRoutes,\n}: GetQuotesParams) {\n  const inputMintString = inputMint.toBase58();\n  const outputMintString = outputMint.toBase58();\n  // (InputMint-OutputMint) map to (AmmId-InputAmount) map to Quote from the amm with the inputAmount\n  // this is used to prevent calculation being repeated later on.\n  const tradeIdQuoteMap = new Map<string, Map<string, Quote>>();\n  const inputMintInnerMap = inputRouteSegment.get(inputMintString);\n\n  const routes: Route[] = [];\n\n  if (!inputMintInnerMap) {\n    throw new Error('inputMintInnerMap is undefined');\n  }\n\n  const maxLevel = onlyDirectRoutes ? 0 : MAX_LEVEL;\n\n  /*\n   * It get the rate of all single pair that is linked to the inputMint\n   * Example: SOL => USDC, will have direct pair, while\n   *          SOL => USDT, USDT => SOL will have a hop\n   *\n   * So we go through each of the hop and get the top 3 rate and drop others\n   * This will eventually reduce the needs to compute bad rate for the same pair\n   *\n   * The loop below is doing for the inputMint, while the one after is doing for the outputMint.\n   */\n  const walkTheTree = ({\n    inputMint,\n    level = 0,\n    walked = [inputMint],\n  }: {\n    inputMint: string;\n    amount: number;\n    level?: number;\n    walked?: string[];\n  }) => {\n    const inputMintInnerMap = inputRouteSegment.get(inputMint);\n\n    if (inputMintInnerMap) {\n      inputMintInnerMap.forEach((amms, outMint) => {\n        const tradeId = getInputOutputId({\n          inputMint,\n          outputMint: outMint,\n        });\n\n        const quoteMap = getQuoteMap({\n          amms,\n          inputMint,\n          outputMint: outMint,\n          amount,\n          filterTopNResult,\n        });\n\n        const filteredAmms = amms.filter((amm) => quoteMap.has(getQuoteId({ ammId: amm.id, amount })));\n\n        // add split trade in when outputMint match\n        if (outMint === outputMintString) {\n          ammCrossProtocolPairs(filteredAmms.slice(), (firstAmm, secondAmm) => {\n            const splitTradeAmm = SplitTradeAmm.create(firstAmm, secondAmm);\n            if (splitTradeAmm) {\n              filteredAmms.push(splitTradeAmm);\n            }\n          });\n        }\n\n        inputMintInnerMap.set(outMint, filteredAmms);\n        tradeIdQuoteMap.set(tradeId, quoteMap);\n\n        // keep looping if not walked and not reached max level\n        if (outMint !== outputMintString && quoteMap.size && !walked.includes(outMint) && level < maxLevel - 1) {\n          walkTheTree({\n            inputMint: outMint,\n            amount: quoteMap.values().next().value.outAmount,\n            level: level + 1,\n            walked: walked.concat(outMint),\n          });\n        } else if (outMint === outputMintString) {\n          // if output reached, we add the route\n\n          const mints = walked.concat(outMint);\n          const _mints = mints.map((i) => new PublicKey(i));\n          const ammsArr = mints.reduce((amms, _, index) => {\n            if (index < mints.length - 1) {\n              amms.push(inputRouteSegment.get(mints[index])?.get(mints[index + 1])!);\n            }\n            return amms;\n          }, [] as Amm[][]);\n\n          const permutations: Amm[][] = fastCartesian(ammsArr);\n\n          permutations.forEach((item) => {\n            if (item.length === 1 || isValidRoute(item[0], item[1])) {\n              routes.push({\n                amms: item,\n                mints: _mints,\n              });\n            }\n          });\n        }\n      });\n    }\n  };\n\n  walkTheTree({\n    inputMint: inputMintString,\n    amount: amount,\n  });\n\n  const routesInfo: RouteInfo[] = routes\n    .map((route) => {\n      const { amms, mints } = route;\n\n      // Chain all amms\n      let marketInfos: MarketInfo[] = [];\n      let intermediateAmount = amount;\n      let outAmountWithSlippage = amount;\n      const platformFeeSupported = isPlatformFeeSupported(amms);\n      const tokenMints: PublicKey[] = mints;\n\n      const legs = amms.length;\n      for (const [i, amm] of amms.entries()) {\n        try {\n          const sourceMint = tokenMints[i];\n          const destinationMint = tokenMints[i + 1];\n\n          const tradeId = getInputOutputId({\n            inputMint: sourceMint.toBase58(),\n            outputMint: destinationMint.toBase58(),\n          });\n\n          const cacheQuote = tradeIdQuoteMap\n            .get(tradeId)\n            ?.get(getQuoteId({ ammId: amm.id, amount: intermediateAmount }));\n\n          const quote =\n            cacheQuote ||\n            amm.getQuote({\n              sourceMint,\n              destinationMint,\n              amount: intermediateAmount,\n            });\n\n          // Platform fee applicable only on last leg\n          const platformFee =\n            legs - 1 === i && platformFeeSupported\n              ? {\n                  amount: Math.floor((quote.outAmount * platformFeeBps) / PLATFORM_FEE_DENOMINATOR),\n                  mint: destinationMint.toBase58(),\n                  pct: platformFeeBps / 100,\n                }\n              : { amount: 0, mint: destinationMint.toBase58(), pct: 0 };\n\n          const outAmountAfterFees = Math.max(0, quote.outAmount - platformFee.amount);\n\n          const legOutAmountWithSlippage = Math.round(outAmountAfterFees * (1 - slippage / 100));\n\n          marketInfos.push({\n            amm,\n            inputMint: sourceMint,\n            outputMint: destinationMint,\n            notEnoughLiquidity: quote.notEnoughLiquidity,\n            minInAmount: quote.minInAmount,\n            minOutAmount: quote.minOutAmount,\n            inAmount: quote.inAmount,\n            outAmount: outAmountAfterFees,\n            priceImpactPct: quote.priceImpactPct,\n            lpFee: {\n              amount: quote.feeAmount,\n              mint: quote.feeMint,\n              pct: quote.feePct,\n            },\n            platformFee,\n          });\n\n          intermediateAmount = outAmountAfterFees;\n          outAmountWithSlippage = legOutAmountWithSlippage;\n        } catch (e: any) {\n          if (IS_DEV) {\n            console.error(e);\n          }\n\n          return undefined;\n        }\n      }\n\n      return {\n        marketInfos,\n        getDepositAndFee: () => getDepositAndFeeForRoute({ marketInfos }),\n        inAmount: marketInfos[0].inAmount,\n        outAmount: intermediateAmount,\n        outAmountWithSlippage: outAmountWithSlippage,\n        priceImpactPct:\n          1 -\n          marketInfos.reduce((priceFactor, marketInfo) => {\n            priceFactor *= 1 - marketInfo.priceImpactPct;\n            return priceFactor;\n          }, 1),\n      };\n    })\n    .filter((item): item is RouteInfo => item !== undefined)\n    .sort((a, b) => b.outAmount - a.outAmount); // sort based on which one have better output\n\n  return routesInfo;\n}\n","import { parseErrorForTransaction, TransactionError } from '@mercurial-finance/optimist';\nimport { TransactionResponse, TransactionSignature } from '@solana/web3.js';\n\n// Throws when not found or contains error to satisfy upper control flow\nexport async function validateTransactionResponse({\n  txid,\n  transactionResponse,\n}: {\n  txid: string;\n  transactionResponse: TransactionResponse | null;\n}): Promise<{ txid: TransactionSignature; transactionResponse: TransactionResponse | null }> {\n  if (!transactionResponse) {\n    throw new TransactionError('Transaction was not confirmed', txid);\n  }\n  if (transactionResponse?.meta?.err) {\n    let { message, code } = await parseErrorForTransaction(transactionResponse);\n\n    switch (code) {\n      case 6000: {\n        message = 'Slippage error';\n      }\n    }\n\n    throw new TransactionError(message || '', txid, code);\n  }\n  return { txid, transactionResponse };\n}\n","import fetch from 'cross-fetch';\n\ntype Address = string;\n\nexport async function getTopTokens() {\n  const topTokens = (await (await fetch('https://cache.jup.ag/top-tokens')).json()) as Address[];\n\n  return new Set(topTokens.filter((_, idx) => idx < 60));\n}\n","import { ASSOCIATED_TOKEN_PROGRAM_ID, Token, TOKEN_PROGRAM_ID } from '@solana/spl-token';\nimport {\n  Cluster,\n  Connection,\n  FeeCalculator,\n  Keypair,\n  PublicKey,\n  Transaction,\n  TransactionSignature,\n} from '@solana/web3.js';\n\nimport { OpenOrders } from '@project-serum/serum';\nimport {\n  computeInputRouteSegments,\n  computeRouteMap,\n  fetchMarketCache,\n  getAllAmms,\n  getTokenRouteSegments,\n  isSplitSetupRequired,\n  RouteInfo,\n} from './routes';\nimport { MarketInfo } from './market';\nimport {\n  DEVNET_SERUM_DEX_PROGRAM,\n  JUPITER_WALLET,\n  MAINNET_SERUM_DEX_PROGRAM,\n  WRAPPED_SOL_MINT,\n  MARKETS_URL,\n  SWAP_PROTOCOL_TOKENS,\n} from '../constants';\nimport { getDepositAndFeeFromInstructions, NO_PLATFORM_FEE } from './fee';\nimport { deleteInstructionCache, getCacheMintKey, getInstructionCache } from './cache';\nimport routeToInstructions, { routeAtaInstructions } from './routeToInstructions';\nimport { getOrCreateOpenOrdersAddress } from './serum/openOrders';\nimport { createAndCloseWSOLAccount } from '../utils/token';\nimport { getEmptyInstruction, Instruction } from '../utils/instruction';\nimport { TransactionBuilder } from '../utils/TransactionBuilder';\nimport { Owner } from '../utils/Owner';\nimport {\n  getSignature,\n  getTokenBalanceChangesFromTransactionResponse,\n  transactionSenderAndConfirmationWaiter,\n} from '../utils/transactionHelpers';\nimport { createInitializeTokenLedgerInstruction, TOKEN_LEDGER } from './jupiterInstruction';\nimport { fetchAccountInfos, processInputRouteSegmentToRoutesInfos } from './computeRouteInfos';\nimport type { SignerWalletAdapter } from '@solana/wallet-adapter-base';\nimport { InstructionCache, TokenRouteSegments, PlatformFeeAndAccounts, QuoteMintToReferrer } from './types';\nimport { SerumAmm } from './serum/serumAmm';\nimport { SaberAmm } from './saber/saberAmm';\nimport { SplTokenSwapAmm } from './spl-token-swap/splTokenSwapAmm';\nimport { MercurialAmm } from './mercurial/mercurialAmm';\nimport { AldrinAmm } from './aldrin/aldrinAmm';\nimport { RaydiumAmm } from './raydium/raydiumAmm';\nimport { CropperAmm } from './cropper/cropperAmm';\nimport { SenchaAmm } from './sencha/senchaAmm';\nimport { SplitTradeAmm } from './split-trade/splitTradeAmm';\nimport { TokenMintAddress, SetupInstructions } from './types';\nimport { getPlatformFeeAccounts } from './fee';\nimport { Amm } from './amm';\nimport { validateTransactionResponse } from '../utils/tx/errors';\nimport { TransactionError } from '@mercurial-finance/optimist';\nimport { getSaberWrappedDecimalsAmms, SaberAddDecimalsAmm } from './saber/saberAddDecimalsAmm';\nimport { getTopTokens } from './getTopTokens';\nimport { WhirlpoolAmm } from './whirlpool/whirlpoolAmm';\nimport { CykuraAmm } from './cykura/cykuraAmm';\n\nexport type SerumOpenOrdersMap = Map<string, PublicKey>;\nexport { MarketInfo } from './market';\nexport { getPlatformFeeAccounts } from './fee';\nexport * from './types';\nexport { transactionSenderAndConfirmationWaiter } from '../utils/transactionHelpers';\nexport { RouteInfo, TransactionFeeInfo, getRouteInfoUniqueId } from './routes';\nexport { getSaberWrappedDecimalsAmms };\nexport {\n  AldrinAmm,\n  CykuraAmm,\n  RaydiumAmm,\n  SerumAmm,\n  SaberAmm,\n  SplTokenSwapAmm,\n  MercurialAmm,\n  CropperAmm,\n  SenchaAmm,\n  SaberAddDecimalsAmm,\n  SplitTradeAmm,\n  WhirlpoolAmm,\n};\n\nexport type SwapResult =\n  | {\n      txid: string;\n      inputAddress: PublicKey;\n      outputAddress: PublicKey;\n      inputAmount: number | undefined;\n      outputAmount: number | undefined;\n    }\n  | {\n      error?: TransactionError;\n    };\n\ntype InputMintAndOutputMint = string;\n\ntype JupiterLoadParams = {\n  connection: Connection;\n  cluster: Cluster;\n  user?: PublicKey | Keypair;\n  platformFeeAndAccounts?: PlatformFeeAndAccounts;\n  quoteMintToReferrer?: Map<TokenMintAddress, PublicKey>;\n  /**\n   * If === -1, mean it will not fetch when shouldFetch == false\n   * If === 0, mean it will fetch everytime\n   */\n  routeCacheDuration?: number;\n  wrapUnwrapSOL?: boolean;\n  marketUrl?: string;\n  /**\n   * On multi-leg trades, the intermediate tokens is restricted to X top tokens in volume and certain utility tokens (Saber wrapped decimal tokens)\n   * This is to reduce the load by having to compute trades through routes that are not so liquid\n   */\n  restrictIntermediateTokens?: boolean;\n  /** See {@link Jupiter.tokenLedger}, default to the standard Jupiter token ledger */\n  tokenLedger?: PublicKey;\n  /** See {@link Jupiter.shouldLoadSerumOpenOrders}, default to true */\n  shouldLoadSerumOpenOrders?: boolean;\n};\n\nexport type OnTransaction = (\n  txid: TransactionSignature,\n  totalTxs: number,\n  txDescription: IConfirmationTxDescription,\n) => void;\n\nexport type IConfirmationTxDescription = 'SETUP' | 'SWAP' | 'CLEANUP';\ntype ExecuteParams = {\n  wallet?: Pick<SignerWalletAdapter, 'sendTransaction' | 'signAllTransactions' | 'signTransaction'>;\n  /**\n   * Allows to customize control of sending and awaiting confirmation in the single/multi transaction flow\n   */\n  onTransaction?: OnTransaction;\n};\n\nexport class Jupiter {\n  /* promise because we can choose not to await it when we dont need it */\n  private serumOpenOrdersPromise: Promise<SerumOpenOrdersMap> | undefined = undefined;\n  private instructionCache: InstructionCache = new Map();\n  private user: Keypair | PublicKey | undefined;\n  private routeCache = new Map<InputMintAndOutputMint, { fetchTimestamp: number }>();\n\n  constructor(\n    private connection: Connection,\n    private cluster: Cluster,\n    public tokenRouteSegments: TokenRouteSegments,\n    private feeCalculator: FeeCalculator,\n    private platformFeeAndAccounts: PlatformFeeAndAccounts,\n    /** Referrer account to collect Serum referrer fees for each given quote mint, the referrer fee is 20% of the Serum protocol fee */\n    private quoteMintToReferrer: QuoteMintToReferrer,\n    /** route cache duration in ms */\n    private routeCacheDuration: number = 0,\n    /** When set to true (default) native SOL is wrapped and wSOL unwrapped in each swap, otherwise it assumes wSOL is funded when it exists */\n    private wrapUnwrapSOL: boolean = true,\n    /** A token ledger which can be used to track volume as it can be made unique per platform, also alleviates write locks on a single token ledger account */\n    private tokenLedger: PublicKey,\n    private intermediateTokens: TokenMintAddress[] | undefined,\n    /** Perform a getProgramAccounts on user's serum open orders. Recomended to turn off if RPC is slow to perform a gPA */\n    private shouldLoadSerumOpenOrders: boolean,\n  ) {}\n\n  /**\n   * load performs the necessary async scaffolding of the Jupiter object\n   */\n  static async load({\n    connection,\n    cluster,\n    user,\n    platformFeeAndAccounts = NO_PLATFORM_FEE,\n    quoteMintToReferrer,\n    routeCacheDuration = 0,\n    wrapUnwrapSOL = true,\n    // @internal,\n    marketUrl,\n    restrictIntermediateTokens = false,\n    tokenLedger = TOKEN_LEDGER,\n    shouldLoadSerumOpenOrders = true,\n  }: JupiterLoadParams) {\n    const [\n      tokenRouteSegments,\n      {\n        value: { feeCalculator },\n      },\n      _quoteMintToReferrer,\n      intermediateTokens,\n    ] = await Promise.all([\n      Jupiter.fetchTokenRouteSegments(connection, cluster, marketUrl),\n      connection.getRecentBlockhashAndContext('processed'),\n      quoteMintToReferrer ?? getPlatformFeeAccounts(connection, new PublicKey(JUPITER_WALLET)),\n      restrictIntermediateTokens ? Jupiter.getIntermediateTokens() : undefined,\n    ]);\n\n    const jupiter = new Jupiter(\n      connection,\n      cluster,\n      tokenRouteSegments,\n      feeCalculator,\n      platformFeeAndAccounts,\n      _quoteMintToReferrer,\n      routeCacheDuration,\n      wrapUnwrapSOL,\n      tokenLedger,\n      intermediateTokens,\n      shouldLoadSerumOpenOrders,\n    );\n    if (user) jupiter.setUserPublicKey(user);\n    return jupiter;\n  }\n\n  getAccountToAmmMap() {\n    const accountToAmmMap = new Map<string, Amm>();\n    this.tokenRouteSegments.forEach((tokenRouteSegment) => {\n      Array.from(tokenRouteSegment.values()).forEach((marketInfos) => {\n        marketInfos.forEach((amm) => {\n          amm.getAccountsForUpdate().forEach((account) => {\n            accountToAmmMap.set(account.toBase58(), amm);\n          });\n        });\n      });\n    });\n    return accountToAmmMap;\n  }\n\n  public getDepositAndFees = async ({\n    marketInfos,\n    userPublicKey,\n    /**\n     * We can use Jupiter.findSerumOpenOrdersForOwner for this, if we want to reuse existing user serum open orders.\n     */\n    serumOpenOrdersPromise = Promise.resolve(new Map()),\n  }: {\n    marketInfos: MarketInfo[];\n    userPublicKey: PublicKey;\n    serumOpenOrdersPromise?: Promise<SerumOpenOrdersMap>;\n  }) => {\n    return getDepositAndFeeFromInstructions({\n      connection: this.connection,\n      feeCalculator: this.feeCalculator,\n      instructionCache: this.instructionCache,\n      inputMint: marketInfos[0].inputMint,\n      marketInfos,\n      serumOpenOrdersPromise,\n      userPublicKey,\n      wrapUnwrapSOL: this.wrapUnwrapSOL,\n    });\n  };\n\n  private getDepositAndFeesForUser = ({ marketInfos }: { marketInfos: MarketInfo[] }) => {\n    if (this.user && this.serumOpenOrdersPromise) {\n      const user = new Owner(this.user);\n\n      return this.getDepositAndFees({\n        marketInfos,\n        userPublicKey: user.publicKey,\n        serumOpenOrdersPromise: this.serumOpenOrdersPromise,\n      });\n    }\n    return Promise.resolve(undefined);\n  };\n\n  async computeRoutes({\n    inputMint,\n    outputMint,\n    inputAmount,\n    slippage,\n    feeBps = 0,\n    forceFetch,\n    onlyDirectRoutes,\n    filterTopNResult,\n  }: {\n    inputMint: PublicKey;\n    outputMint: PublicKey;\n    inputAmount: number;\n    slippage: number;\n    feeBps?: number;\n    forceFetch?: boolean;\n    onlyDirectRoutes?: boolean;\n    /**\n     * filter how many top individual route to be used to compared\n     */\n    filterTopNResult?: number;\n  }) {\n    const inputMintString = inputMint.toBase58();\n    const outputMintString = outputMint.toBase58();\n\n    // Platform fee can only be applied when fee account exists\n    const platformFeeBps =\n      feeBps ||\n      (this.platformFeeAndAccounts.feeAccounts.get(outputMintString) ? this.platformFeeAndAccounts.feeBps : 0);\n\n    const now = new Date().getTime();\n\n    // do sort so that it's always the same order for the same inputMint and outputMint and vice versa\n    const inputMintAndOutputMint = [inputMintString, outputMintString].sort((a, b) => a.localeCompare(b)).join('');\n\n    const routeCache = this.routeCache.get(inputMintAndOutputMint);\n\n    const inputRouteSegment = computeInputRouteSegments({\n      inputMint: inputMintString,\n      outputMint: outputMintString,\n      tokenRouteSegments: this.tokenRouteSegments,\n      intermediateTokens: this.intermediateTokens,\n    });\n\n    let shouldBustCache = false;\n    // special -1 condition to not fetch\n    if (this.routeCacheDuration === -1) {\n      shouldBustCache = false;\n    } else if (this.routeCacheDuration === 0) {\n      shouldBustCache = true;\n    } else {\n      if (routeCache) {\n        const { fetchTimestamp } = routeCache;\n        if (now - fetchTimestamp > this.routeCacheDuration) {\n          shouldBustCache = true;\n        }\n      } else {\n        shouldBustCache = true;\n      }\n    }\n\n    if (forceFetch || shouldBustCache) {\n      await fetchAccountInfos(this.connection, inputRouteSegment);\n      this.routeCache.set(inputMintAndOutputMint, {\n        fetchTimestamp: new Date().getTime(),\n      });\n    }\n\n    try {\n      const routesInfos = processInputRouteSegmentToRoutesInfos({\n        inputRouteSegment: inputRouteSegment,\n        inputMint: inputMint,\n        outputMint: outputMint,\n        amount: inputAmount,\n        getDepositAndFeeForRoute: this.getDepositAndFeesForUser,\n        onlyDirectRoutes,\n        slippage,\n        platformFeeBps,\n        filterTopNResult,\n      });\n\n      return {\n        routesInfos,\n        /* indicate if the result is fetched or get from cache */\n        cached: !(forceFetch || shouldBustCache),\n      };\n    } catch (e) {\n      throw e;\n    } finally {\n      // clear cache if it is expired\n      this.routeCache.forEach(({ fetchTimestamp }, key) => {\n        if (fetchTimestamp - now > this.routeCacheDuration) {\n          this.routeCache.delete(key);\n        }\n      });\n    }\n  }\n\n  setUserPublicKey(userPublicKey: Keypair | PublicKey) {\n    this.user = userPublicKey;\n    const owner = new Owner(this.user);\n    this.serumOpenOrdersPromise = this.shouldLoadSerumOpenOrders\n      ? Jupiter.findSerumOpenOrdersForOwner({\n          connection: this.connection,\n          cluster: this.cluster,\n          userPublicKey: owner.publicKey,\n        })\n      : Promise.resolve(new Map());\n  }\n\n  /**\n   * The token route segments contains all the routes and the market meta information.\n   */\n  static async fetchTokenRouteSegments(connection: Connection, cluster: Cluster, marketUrl?: string) {\n    const marketCaches = await fetchMarketCache(marketUrl || MARKETS_URL[cluster]);\n    const amms = await getAllAmms(connection, marketCaches);\n\n    const tokenRouteSegments = getTokenRouteSegments(amms);\n\n    return tokenRouteSegments;\n  }\n\n  /**\n   * This generate a routeMap which represents every possible output token mint for a given input token mint.\n   * For example, we have SOL to USDC and this pairs have many routings like\n   * SOL => USDT\n   * USDT => USDC\n   * SOL => USDC\n   *\n   * From here we know that we can have 2 different routing of SOL => USDC.\n   * We do single level routing map but for all coins which result in the route map below:\n   * SOL => USDT, USDC\n   * USDT => SOL\n   * USDC => SOL, USDT\n   *\n   * From this route map we can map out all possible route from one to another by checking the intersection.\n   */\n  getRouteMap(onlyDirectRoutes?: boolean) {\n    return computeRouteMap(this.tokenRouteSegments, this.intermediateTokens, onlyDirectRoutes);\n  }\n\n  /**\n   * Query existing open order account, this query is slow.\n   * We suggest to fetch this in the background.\n   */\n  static findSerumOpenOrdersForOwner = async ({\n    userPublicKey,\n    cluster,\n    connection,\n  }: {\n    userPublicKey: PublicKey;\n    cluster: Cluster;\n    connection: Connection;\n  }) => {\n    const newMarketToOpenOrdersAddress: SerumOpenOrdersMap = new Map();\n\n    if (userPublicKey) {\n      const programId = cluster === 'mainnet-beta' ? MAINNET_SERUM_DEX_PROGRAM : DEVNET_SERUM_DEX_PROGRAM;\n\n      const allOpenOrders = await OpenOrders.findForOwner(connection, userPublicKey, programId);\n\n      allOpenOrders.forEach((openOrders) => {\n        newMarketToOpenOrdersAddress.set(openOrders.market.toString(), openOrders.address);\n      });\n    }\n    return newMarketToOpenOrdersAddress;\n  };\n\n  public exchange: (params: {\n    routeInfo: RouteInfo;\n    /**\n     * This will overwrite the default Jupiter.setUser, useful for stateless usage like API\n     */\n    userPublicKey?: PublicKey;\n    /**\n     * This will overwrite the default token ledger, useful for stateless usage like API\n     */\n    tokenLedger?: PublicKey;\n    /**\n     * This will overwrite the default fee account, useful for stateless usage like API\n     */\n    feeAccount?: PublicKey;\n    /**\n     * This will overwrite the default wrapUnwrapSOL, useful for stateless usage like API\n     */\n    wrapUnwrapSOL?: boolean;\n  }) => Promise<{\n    transactions: {\n      setupTransaction?: Transaction;\n      swapTransaction: Transaction;\n      cleanupTransaction?: Transaction;\n    };\n    execute: (params?: ExecuteParams) => Promise<SwapResult>;\n  }> = async ({ routeInfo, userPublicKey, feeAccount, wrapUnwrapSOL, tokenLedger }) => {\n    const { connection, serumOpenOrdersPromise } = this;\n    const user: PublicKey | Keypair | undefined = userPublicKey || this.user;\n    if (!user) {\n      throw new Error('user not found');\n    }\n\n    const owner = new Owner(user);\n\n    const lastMarketInfoIndex = routeInfo.marketInfos.length - 1;\n    const inputMint = routeInfo.marketInfos[0].inputMint;\n    const outputMint = routeInfo.marketInfos[lastMarketInfoIndex].outputMint;\n    const _wrapUnwrapSOL = wrapUnwrapSOL ?? this.wrapUnwrapSOL;\n    const cacheKey = getCacheMintKey(routeInfo.marketInfos);\n\n    let instructions = getInstructionCache({\n      instructionCache: this.instructionCache,\n      walletPublicKey: owner.publicKey.toBase58(),\n      cacheKey,\n    });\n\n    if (!instructions) {\n      const [ataInstructions, openOrdersInstructions] = await Promise.all([\n        routeAtaInstructions(connection, routeInfo.marketInfos, owner.publicKey, _wrapUnwrapSOL),\n        Promise.all(\n          routeInfo.marketInfos.map(async ({ amm }) => {\n            if (amm instanceof SerumAmm || amm instanceof SplitTradeAmm) {\n              if (!amm.market) return;\n              return await getOrCreateOpenOrdersAddress(\n                connection,\n                owner.publicKey,\n                amm.market,\n                await serumOpenOrdersPromise,\n              );\n            }\n            return;\n          }),\n        ),\n      ]);\n\n      instructions = {\n        intermediate: ataInstructions.userIntermediaryTokenAccountResult,\n        destination: ataInstructions.userDestinationTokenAccountResult,\n        openOrders: openOrdersInstructions,\n      };\n    }\n\n    const sourceInstruction =\n      inputMint.equals(WRAPPED_SOL_MINT) && _wrapUnwrapSOL\n        ? await createAndCloseWSOLAccount(connection, owner.publicKey, routeInfo.inAmount)\n        : {\n            ...getEmptyInstruction(),\n            address: await Token.getAssociatedTokenAddress(\n              ASSOCIATED_TOKEN_PROGRAM_ID,\n              TOKEN_PROGRAM_ID,\n              inputMint,\n              owner.publicKey,\n              true,\n            ),\n          };\n\n    // Construct platform fee\n    feeAccount = feeAccount || this.platformFeeAndAccounts.feeAccounts.get(outputMint.toBase58());\n\n    const platformFee = feeAccount\n      ? {\n          feeBps:\n            this.platformFeeAndAccounts.feeBps ||\n            Math.floor(routeInfo.marketInfos[lastMarketInfoIndex].platformFee.pct * 100),\n          feeAccount,\n        }\n      : undefined;\n\n    const preparedInstructions = await routeToInstructions({\n      user: owner,\n      tokenLedger: tokenLedger || this.tokenLedger,\n      openOrdersAddresses: instructions.openOrders.map((oo) => oo?.address),\n      userSourceTokenAccountAddress: sourceInstruction.address,\n      userIntermediaryTokenAccountAddress: instructions.intermediate?.address,\n      userDestinationTokenAccountAddress: instructions.destination.address,\n      routeInfo,\n      platformFee,\n      quoteMintToReferrer: this.quoteMintToReferrer,\n    });\n\n    const splitSetupRequired = isSplitSetupRequired(routeInfo.marketInfos);\n\n    const setupTransactionBuilder = new TransactionBuilder(connection, owner.publicKey, owner);\n\n    const transactionBuilder = new TransactionBuilder(connection, owner.publicKey, owner);\n\n    const cleanupTransactionBuilder = new TransactionBuilder(connection, owner.publicKey, owner);\n\n    if (splitSetupRequired) {\n      if (instructions.openOrders) {\n        instructions.openOrders.forEach((openOrders) => {\n          if (openOrders) {\n            setupTransactionBuilder.addInstruction(openOrders);\n          }\n        });\n      }\n\n      if (instructions.intermediate) {\n        setupTransactionBuilder.addInstruction({\n          ...instructions.intermediate,\n          cleanupInstructions: [],\n        });\n      }\n\n      setupTransactionBuilder.addInstruction({\n        ...sourceInstruction,\n        cleanupInstructions: [],\n      });\n\n      cleanupTransactionBuilder\n        .addInstruction({\n          ...getEmptyInstruction(),\n          cleanupInstructions: sourceInstruction.cleanupInstructions,\n        })\n        .addInstruction({\n          ...getEmptyInstruction(),\n          cleanupInstructions: instructions.intermediate?.cleanupInstructions ?? [],\n        });\n\n      // if source address the same as destination address, then we don't need to setup or cleanup twice, mainly SOL-SOL\n      if (!sourceInstruction.address.equals(instructions.destination.address)) {\n        setupTransactionBuilder.addInstruction({\n          ...instructions.destination,\n          cleanupInstructions: [],\n        });\n\n        cleanupTransactionBuilder.addInstruction({\n          ...getEmptyInstruction(),\n          cleanupInstructions: instructions.destination.cleanupInstructions,\n        });\n      }\n    } else {\n      if (instructions.openOrders) {\n        instructions.openOrders.forEach((openOrders) => {\n          if (openOrders) {\n            transactionBuilder.addInstruction(openOrders);\n          }\n        });\n      }\n\n      if (instructions.intermediate) {\n        transactionBuilder.addInstruction(instructions.intermediate);\n      }\n\n      transactionBuilder.addInstruction(sourceInstruction);\n\n      // if source address the same as destination address, then we don't need to setup or cleanup twice, mainly SOL-SOL\n      if (!sourceInstruction.address.equals(instructions.destination.address)) {\n        transactionBuilder.addInstruction(instructions.destination);\n      }\n    }\n\n    transactionBuilder.addInstruction(preparedInstructions);\n\n    const recentBlockHash = (await this.connection.getRecentBlockhash('finalized')).blockhash;\n\n    const { transaction: setupTransaction } = await setupTransactionBuilder.build(recentBlockHash);\n\n    const { transaction } = await transactionBuilder.build(recentBlockHash);\n\n    const { transaction: cleanupTransaction } = await cleanupTransactionBuilder.build(recentBlockHash);\n\n    // Is this horrible? Yes.\n    const [setupTransactionObject, swapTransactionObject, cleanupTransactionObject] = ((): [\n      one: Transaction | undefined,\n      two: Transaction,\n      three: Transaction | undefined,\n    ] => {\n      if (setupTransaction.instructions.length && cleanupTransaction.instructions.length) {\n        return [setupTransaction, transaction, cleanupTransaction] as [\n          one: Transaction | undefined,\n          two: Transaction,\n          three: Transaction | undefined,\n        ];\n      } else if (setupTransaction.instructions.length) {\n        const [first, second] = [setupTransaction, transaction];\n\n        return [first, second, undefined];\n      } else if (cleanupTransaction.instructions.length) {\n        const [second, third] = [transaction, cleanupTransaction];\n\n        return [undefined, second, third];\n      } else {\n        return [undefined, transaction, undefined];\n      }\n    })();\n\n    const setupInstructions = instructions;\n    return {\n      transactions: {\n        setupTransaction: setupTransactionObject,\n        swapTransaction: swapTransactionObject,\n        cleanupTransaction: cleanupTransactionObject,\n      },\n      execute: ({ wallet, onTransaction }: ExecuteParams = {}) =>\n        this.executeInternal({\n          wallet,\n          onTransaction,\n          inputMint,\n          outputMint,\n          sourceInstruction,\n          setupInstructions,\n          setupTransaction: setupTransactionObject,\n          swapTransaction: swapTransactionObject,\n          cleanupTransaction: cleanupTransactionObject,\n          wrapUnwrapSOL: _wrapUnwrapSOL,\n          owner,\n        }),\n    };\n  };\n\n  /** sign, send and await confirmation for an exchange */\n  private async executeInternal({\n    wallet,\n    onTransaction,\n    inputMint,\n    outputMint,\n    sourceInstruction,\n    setupInstructions,\n    setupTransaction,\n    swapTransaction,\n    cleanupTransaction,\n    owner,\n    wrapUnwrapSOL,\n  }: {\n    wallet: ExecuteParams['wallet'];\n    onTransaction?: OnTransaction;\n    inputMint: PublicKey;\n    outputMint: PublicKey;\n    sourceInstruction: Instruction & { address: PublicKey };\n    setupInstructions: SetupInstructions;\n    setupTransaction?: Transaction;\n    swapTransaction: Transaction;\n    cleanupTransaction?: Transaction;\n    wrapUnwrapSOL?: boolean;\n    owner: Owner;\n  }): Promise<SwapResult> {\n    try {\n      const transactions = [setupTransaction, swapTransaction, cleanupTransaction].filter(\n        (tx): tx is Transaction => tx !== undefined,\n      );\n\n      const totalTxs = transactions.length;\n\n      if (owner.signer) {\n        const signer = owner.signer;\n        transactions.forEach((transaction) => {\n          transaction.sign(signer);\n        });\n      } else {\n        if (!wallet) {\n          throw new Error('Signer wallet not found');\n        }\n        if (totalTxs > 1) {\n          await wallet.signAllTransactions(transactions);\n        } else {\n          await wallet.signTransaction(transactions[0]);\n        }\n      }\n\n      if (setupTransaction) {\n        onTransaction?.(getSignature(setupTransaction), totalTxs, 'SETUP');\n\n        await validateTransactionResponse(\n          await transactionSenderAndConfirmationWaiter(this.connection, setupTransaction),\n        );\n      }\n\n      onTransaction?.(getSignature(swapTransaction), totalTxs, 'SWAP');\n\n      let swapError: Error | undefined;\n      let swapResult: SwapResult | undefined = undefined;\n\n      try {\n        const { txid, transactionResponse } = await validateTransactionResponse(\n          await transactionSenderAndConfirmationWaiter(this.connection, swapTransaction),\n        );\n\n        const [sourceTokenBalanceChange, destinationTokenBalanceChange] = getTokenBalanceChangesFromTransactionResponse(\n          {\n            txid,\n            inputMint,\n            outputMint,\n            user: owner.publicKey,\n            sourceAddress: sourceInstruction.address,\n            destinationAddress: setupInstructions.destination.address,\n            transactionResponse,\n            hasWrappedSOL: Boolean(cleanupTransaction) || !wrapUnwrapSOL,\n          },\n        );\n\n        swapResult = {\n          txid,\n          inputAddress: sourceInstruction.address,\n          outputAddress: setupInstructions.destination.address,\n          inputAmount: sourceTokenBalanceChange,\n          outputAmount: destinationTokenBalanceChange,\n        };\n      } catch (e: any) {\n        swapError = e;\n      } finally {\n        if (cleanupTransaction) {\n          onTransaction?.(getSignature(cleanupTransaction), totalTxs, 'CLEANUP');\n\n          // wait for confirmation but swallow error to conserve behaviour\n          await transactionSenderAndConfirmationWaiter(this.connection, cleanupTransaction);\n        }\n      }\n\n      if (swapError || !swapResult) {\n        throw swapError || new Error('Swap failed');\n      }\n\n      // return must be after `finally` clause to ensure we wait what we done in the `finally`\n      return swapResult;\n    } catch (error) {\n      return { error: error as TransactionError };\n    } finally {\n      const hasOpenOrders = setupInstructions?.openOrders.some((oo) => oo?.instructions.length);\n      if (\n        hasOpenOrders ||\n        setupInstructions?.intermediate?.instructions.length ||\n        setupInstructions?.destination.instructions.length\n      ) {\n        deleteInstructionCache({\n          instructionCache: this.instructionCache,\n          walletPublicKey: owner.publicKey.toBase58(),\n        });\n      }\n      this.routeCache.clear();\n    }\n  }\n\n  static async getIntermediateTokens() {\n    const intermediateTokensSet = await getTopTokens();\n    for (const swapProtocolToken of SWAP_PROTOCOL_TOKENS) {\n      intermediateTokensSet.add(swapProtocolToken);\n    }\n    const saberDecimalAmms = getSaberWrappedDecimalsAmms();\n\n    saberDecimalAmms.forEach((item) => {\n      intermediateTokensSet.add(item.wrappedToken.addDecimals.mint.toBase58());\n    });\n\n    return Array.from(intermediateTokensSet);\n  }\n\n  static createInitializeTokenLedgerInstruction = createInitializeTokenLedgerInstruction;\n}\n"],"names":["IDL","version","name","instructions","accounts","isMut","isSigner","args","type","option","defined","kind","fields","types","variants","errors","code","msg","WRAPPED_SOL_MINT","PublicKey","MAINNET_SERUM_DEX_PROGRAM","DEVNET_SERUM_DEX_PROGRAM","MARKETS_URL","devnet","testnet","TOKEN_LIST_URL","LAMPORTS_PER_SIGNATURE","RAYDIUM_AMM_V4_PROGRAM_ID","ALDRIN_SWAP_PROGRAM_ID","ALDRIN_SWAP_V2_PROGRAM_ID","SABER_ADD_DECIMALS_PROGRAM_ID","CROPPER_PROGRAM_ID","SENCHA_PROGRAM_ID","LIFINITY_PROGRAM_ID","CREMA_PROGRAM_ID","JUPITER_WALLET","MERCURIAL_SWAP_PROGRAM_ID","WHIRLPOOL_PROGRAM_ID","CYKURA_PROGRAM_ID","CYKURA_FACTORY_STATE_ADDRESS","SWAP_PROTOCOL_TOKENS","JUPITER_ERRORS","Object","freeze","TransactionNotConfirmed","BalancesNotExtractedProperly","reduce","accErrors","error","IS_DEV","process","PublicKeyLayout","Layout","constructor","property","layout","blob","span","getSpan","b","offset","decode","encode","src","toBuffer","publicKey","U64Layout","bn","u64","toArrayLike","Buffer","uint64","uint128","CropperTokenSwapLayout","struct","u8","CropperStateLayout","CROPPER_STATE_ADDRESS","accountInfoToCropperPoolState","address","accountInfo","programId","owner","decoded","data","authority","findProgramAddressSync","isInitialized","Boolean","nonce","ammId","serumProgramId","tokenProgramId","tokenAAccount","tokenBAccount","serumMarket","poolMint","mintA","mintB","stateAccountInfoToCropperState","stateOwner","feeOwner","initialSupply","returnFeeNumerator","toNumber","fixedFeeNumerator","feeDenominator","curveType","curveParameters","Side","Bid","bid","Ask","ask","JUPITER_PROGRAM_ID_PRODUCTION","JUPITER_PROGRAM_ID","JUPITER_PROGRAM","Program","PRODUCTION_TOKEN_LEDGERS","TOKEN_LEDGER","Math","floor","random","length","stableSwapNPoolIntoMercurialExchange","swayLayout","sourceTokenAccount","destinationTokenAccount","userTransferAuthority","swapProgram","swapState","tokenProgram","TOKEN_PROGRAM_ID","poolAuthority","raydiumAmmToRaydiumSwap","raydiumAmm","userSourceTokenAccount","userDestinationTokenAccount","ammAuthority","Uint8Array","from","replace","serumMarketKeys","Error","ammOpenOrders","poolCoinTokenAccount","poolPcTokenAccount","serumBids","serumAsks","serumEventQueue","serumCoinVaultAccount","serumPcVaultAccount","serumVaultSigner","userSourceOwner","marketIntoSerumSwap","market","openOrdersAddress","orderPayerTokenAccountAddress","coinWallet","pcWallet","vaultSigner","createProgramAddressSync","vaultSignerNonce","openOrders","requestQueue","eventQueue","bids","bidsAddress","asks","asksAddress","coinVault","baseVault","pcVault","quoteVault","orderPayerTokenAccount","dexProgram","rent","SYSVAR_RENT_PUBKEY","createMercurialExchangeInstruction","swapLayout","inAmount","minimumOutAmount","tokenLedger","platformFee","remainingAccounts","swapTokenAccount","tokenAccounts","push","pubkey","isWritable","prepareRemainingAccounts","feeAccount","instruction","mercurialExchange","BN","feeBps","createSerumSwapInstruction","sourceMint","referrer","side","equals","baseMintAddress","serumSwap","createTokenSwapInstruction","tokenSwapState","isStep","swapSource","swapDestination","tokenAccountA","tokenAccountB","stepTokenSwap","tokenSwap","tokenSwapProgram","swap","source","destination","poolToken","poolFee","createSenchaSwapInstruction","poolState","token0Mint","token0Reserves","token1Reserves","feesSource","feesDestination","token0Fees","token1Fees","senchaExchange","userAuthority","inputUserAccount","inputTokenAccount","inputFeesAccount","outputUserAccount","outputTokenAccount","outputFeesAccount","createCropperSwapInstruction","cropperTokenSwap","createRaydiumSwapInstruction","raydiumSwapV2","createAldrinSwapInstruction","userBaseTokenAccount","userQuoteTokenAccount","baseTokenMint","aldrinSwap","pool","poolSigner","baseTokenVault","quoteTokenVault","feePoolTokenAccount","walletAuthority","createAldrinV2SwapInstruction","curve","aldrinV2Swap","createCremaSwapInstruction","cremaTokenSwap","poolSourceTokenAccount","poolDestinationTokenAccount","poolTicksAccount","ticksKey","createRiskCheckAndFeeInstruction","riskCheckAndFee","createSetTokenLedgerInstruction","tokenAccountAddress","setTokenLedger","tokenAccount","createInitializeTokenLedgerInstruction","payer","initializeTokenLedger","systemProgram","SystemProgram","createOpenOrdersInstruction","ix","createOpenOrders","saberPoolIntoSaberSwap","saberPool","sourceMintAddress","feesTokenAccount","state","tokenA","mint","tokenB","adminFeeAccount","reserve","config","swapProgramID","swapAccount","swapAuthority","createSaberSwapInstruction","stableSwap","saberSwap","createSaberAddDecimalsDepositInstruction","addDecimals","saberAddDecimalsDeposit","addDecimalsProgram","wrapper","wrapperMint","wrapperUnderlyingTokens","userUnderlyingTokens","userWrappedTokens","createSaberAddDecimalsWithdrawInstruction","saberAddDecimalsWithdraw","createLifinitySwapInstruction","tokenAMint","lifinityTokenSwap","amm","sourceInfo","destinationInfo","pythAccount","pythPcAccount","configAccount","createCykuraSwapInstruction","additionalArgs","cykuraSwap","signer","factoryState","poolAddress","inputVault","outputVault","lastObservationState","coreProgram","concat","swapAccountMetas","nextObservationState","createWhirlpoolSwapInstruction","tokenOwnerAccountA","tokenOwnerAccountB","aToB","whirlpoolSwap","tokenAuthority","whirlpool","tokenVaultA","tokenVaultB","tickArray0","tickArray1","tickArray2","oracle","getSaberWrappedDecimalsAmms","addDecimalsJson","map","addDecimalJson","underlying","underlyingDecimals","decimals","SaberAddDecimalsAmm","WrappedToken","multiplier","getOutputAmount","inputAmount","inputMint","calculateWithdrawOutputAmount","calculateDepositOutputAmount","toString","JSBI","multiply","BigInt","divide","wrappedToken","id","label","shouldPrefetch","toBase58","getAccountsForUpdate","Array","update","_accountInfoMap","getQuote","amount","outAmount","notEnoughLiquidity","feeAmount","feeMint","feePct","priceImpactPct","createSwapInstructions","swapParams","reserveTokenMints","getTwoPermutations","array","acc","item","forEach","otherItem","chunks","size","apply","ceil","_","index","slice","chunkedGetMultipleAccountInfos","connection","pks","chunkSize","Promise","all","chunk","_buildArgs","commitment","_rpcRequest","then","result","value","catch","e","console","flat","mapAddressToAccountInfos","accountInfoMap","addresses","accountInfos","get","tokenAccountsToJSBIs","prefetchAmms","amms","accountInfosMap","Map","set","AMM_INFO_LAYOUT_V4","nu64","RaydiumAmm","ammAccountInfo","params","coinMint","pcMint","status","ammTargetOrders","coinReserve","pcReserve","calculator","coinMintAddress","pcMintAddress","keys","pk","swapFeeNumerator","swapFeeDenominator","Decimal","div","TokenSwapConstantProduct","Fraction","ZERO_FRACTION","decodeSerumMarketKeysString","serumMarketInfo","decodedMarket","Market","getLayout","poolCoinTokenAccountInfo","poolPcTokenAccountInfo","ammOpenOrdersAccountInfo","coinAmount","pcAmount","tokenAmountAccessor","OpenOrders","fromAccountInfo","add","baseTokenTotal","sub","String","needTakePnlCoin","quoteTokenTotal","needTakePnlPc","tokenAccountInfo","fromBuffer","outputIndex","exchange","expectedOutputAmount","fees","priceImpact","TAKER_FEE_PCT","STABLE_TAKER_FEE_PCT","STABLE_MARKET_ADDRESSES","getOutAmountMeta","fromAmount","fromMint","toMint","takerFeePct","includes","quoteMintAddress","forecastBuy","forecastSell","orderbook","pcIn","coinOut","bestPrice","worstPrice","totalCost","totalCoins","quoteSizeLots","quoteSizeLotsToNumber","availablePc","ZERO","baseSizeLots","baseSizeLotsToNumber","lotPrice","lotQuantity","getL2","equal","orderCoinAmount","orderPcAmount","greaterThanOrEqual","numberLotsPurchasable","subtract","bestPriceDecimal","worstPriceDecimal","bestPriceSizeLots","priceLotsToDecimal","totalCostSizeLots","lessThanOrEqual","minimum","in","mul","out","coinIn","pcOut","totalCoin","availableCoin","numberLotsCanSell","totalCoinAmountToSell","pcOutInteger","minus","greaterThan","round","descending","isBids","key","quantity","slab","items","price","ushrn","divideBnToDecimal","numerator","denominator","quotient","rem","umod","gcd","baseLotSize","_decoded","isZero","quoteLotSize","_baseSplTokenMultiplier","_quoteSplTokenMultiplier","SerumAmm","_orderbooks","orderbooks","asksAccountInfo","bidsAccountInfo","Orderbook","destinationMint","outAmountMeta","minInAmount","minOutAmount","quoteMintToReferrer","isSplitSupported","firstAmm","secondAmm","requiresSplitSetup","SplitTradeAmm","shouldSplitSetup","portion1","portion2","create","firstAmmTwoPermutations","secondAmmTwoPermutations","firstAmmTwoPermutation","secondAmmTwoPermutation","every","labelWithPortions","portion","sort","a","join","quoteParams","sourceMintString","bestSolution","firstQuote","undefined","secondQuote","p","firstAmount","secondAmount","firstAmmFee","secondAmmFee","isValidRoute","ammA","ammB","isSerumAndRaydium","marketInfos","mi","SaberAmm","Stable","TWO","targetAmpFactor","ONE","trade","tokenAccountInfos","info","deserializeAccount","asFraction","toFixed","inputIndex","Percentage","fromDecimal","number","fromFraction","toDecimalPlaces","num","denom","toDecimal","eq","p2","denomGcd","denomLcm","p1DenomAdjustment","p2DenomAdjustment","p1NumeratorAdjusted","p2NumeratorAdjusted","newNumerator","FEES_LAYOUT","POOL_FIELDS_COMMON","POOL_LAYOUT","POOL_V2_LAYOUT","STABLE_CURVE_LAYOUT","accountInfoToAldrinPoolState","isV2","curveObject","quoteTokenMint","feeBaseAccount","feeQuoteAccount","traderFee","tradeFeeNumerator","tradeFeeDenominator","ownerFee","ownerTradeFeeNumerator","ownerTradeFeeDenominator","AldrinAmm","amp","TokenSwapStable","decodeStableCurveAmp","STEP_TOKEN_SWAP_PROGRAM_ID","PROGRAM_ID_TO_LABEL","TokenSwapLayout","StepTokenSwapLayout","accountInfoToTokenSwapState","tokenSwapAccountInfo","tokenSwapData","tokenPool","ownerWithdrawFeeNumerator","ownerWithdrawFeeDenominator","poolNonce","CurveType","SplTokenSwapAmm","swapStateAccountInfo","ConstantProduct","FEE_DENOMINATOR","pow","MercurialSwapLayout","u32","accountInfoToMercurialSwapLayout","tokenAccountsLength","precisionMultipliers","precisionMultiplierA","precisionMultiplierB","precisionMultiplierC","precisionMultiplierD","tokenAccountC","tokenAccountD","amplificationCoefficient","feeNumerator","precisionFactor","MercurialAmm","precisionMultiplier","filter","x","findIndex","tokenMints","tokenMint","decodeSwapLayout","CropperAmm","getStateFromStateAccount","getAccountInfo","tokenAFeeAccount","tokenBFeeAccount","decodePoolState","accountInfoToCremaPoolState","TokenSwapAccountLayout","swapTokenA","swapTokenB","tokenBMint","fee","currentSqrtPrice","currentLiquity","CremaAmm","ticks","ticksAccountInfo","ticksInfo","parseTicksAccount","preSwapA","preSwapB","amountOut","feeUsed","impact","amountIn","calculateSwapA2B","currentPriceA","transactionPriceA","amountUsed","abs","calculateSwapB2A","currentPriceB","transactionPriceB","SenchaSwapLayout","accountInfoToSenchaPoolState","isPaused","bump","token1Mint","tradeFeeKbps","SenchaAmm","swapStateToPoolInfo","poolCoinMint","poolCoinDecimal","poolPcDecimal","poolPcMint","accountInfoLifinitySwapLayout","LIFINITY_AMM_LAYOUT","poolFeeAccount","LifinityAmm","poolInfo","idx","account","tradeDirection","TradeDirection","AtoB","BtoA","pyth","pythPc","coinBalance","pcBalance","getParsedData","getCurveAmount","publishSlot","amountSwapped","feePercent","FEE_RATE_MUL_VALUE","fromX64","parseWhirlpoolSafe","whirlpoolData","parseWhirlpool","WhirlpoolAmm","whirlpoolAccountInfo","tickArrays","tickPks","feeRate","getTickArrayPks","clear","tickArrayPk","tickArrayAddress","tickArrayAccountInfo","tickArray","parseTickArray","swapQuote","getSwapQuote","tokenAmount","isInput","Number","quotePrice","currentPrice","sqrtPrice","tokenMintA","getTickArrayPublicKeysForSwap","tickCurrentIndex","tickSpacing","tokenMintB","SolanaTickDataProvider","program","bitmapCache","tickCache","accountsToFetch","bitmaps","eagerLoadCache","tickCurrent","compressed","wordPos","tickPosition","bitmapsToFetch","WORD_POS_MIN","TickMath","MIN_TICK","WORD_POS_MAX","MAX_TICK","minWord","max","maxWord","min","i","getBitmapAddressSync","fetchedBitmaps","tickBitmapState","fetchMultiple","tickAddresses","currentWordPos","wordArray","word","generateBitmapWord","eqn","j","shrn","and","tick","tickAddress","getTickAddressSync","fetchedTicks","tickState","fetchedTick","liquidityNet","log","lazyLoadAccountsToCache","bitmap","tickAddressesToFetch","getTick","savedTick","getTickAddress","TICK_SEED","token0","token1","u32ToSeed","getBitmapAddress","BITMAP_SEED","u16ToSeed","getBitmap","savedBitmap","nextInitializedTickWithinOneWord","lte","bitPos","cachedBitmap","next","nextBit","initialized","nextInitializedBit","nextTick","buildTick","updateCachedAccountInfos","bitmapAddress","bitmapAccountInfo","coder","tickStateAccountInfo","provider","anchor","Provider","skipPreflight","CYCLOS_CORE","CykuraAmm","accountInfoOrPoolState","tickDataProvider","tokens","vaults","sqrtPriceX32","liquidity","Token","CykuraPool","vault0","ASSOCIATED_TOKEN_PROGRAM_ID","vault1","poolAccountInfo","inputToken","currentOutAmount","newPool","CurrencyAmount","fromRawAmount","priceImpactDecimal","sqrtRatioX32","OBSERVATION_SEED","observationIndex","observationCardinalityNext","ammFactory","SerumMarket","accountFlags","SABER_SWAP_PROGRAM_ID","StableSwap","loadWithData","senchaAmm","fetchMarketCache","url","marketsCache","fetch","json","fetchExtraKeyedAccountInfos","extraKeyedAccountInfos","getAllAmms","marketCacheToAccountInfo","format","rest","marketKeyedAccountInfos","extraKeys","keyedAccountInfo","ammCrossProtocolPairs","arr","callback","getTokenRouteSegments","tokenRouteSegments","reserveTokenMintPermutations","firstReserveMint","secondReserveMint","addSegment","inMint","outMint","segments","computeInputRouteSegments","outputMint","intermediateTokens","inputRouteSegments","inputSegment","outputSegment","inputInnerMap","outputInnerMap","entries","intersectionAmms","computeRouteMap","onlyDirectRoutes","routeMap","firstLevelOutputs","validOutputMints","Set","firstLevelOutputMint","firstLevelAmms","secondLevelOutputs","secondLevelOutputMint","secondLevelAmms","firstLevelAmm","secondLevelAmm","isSplitSetupRequired","firstMarket","secondMarket","marketInfo","isPlatformFeeSupported","getRouteInfoUniqueId","routeInfo","getCacheMintKey","getInstructionCache","instructionCache","walletPublicKey","cacheKey","setInstructionCache","instructionResult","walletCache","deleteInstructionCache","getEmptyInstruction","cleanupInstructions","signers","createAndCloseWSOLAccount","toAccount","getAssociatedTokenAddress","createAssociatedTokenAccountInstruction","transfer","fromPubkey","toPubkey","lamports","createSyncNativeInstruction","createCloseAccountInstruction","findOrCreateAssociatedAccountByMint","mintAddress","unwrapSOL","routeToInstructions","user","openOrdersAddresses","userSourceTokenAccountAddress","userIntermediaryTokenAccountAddress","userDestinationTokenAccountAddress","outAmountWithSlippage","legs","effectiveQuoteMintToReferrer","userIntermediateTokenAccountAddresses","userTokenAccountAddresses","platformFeeSupported","legInputAmount","legOutAmountWithSlippage","legPlatformFee","isKeyPair","routeAtaInstructions","userPublicKey","getUserIntermediateTokenAccountAddress","userIntermediateTokenAccountAddress","getUserDestinationTokenAccountAddress","userIntermediaryTokenAccountResult","userDestinationTokenAccountResult","getOrCreateOpenOrdersAddress","marketToOpenOrdersAddress","marketAddress","openOrdersAccountInfo","newOpenOrdersAddress","newOpenOrdersAddressInfo","SERUM_OPEN_ACCOUNT_LAMPORTS","OPEN_TOKEN_ACCOUNT_LAMPORTS","sum","values","calculateTransactionDepositAndFee","intermediate","hasWrapUnwrapSOL","feeCalculator","openOrdersDeposits","ooi","ataDeposits","signatureFee","oo","lamportsPerSignature","totalFeeAndDeposits","minimumSOLForTransaction","getDepositAndFeeFromInstructions","serumOpenOrdersPromise","wrapUnwrapSOL","routeCache","openOrdersInstructionsPromise","promise","openOrdersInstructions","NO_PLATFORM_FEE","feeAccounts","getPlatformFeeAccounts","feeAccountOwner","getTokenAccountsByOwner","deserializedtokenAccount","TransactionBuilder","feePayer","addInstruction","build","recentBlockHash","getLatestBlockhash","blockhash","txFields","recentBlockhash","curr","transaction","Transaction","execute","sendTransaction","Owner","_owner","isPublicKey","secretKey","wait","time","resolve","setTimeout","diffTokenBalance","accountKeyIndex","meta","postBalance","postTokenBalances","find","postTokenBalance","accountIndex","uiTokenAmount","preBalance","preTokenBalances","preTokenBalance","parseInt","extractTokenBalanceChangeFromTransaction","message","accountKeys","extractSOLChangeFromTransaction","postBalances","preBalances","getTokenBalanceChangesFromTransactionResponse","txid","sourceAddress","destinationAddress","transactionResponse","hasWrappedSOL","sourceTokenBalanceChange","destinationTokenBalanceChange","TransactionError","getUnixTs","Date","getTime","SEND_OPTIONS","maxRetries","transactionSenderAndConfirmationWaiter","signedTransaction","timeout","pollInterval","sendInterval","sendRetries","rawTransaction","serialize","sendRawTransaction","start","lastSendTimestamp","retries","timestamp","response","getTransaction","getSignature","signature","bs58","validateInput","arrays","isArray","TypeError","validateArray","validateDimensions","validateCombinations","MAX_DIMENSIONS","multiplySize","MAX_SIZE","sizeStr","isFinite","toExponential","fastCartesian","loopFunc","getLoopFunc","cachedLoopFunc","cache","mGetLoopFunc","indexes","getIndex","middle","end","repeat","Function","PLATFORM_FEE_DENOMINATOR","fetchAccountInfos","routes","accountsToFetchSet","ammMap","innerMap","getInputOutputId","getQuoteId","getQuoteMap","filterTopNResult","quotes","quote","MAX_LEVEL","processInputRouteSegmentToRoutesInfos","inputRouteSegment","getDepositAndFeeForRoute","platformFeeBps","slippage","inputMintString","outputMintString","tradeIdQuoteMap","inputMintInnerMap","maxLevel","walkTheTree","level","walked","tradeId","quoteMap","filteredAmms","has","splitTradeAmm","mints","_mints","ammsArr","permutations","routesInfo","route","intermediateAmount","cacheQuote","pct","outAmountAfterFees","lpFee","getDepositAndFee","priceFactor","validateTransactionResponse","err","parseErrorForTransaction","getTopTokens","topTokens","Jupiter","cluster","platformFeeAndAccounts","routeCacheDuration","shouldLoadSerumOpenOrders","getDepositAndFees","getDepositAndFeesForUser","lastMarketInfoIndex","_wrapUnwrapSOL","ataInstructions","sourceInstruction","preparedInstructions","splitSetupRequired","setupTransactionBuilder","transactionBuilder","cleanupTransactionBuilder","getRecentBlockhash","setupTransaction","cleanupTransaction","setupTransactionObject","swapTransactionObject","cleanupTransactionObject","first","second","third","setupInstructions","transactions","swapTransaction","wallet","onTransaction","executeInternal","load","marketUrl","restrictIntermediateTokens","_quoteMintToReferrer","fetchTokenRouteSegments","getRecentBlockhashAndContext","getIntermediateTokens","jupiter","setUserPublicKey","getAccountToAmmMap","accountToAmmMap","tokenRouteSegment","computeRoutes","forceFetch","now","inputMintAndOutputMint","localeCompare","shouldBustCache","fetchTimestamp","routesInfos","cached","delete","findSerumOpenOrdersForOwner","marketCaches","getRouteMap","tx","totalTxs","sign","signAllTransactions","signTransaction","swapError","swapResult","inputAddress","outputAddress","outputAmount","hasOpenOrders","some","intermediateTokensSet","swapProtocolToken","saberDecimalAmms","newMarketToOpenOrdersAddress","allOpenOrders","findForOwner"],"mappings":"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"}